/** whoscored.com ocm.js-build-2.20230123121005 **/

/*! For license information please see ocm.js.LICENSE.txt */
!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=91)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){t.exports=i(7)},function(t,e){function i(t,e,i,n,r,s,o){try{var a=t[s](o),u=a.value}catch(t){return void i(t)}a.done?e(u):Promise.resolve(u).then(n,r)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,s){var o=t.apply(e,n);function a(t){i(o,r,s,a,u,"next",t)}function u(t){i(o,r,s,a,u,"throw",t)}a(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){"use strict";var n=i(24),r=Object.prototype.toString;function s(t){return"[object Array]"===r.call(t)}function o(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function u(t){if("[object Object]"!==r.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t){return"[object Function]"===r.call(t)}function l(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),s(t))for(var i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===r.call(t)},isBuffer:function(t){return null!==t&&!o(t)&&null!==t.constructor&&!o(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isPlainObject:u,isUndefined:o,isDate:function(t){return"[object Date]"===r.call(t)},isFile:function(t){return"[object File]"===r.call(t)},isBlob:function(t){return"[object Blob]"===r.call(t)},isFunction:c,isStream:function(t){return a(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function t(){var e={};function i(i,n){u(e[n])&&u(i)?e[n]=t(e[n],i):u(i)?e[n]=t({},i):s(i)?e[n]=i.slice():e[n]=i}for(var n=0,r=arguments.length;n<r;n++)l(arguments[n],i);return e},extend:function(t,e,i){return l(e,(function(e,r){t[r]=i&&"function"==typeof e?n(e,i):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},function(t,e,i){var n=function(t){"use strict";var e,i=Object.prototype,n=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,i){return t[e]=i}}function c(t,e,i,n){var r=e&&e.prototype instanceof m?e:m,s=Object.create(r.prototype),o=new C(n||[]);return s._invoke=function(t,e,i){var n=d;return function(r,s){if(n===f)throw new Error("Generator is already running");if(n===g){if("throw"===r)throw s;return P()}for(i.method=r,i.arg=s;;){var o=i.delegate;if(o){var a=A(o,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===d)throw n=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=f;var u=l(t,e,i);if("normal"===u.type){if(n=i.done?g:h,u.arg===p)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=g,i.method="throw",i.arg=u.arg)}}}(t,i,o),s}function l(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d="suspendedStart",h="suspendedYield",f="executing",g="completed",p={};function m(){}function v(){}function y(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(k([])));x&&x!==i&&n.call(x,s)&&(b=x);var S=y.prototype=m.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function i(r,s,o,a){var u=l(t[r],t,s);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,o,a)}),(function(t){i("throw",t,o,a)})):e.resolve(d).then((function(t){c.value=t,o(c)}),(function(t){return i("throw",t,o,a)}))}a(u.arg)}var r;this._invoke=function(t,n){function s(){return new e((function(e,r){i(t,n,e,r)}))}return r=r?r.then(s,s):s()}}function A(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,A(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=l(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,p;var s=r.arg;return s?s.done?(i[t.resultName]=s.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,p):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function F(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(F,this),this.reset(!0)}function k(t){if(t){var i=t[s];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return o.next=o}}return{next:P}}function P(){return{value:e,done:!0}}return v.prototype=y,u(S,"constructor",y),u(y,"constructor",v),v.displayName=u(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,a,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,o,(function(){return this})),t.AsyncIterator=_,t.async=function(e,i,n,r,s){void 0===s&&(s=Promise);var o=new _(c(e,i,n,r),s);return t.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),u(S,a,"Generator"),u(S,s,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return a.type="throw",a.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),I(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;I(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:k(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){var n=i(10),r=i(11),s=i(12),o=i(13);t.exports=function(t){return n(t)||r(t)||s(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){var n=i(8);t.exports=function(t){if(Array.isArray(t))return n(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){var n=i(8);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){var n=i(5),r=i(3),s=i(4),o=i(0),a=i(1),u=i(2);function c(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d="[OCM][HB] ",h=i(21);t.exports=function(){"use strict";function t(e,i){o(this,t),u(this,"utils",void 0),u(this,"config",void 0),u(this,"hb_config",void 0),u(this,"mode",void 0),u(this,"ratio",void 0),u(this,"screen_width",void 0),u(this,"screen_height",void 0),u(this,"analytics_adapters",[]),this.utils=e,this.config=i,this.hb_config=i.services.header_bidding,this.mode=this.hb_config.functionality,"lazyload_v2"===this.mode&&this.utils.browser.isSafari&&(this.mode="lazyload_v1"),this.utils.window.OCM.hb_mode=this.mode,this.ratio=1,this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{que:[]},this.loadPrebidLib(),!window.OCM.adBlocked&&window.OCM.hasPurposeOneConsent&&this.prebidEventListeners()}var e,i;return a(t,[{key:"prepare",value:(i=s(r.mark((function t(e){var i=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=s(r.mark((function t(n,s){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=void 0!==e&&e,1!==i.hb_config.bidderTimeout){t.next=4;break}return(i.config.debug||i.hb_config.debug)&&console.log("[OCM][HB] Timeout was set to 1ms, terminating process."),t.abrupt("return");case 4:i.adjustBidderTimeout(e),i.buildAdUnits().then((function(){i.utils.window.OCM.adBlocked||i.setupAnalytics(),i.configure(),i.gptEventListeners(),n()}));case 6:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})},{key:"configure",value:function(){var t=this,e={buckets:[{precision:2,min:.01,max:10,increment:.01},{precision:2,max:20,increment:.1},{precision:2,max:50,increment:.5}]};this.utils.window.ocmpbjs.que.push((function(){t.utils.window.ocmpbjs.setConfig({ortb2:{device:{geo:{},ext:{data:{}}},site:{ext:{data:{}},content:{},cat:[]},user:{ext:{data:{}},geo:{}}},firstPartyData:{skipEnrichments:!1}}),(void 0===t.config.uses_cmp||t.config.uses_cmp)&&t.utils.window.ocmpbjs.setConfig({auctionOptions:{suppressStaleRender:!0},floors:{enforcement:{floorDeals:!1,bidAdjustment:!0},data:{currency:t.hb_config.adServerCurrency,schema:{fields:["mediaType"]},values:{banner:.05,video:.3}}},consentManagement:{gdpr:{cmpApi:"iab",timeout:t.hb_config.bidderTimeout+2e4,defaultGdprScope:!0,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0}]},usp:{cmpApi:"iab",timeout:100}}}),t.utils.window.ocmpbjs.setConfig({cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},priceGranularity:t.hb_config.custom_granularity?e:"high",realTimeData:t.setupRealTimeData(),gptPreAuction:{enabled:!0},schain:t.config.schain,currency:{adServerCurrency:t.hb_config.adServerCurrency,conversionRateFile:"https://cdn.orangeclickmedia.com/tech/libs/latest_currencies.txt",defaultRates:{EUR:{AED:3.805626,AFN:92.831698,ALL:116.968197,AMD:411.521758,ANG:1.875279,AOA:530.432591,ARS:171.618663,AUD:1.548396,AWG:1.86525,AZN:1.760058,BAM:1.958628,BBD:2.100921,BDT:105.975067,BGN:1.949238,BHD:.392557,BIF:2153.945747,BMD:1.03625,BND:1.431631,BOB:7.1898,BRL:5.606628,BSD:1.040496,BTC:6398923e-11,BTN:84.933132,BWP:13.425877,BYN:2.627378,BYR:20310.50198,BZD:2.097316,CAD:1.392803,CDF:2127.421281,CHF:.980987,CLF:.034634,CLP:955.661229,CNY:7.460479,COP:5042.755679,CRC:631.616057,CUC:1.03625,CUP:27.460628,CVE:110.423787,CZK:24.355714,DJF:185.236365,DKK:7.437395,DOP:56.821611,DZD:144.111447,EGP:25.552786,ERN:15.543752,ETB:55.595372,FJD:2.294724,FKP:.856839,GBP:.859611,GEL:2.823809,GGP:.856839,GHS:15.087249,GIP:.856839,GMD:63.726415,GNF:8965.919717,GTQ:8.126386,GYD:217.689881,HKD:8.101777,HNL:25.708472,HRK:7.515198,HTG:143.045936,HUF:409.458649,IDR:16286.79465,ILS:3.546146,IMP:.856839,INR:84.659529,IQD:1518.599743,IRR:43937.00419,ISK:146.505065,JEP:.856839,JMD:160.325997,JOD:.734721,JPY:143.558465,KES:127.230012,KGS:87.511043,KHR:4302.403708,KMF:490.770502,KPW:932.625091,KRW:1387.404319,KWD:.318658,KYD:.867022,KZT:484.292379,LAK:18061.672221,LBP:1573.462599,LKR:382.376978,LRD:159.582533,LSL:17.606078,LTL:3.059777,LVL:.626817,LYD:5.077101,MAD:11.107959,MDL:19.974923,MGA:4514.73851,MKD:61.701939,MMK:2185.07378,MNT:3546.516481,MOP:8.375401,MRO:369.941108,MUR:45.232128,MVR:15.937176,MWK:1067.976416,MXN:20.043492,MYR:4.64277,MZN:66.144126,NAD:17.605767,NGN:459.327978,NIO:37.452132,NOK:10.298362,NPR:135.890785,NZD:1.667622,OMR:.400927,PAB:1.040486,PEN:4.010451,PGK:3.666301,PHP:58.795823,PKR:233.542728,PLN:4.694603,PYG:7499.784498,QAR:3.773002,RON:4.91991,RSD:117.47566,RUB:62.864155,RWF:1125.086989,SAR:3.894124,SBD:8.528952,SCR:13.913739,SDG:590.141752,SEK:10.860896,SGD:1.427336,SHP:1.427326,SLE:18.916642,SLL:18885.658052,SOS:589.108583,SRD:32.194733,STD:21448.284911,SVC:9.103828,SYP:2603.618548,SZL:17.835948,THB:37.025736,TJS:10.457137,TMT:3.626875,TND:3.360039,TOP:2.446742,TRY:19.298749,TTD:7.064754,TWD:32.125615,TZS:2416.535318,UAH:38.427988,UGX:3891.43946,USD:1.03625,UYU:40.886794,UZS:11701.367505,VEF:1076523.955306,VES:10.592555,VND:25699.002506,VUV:122.112454,WST:2.766275,XAF:656.895259,XAG:.048803,XAU:592e-6,XCD:2.800518,XDR:.794935,XOF:656.901608,XPF:119.816416,YER:259.261712,ZAR:17.745989,ZMK:9327.496513,ZMW:17.610624,ZWL:333.67211}}},userSync:{syncsPerBidder:5,auctionDelay:1e3,filterSettings:{iframe:{bidders:["engageya"],filter:"exclude"}},userIds:[{name:"lotamePanoramaId"},{name:"identityLink",params:{pid:"1258"},storage:{type:"html5",name:"idl_env",expires:30,refreshInSeconds:1800}},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=pubmatic&fmt=json",type:"html5",name:"_unifiedid",expires:30}},{name:"criteo"},{name:"id5Id",params:{partner:347},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}},{name:"sharedId",storage:{type:"html5",name:"_pubcid",expires:365}}]},maxRequestsPerOrigin:4,bidderTimeout:Number(t.hb_config.bidderTimeout),timeoutBuffer:400,useBidCache:!0,suppressEmptyKeys:!0,enableSendAllBids:!1,targetingControls:{alwaysIncludeDeals:!0},pageUrl:t.utils.window.location.protocol+"//"+t.utils.window.location.hostname+t.utils.window.location.pathname,ix:{timeout:t.hb_config.bidderTimeout},yahoossp:{mode:"all",singleRequestMode:!0},rubicon:{singleRequest:!0}}),[{bidder:"pubmatic",domain:"pubmatic.com",id:"157884"},{bidder:"appnexus",domain:"xandr.com",id:"10452"},{bidder:"adform",domain:"adform.com",id:"2656"},{bidder:"openx",domain:"openx.com",id:"540861995"},{bidder:"rubicon",domain:"rubiconproject.com",id:"20086"},{bidder:"onetag",domain:"onetag.com",id:"5e5558fade26a9e"},{bidder:"criteo",domain:"criteo.com",id:"B-060738"},{bidder:"teads",domain:"teads.tv",id:"16578"},{bidder:"adyoulike",domain:"adyoulike.com",id:"7ddaba905b34014f9bd3fe2c57d6d46e"},{bidder:"gumgum",domain:"gumgum.com",id:"14064"},{bidder:"medianet",domain:"media.net",id:"8CU32RQ72"},{bidder:"triplelift",domain:"triplelift.com",id:"9262"},{bidder:"unruly",domain:"unrulygroup.com",id:"6111915185540403805"},{bidder:"yahoossp",domain:"yahoo.com",id:"59049"},{bidder:"smartadserver",domain:"smartadserver.com",id:"3172"},{bidder:"sharethrough",domain:"sharethrough.com",id:window.location.hostname.indexOf("marinetraffic")>-1?"9e44aa3f":"X2W2HNCU"}].forEach((function(e){t.utils.window.ocmpbjs.setBidderConfig({bidders:[e.bidder],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[t.config.schain.config.nodes[0],{asi:"".concat(e.domain),sid:"".concat(e.id),hp:1}]}}}})})),t.utils.window.ocmpbjs.bidderSettings=t.setupBidderSettings(t.hb_config.custom_granularity),t.analytics_adapters.length&&t.utils.window.ocmpbjs.enableAnalytics(t.analytics_adapters),t.utils.window.ocmpbjs=t.utils.window.ocmpbjs||{que:[]},t.utils.window.ocmpbjs.que.push((function(){t.utils.window.ocmpbjs.onEvent("bidWon",(function(e){if("banner"===e.mediaType){var i=t.utils.window.googletag.pubads().getSlots().find((function(t){return t.getAdUnitPath()===e.adUnitCode&&t.getTargeting("hb_adid")[0]===e.adId}));if(!i)return;var n=t.utils.window.document.querySelector('div[id^="google_ads_iframe_'.concat(i.getSlotId().getId().replace(/(\.|\/)/g,"\\$1"),'"]'));n&&(n.style.height="".concat(e.height,"px !important"),n.style.width="".concat(e.width,"px !important"));var r=t.utils.window.document.getElementById(i.getSlotElementId());if(r&&r.classList.contains("ocm-sticky-ad")){var s=r.parentNode,o=s.parentNode,a=o.parentNode;if(a.classList.contains("left")||a.classList.contains("right")){var u=document.createElement("div");u.classList.add("ocm-close-icon-container");var c=document.createElement("span");c.classList.add("ocm-button-close"),t.utils.is_mobile||(u.addEventListener("mouseenter",(function(){c.classList.add("ocm-button-close-hover")})),u.addEventListener("mouseleave",(function(){c.classList.remove("ocm-button-close-hover")}))),a.style.width="".concat(e.width,"px !important"),a.style.height="".concat(e.height,"px !important"),a.style.marginTop="-".concat(e.height/2,"px"),a.classList.contains("right")&&(o.style.marginLeft="-".concat(e.width,"px")),s.style.width="".concat(e.width,"px !important"),s.style.height="".concat(e.height,"px !important"),o&&o.childNodes&&Array.from(o.childNodes).find((function(t){return"ocm-close-icon-container"===t.className}))||(u.append(c),o.append(u)),c.addEventListener("click",(function(t){a.classList.contains("left")?a.style.marginLeft="-"+String(e.width)+"px":a.classList.contains("right")&&(a.style.marginRight="-"+String(e.height)+"px"),setTimeout((function(){a.remove()}),500),t.stopPropagation()}))}}}}))})),t.mode.includes("lazyload")||(t.utils.window.ocmpbjs.addAdUnits(t.utils.window.OCM.ad_units),t.hb_config.debug&&console.log("[OCM][HB] Added this.utils.window.OCM.ad_units to prebid",t.utils.window.ocmpbjs.adUnits),"no_adserver"===t.mode?t.utils.window.ocmpbjs.requestBids({bidsBackHandler:function(e,i,n){t.directRenderBids(e)}}):t.utils.window.ocmpbjs.requestBids({bidsBackHandler:function(e,i,n){t.initAdServer([],!1)}}))}))}},{key:"initAdServer",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i){(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Calling initAdServer with slots:",t);var n,r=[],s=c(t);try{for(s.s();!(n=s.n()).done;){var o=n.value,a=this.utils.window.document.querySelector('[id="'+o.getSlotElementId()+'"]');a&&(a.removeAttribute("data-lazyincluded-by-ocm"),a.setAttribute("data-lazyloaded-by-ocm",""),r.push(o.getAdUnitPath()))}}catch(t){s.e(t)}finally{s.f()}void 0!==t&&t.length&&this.utils.window.googletag.cmd.push((function(){e.utils.window.ocmpbjs.que.push((function(){try{e.utils.window.ocmpbjs.setTargetingForGPTAsync(r),e.utils.window.OCM.pb_done=!0,e.config.services.uam.active?e.utils.window.OCM.uam_done?e.utils.window.googletag.pubads().refresh(t):setTimeout((function(){e.utils.window.googletag.pubads().refresh(t)}),400):e.utils.window.googletag.pubads().refresh(t)}catch(t){console.error(d,t)}}))}))}else(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Calling initAdServer for all slots"),this.utils.window.googletag.cmd.push((function(){e.utils.window.ocmpbjs.que.push((function(){e.utils.window.ocmpbjs.setTargetingForGPTAsync(),e.utils.window.OCM.pb_done=!0,e.config.services.uam.active?e.utils.window.OCM.uam_done?(e.utils.window.googletag.pubads().refresh(),e.utils.window.OCM.init_ad_server_set=!0):setTimeout((function(){e.utils.window.googletag.pubads().refresh(),e.utils.window.OCM.init_ad_server_set=!0}),400):(e.utils.window.googletag.pubads().refresh(),e.utils.window.OCM.init_ad_server_set=!0)}))}))}},{key:"buildAdUnits",value:(e=s(r.mark((function t(){var e=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){(e.config.debug||e.hb_config.debug)&&console.log("[OCM][HB] Building OCM.ad_units..."),e.utils.window.OCM.ad_units=e.hb_config.adUnits.map((function(t){var i,n,r;if(i=e.filterAdUnitByPageType(t),e.filterAdUnitByDevice(t)&&i)return t=e.jsonifyAd(t),t=e.removeNullBidParams(t),(t=e.hbSizeMap(t))?(t=e.removeBadBidSizes(t),e.config.services.geolocation.active&&null!==(n=e.utils.window.OCM)&&void 0!==n&&null!==(r=n.geo)&&void 0!==r&&r.country&&(t=e.geoFilter(t)),t=e.buildMediaTypes(t)):null})).filter((function(t){return null!=t})),t()})));case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"filterAdUnitByPageType",value:function(t){return!!this.utils.allowPageType(t.page_types)||((this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Removing "+t.code+" due to page type"),!1)}},{key:"filterAdUnitByDevice",value:function(t){if(this.utils.is_mobile){if(t.visibility.hasOwnProperty("mobile")&&!t.visibility.mobile)return(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Removing"+t.code+" due to hidden in mobile"),!1}else if(t.visibility.hasOwnProperty("desktop")&&!t.visibility.desktop)return(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Removing"+t.code+" due to hidden in desktop"),!1;return!0}},{key:"jsonifyAd",value:function(t){var e=this;void 0!==t.sizes&&(t.sizes.ocmStartsWith("[[")||(t.sizes="["+t.sizes+"]"),this.utils.hasJsonStructure(t.sizes)&&(t.sizes=JSON.parse(t.sizes))),t.hasOwnProperty("size_mapping")&&(t.size_mapping=t.size_mapping.map((function(t){return e.utils.hasJsonStructure(t.ad_sizes)&&(t.ad_sizes=JSON.parse(t.ad_sizes)),e.utils.hasJsonStructure(t.window_size)&&(t.window_size=JSON.parse(t.window_size)),t})));var i=!1;return t.bids=t.bids.map((function(t){for(var n=0;n<Object.keys(t.params).length;n++){var r=Object.keys(t.params)[n],s=t.params[r];"size"===r&&null!==s&&s.indexOf("[[")<0&&"ix"!==t.bidder&&(s="["+s+"]"),"engageya"===t.bidder&&(t.params.pageUrl=String(e.utils.window.location.href)),"criteo"===t.bidder&&(i=!0),e.utils.hasJsonStructure(s)&&(t.params[r]=JSON.parse(s))}return t})).filter((function(t){return void 0!==t})),i&&(t.media_types.indexOf("video")>-1||t.media_types.indexOf("videoInArticle")>-1)&&t.bids.push({bidder:"criteo",params:{zoneId:1697471}}),t}},{key:"removeNullBidParams",value:function(t){var e,i=c(t.bids);try{for(i.s();!(e=i.n()).done;){var n=e.value;for(var r in n.params)null===n.params[r]&&delete n.params[r]}}catch(t){i.e(t)}finally{i.f()}return t}},{key:"hbSizeMap",value:function(t){if(void 0!==t.size_mapping&&t.size_mapping.length){for(var e=t.size_mapping,i=e.length-1;i>=0;i--){if(this.utils.screen_width>=e[i].window_size[0]){t.sizes=e[i].ad_sizes;break}if(i-1>=0){if(this.utils.screen_width<e[i].window_size[0]&&this.utils.screen_width>=e[i-1].window_size[0])return t.sizes=e[i-1].ad_sizes,t}else if(this.utils.screen_width>=e[i].window_size[0])return t.sizes=e[i].ad_sizes,t}0===t.sizes.length&&((this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Removing "+t.code+" due to empty size mapping for this window size"),t=null)}else if(t){var n;n=this.utils.hasJsonStructure(t.sizes)?JSON.parse(t.sizes):t.sizes;for(var r=!1,s=0;s<n.length;s++)n[s][0]>728&&(r=!0);for(var o=0;o<n.length;o++)n[o][0]>this.utils.screen_width&&((this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Removing "+n[o][0]+" from"+t.code+" due to screen width"),n.splice(o,1),o--);for(var a=0;a<n.length;a++)this.utils.screen_width>=768&&n[a][0]<728&&r&&(n.splice(a,1),a--);t.sizes=JSON.parse(JSON.stringify(n))}return t}},{key:"removeBadBidSizes",value:function(t){var e=this,i=[];return t.bids=t.bids.filter((function(n){if(i=[],void 0!==n.params.size){if(!Array.isArray(n.params.size[0])&&t.sizes.containsArray(n.params.size)?i.push(n.params.size):Array.isArray(n.params.size[0])&&(i=n.params.size.filter((function(e){return t.sizes.containsArray(e)}))),!i.length)return(e.config.debug||e.hb_config.debug)&&console.log("[OCM][HB] Removing ",n," due to ad unit sizes"),!1;"ix"===n.bidder?n.params.size=JSON.parse(JSON.stringify(i[0])):n.params.size=JSON.parse(JSON.stringify(i))}return!0})),t}},{key:"geoFilter",value:function(t){var e,i=[],n=c(this.hb_config.bidders);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.geo.length>0&&r.geo.includes(this.utils.window.OCM.geo.country)&&((this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Geo-filtering "+r.name+" (country "+this.utils.window.OCM.geo.country+")"),i.push(r.name))}}catch(t){n.e(t)}finally{n.f()}return t.bids=t.bids.filter((function(t){return!i.includes(t.bidder)})),t}},{key:"buildMediaTypes",value:function(t){var e=this,i={};return void 0!==t.media_types?(t.media_types.includes("banner")&&(i.banner={sizes:"string"==typeof t.sizes?JSON.parse(t.sizes):t.sizes}),t.media_types.indexOf("native")>-1&&(i.native=t.native,this.utils.hasJsonStructure(i.native.image.sizes)&&(i.native.image.sizes=JSON.parse(i.native.image.sizes))),(t.media_types.indexOf("videoInArticle")>-1||t.media_types.indexOf("video")>-1)&&(i.video={},i.video.context="outstream",this.utils.hasJsonStructure(t.video.playerSize)?i.video.playerSize=this.utils.is_mobile?[[300,169]]:JSON.parse(t.video.playerSize):i.video.playerSize=this.utils.is_mobile?[[300,169]]:t.video.playerSize,i.video.mimes=["video/mp4","application/javascript"],i.video.pos=1,i.video.delivery=[2],i.video.minduration=5,i.video.maxduration=30,i.video.protocols=[2,3,5,6,7,8],i.video.api=[1,2],i.video.skip=0,i.video.startdelay=0,i.video.linearity=1,i.video.placement=640!==i.video.playerSize[0][0]||this.utils.is_mobile?2:3,i.video.playbackmethod=[1,2,4,5,6],i.video.renderer={url:"https://cdn.orangeclickmedia.com/tech/libs/ima-ad-player.min.js",backupOnly:!1,render:function(n){try{var r=e.getAdDivElement(t.code);if(!r)return void console.error("Could not find element to render outstream ad",n);new h(e.utils,r,{width:i.video.playerSize[0][0],height:i.video.playerSize[0][1]},n).run()}catch(t){console.error(t),console.error("Error in ad rendering!")}}})):i.banner={sizes:"string"==typeof t.sizes?JSON.parse(t.sizes):t.sizes},t.mediaTypes=i,t}},{key:"adjustBidderTimeout",value:function(t){(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] bidderTimeout = "+this.hb_config.bidderTimeout),this.utils.is_mobile&&(this.hb_config.bidderTimeout+=t?.5*this.hb_config.bidderTimeout:this.hb_config.bidderTimeout,(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Mobile device, so bidderTimeout = ",this.hb_config.bidderTimeout))}},{key:"loadPrebidLib",value:function(){(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Loading OCM prebid library...");var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://cdn.orangeclickmedia.com/tech/libs/ocmpb.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}},{key:"prebidEventListeners",value:function(){var t=this;(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Setting up Prebid events for HB"),this.config.log&&(this.utils.window.ocmpbjs.que.push((function(){t.utils.window.ocmpbjs.onEvent("adRenderFailed",(function(e){e.bid.vastXml&&delete e.bid.vastXml,t.utils.log.error({service:"header_bidding",msg:"adRenderFailed",error:e})}))})),this.utils.window.ocmpbjs.que.push((function(){t.utils.window.ocmpbjs.onEvent("auctionDebug",(function(e){t.utils.calculateLoggingSamples();try{if("ERROR"!==e.type&&"WARNING"!==e.type)return;var i="";if(e.arguments.length)for(var n=0;n<e.arguments.length;n++)if(e.arguments[n])if("string"==typeof e.arguments[n]&&e.arguments[n].indexOf("Invalid bid sent to bidder")>-1){var r=e.arguments[n].split(": "),s=JSON.parse(r[1]);i+="Invalid bid sent to bidder "+JSON.stringify({bidder:s.bidder,params:s.params,adUnitCode:s.adUnitCode})}else i+=JSON.stringify(e.arguments[n]);if(""===i)return;for(var o=0;o<t.utils.log_blacklist.length;o++)if(i.indexOf(t.utils.log_blacklist[o])>-1)return;"ERROR"===e.type?t.utils.willSampleErrors&&t.utils.log.error({service:"header_bidding",msg:"auctionDebug ERROR",error:i}):t.utils.willSampleWarnings&&t.utils.log.warning({service:"header_bidding",msg:"auctionDebug WARNING",error:i})}catch(t){console.error("inside auctionDebug listener",t)}}))})))}},{key:"gptEventListeners",value:function(){var t=this;(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Setting up GPT events for HB");this.utils.window.googletag.cmd.push((function(){t.utils.window.googletag.pubads().addEventListener("slotRenderEnded",(function(e){e.slot.getAdUnitPath().indexOf("inread_pb")>-1&&e.isEmpty&&void 0!==t.utils.window.oopb&&t.utils.window.oopb(),i=[];var i=e.slot.getTargetingKeys().map((function(t){if(t.indexOf("hb_")>-1&&t.indexOf("amzn")>-1)return t})).filter((function(t){return void 0!==t}));i.forEach((function(t){e.slot.clearTargeting(t)}))}))}))}},{key:"setupRealTimeData",value:function(){var t;return null!==(t=this.hb_config)&&void 0!==t&&t.adsqRTDModuleEnabled?{auctionDelay:3e3,dataProviders:[{name:"adsquirrel",waitForIt:!0,params:{}}]}:{}}},{key:"setupAnalytics",value:function(){void 0!==this.hb_config.analytics&&(this.hb_config.analytics.indexOf("ocmpba")>=0&&this.analytics_adapters.push({provider:"ocmpba"}),this.hb_config.analytics.indexOf("ga")>=0&&this.analytics_adapters.push({provider:"ga",options:{enableDistribution:!1}}),this.hb_config.analytics.indexOf("roxot")>=0&&this.analytics_adapters.push({provider:"roxot",options:{publisherIds:["6e522d36-dae0-45bd-9d3c-de88ef4334ee"]}}))}},{key:"setupBidderSettings",value:function(t){var e=this;(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Setting up adserverTargeting & bidder settings");var i,n={standard:{suppressEmptyKeys:!0,adserverTargeting:[{key:"infi_article_count",val:function(t){var i;return null===(i=e.utils.window.OCM)||void 0===i?void 0:i.infi_article_count.toString()}},{key:"hb_bidder",val:function(t){return t.bidderCode}},{key:"hb_adid",val:function(t){return t.adId}},{key:"hb_pb",val:function(e){return t?e.pbCg:e.pbHg}},{key:"hb_size",val:function(t){return t.getSize()}},{key:"hb_format",val:function(t){return t.mediaType}},{key:"hb_cpm",val:function(t){return t.cpm}},{key:"hb_deal",val:function(t){return t.dealId}},{key:"hb_source",val:function(t){return t.source}},{key:"hb_sf",val:function(t){return"false"}},{key:"hb_cache_id",val:function(t){return t.videoCacheKey}},{key:"hb_uuid",val:function(t){return t.videoCacheKey}}]}},r=1;if(void 0!==this.hb_config.bidders)for(i=0;i<this.hb_config.bidders.length;i++)r=parseFloat(this.hb_config.bidders[i].bid_cpm_adjust),this.hb_config.bidders[i].name,n[this.hb_config.bidders[i].name]={storageAllowed:!0,bidCpmAdjustment:function(t,e,i){switch(i){case"smartadserver":!0===e.netRevenue?r=1:""!==e.dealId&&(r=.9);break;case"improvedigital":!0===e.isNet?r=1:""!==e.dealId&&(r=.9);break;default:r=1}return t*r}};return n}},{key:"getAdDivElement",value:function(t){var e=null;if(this.utils.config.services.lazyload.active)e=this.utils.window.document.querySelector('[data-oau-code="'+t+'"]');else{var i=this.utils.window.googletag.pubads().getSlots().filter((function(e){return e.getAdUnitPath()===t}));i.length&&"object"===n(i[0])&&(e=this.utils.window.document.getElementById(i[0].getSlotElementId()))}return e}},{key:"directRenderBids",value:function(t){if(void 0!==t&&t.length)for(var e in t){(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Found bid for #"+e);var i=this.getAdDivElement(e);if(i){(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Ad div = ",i);var n=document.createElement("iframe");n.setAttribute("id",divId+"_ocm_hb"),n.style.border="0",n.style.overflow="hidden",n.style.margin="0",n.TOPMARGIN="0",n.LEFTMARGIN="0",n.ALLOWTRANSPARENCY="true",n.width="0",n.height="0",i.appendChild(n),(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Appended frmEl to adDiv",i);var r=n.contentWindow.document,s=ocmpbjs.getAdserverTargetingForAdUnitCode(divId);(this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] adServerTargeting",s),s&&s.hb_adid&&((this.config.debug||this.hb_config.debug)&&console.log("[OCM][HB] Rendering ad for "+divId),ocmpbjs.renderAd(r,s.hb_adid),i.querySelector("script").remove(),i.querySelector('div[id^="google_ads_iframe_"]').remove(),i.style.display="block")}else(this.config.debug||this.hb_config.debug)&&console.warn("[OCM][HB] Ad div #"+divId+" not found")}}}]),t}()},function(t,e,i){var n=i(5),r=i(3),s=i(4),o=i(0),a=i(1),u=i(2);t.exports=function(){"use strict";function t(e,i){o(this,t),u(this,"utils",void 0),u(this,"config",void 0),u(this,"uam_config",void 0),this.utils=e,this.config=i,this.uam_config=i.services.uam,this.config.schain.config.nodes.push({asi:"amazon.com",sid:"21e3d7ee-4312-4deb-8ada-99c25a814bef",hp:1})}var e,i;return a(t,[{key:"init",value:function(){(this.config.debug||this.uam_config.debug)&&console.log("[OCM][UAM] Initializing..."),function(t,e,i,n,r,s,o){function a(i,n){e[t]._Q.push([i,n])}e[t]||(e[t]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(s=i.createElement(n)).async=!0,s.src="//c.amazon-adsystem.com/aax2/apstag.js",(o=i.getElementsByTagName(n)[0]).parentNode.insertBefore(s,o))}("apstag",this.utils.window,document,"script"),apstag.init({pubID:this.uam_config.pubID,adServer:this.uam_config.adServer,bidTimeout:this.uam_config.bidTimeout,schain:this.config.schain.config})}},{key:"fetch",value:(i=s(r.mark((function t(e){var i=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e.length?e:this.config.services.header_bidding.adUnits,t.next=3,this.formatUamSlots(e).then((function(t){e=t.filter((function(t){return null!==t}))}));case 3:(this.config.debug||this.uam_config.debug)&&console.log("[OCM][UAM] Fetching slots from config according to supplied slots",e),e.length&&((this.config.debug||this.uam_config.debug)&&console.log("[OCM][UAM] fetching bids for ",e),apstag.fetchBids({slots:e,timeout:this.uam_config.timeout},(function(t){i.utils.window.googletag.cmd.push((function(){apstag.setDisplayBids(),i.utils.window.OCM.uam_done=!0}))})));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"formatUamSlots",value:(e=s(r.mark((function t(e){var i=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var s;i.utils.window.googletag=i.utils.window.googletag||{cmd:[]},i.utils.gptPubAdsReady().then((function(){var o=i.utils.window.googletag.pubads().getSlots();!function(e){e.length?t(e):r()}(e.map((function(t){return s=null,i.utils.allowPageType(t.page_types)&&(s=o.find((function(e){return e.getAdUnitPath()===t.code})))?{slotID:s.getSlotElementId(),slotName:t.code,sizes:"object"===n(t.sizes)?t.sizes:JSON.parse(t.sizes)}:null})))}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}]),t}()},function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);t.exports=function(){return i(n),n}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},function(t,e){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,r=i;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")}},function(t,e,i){"use strict";(function(e){var n=i(6),r=i(56),s=i(26),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var u,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(u=i(27)),u),transformRequest:[function(t,e){return r(e,"Accept"),r(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)||e&&"application/json"===e["Content-Type"]?(a(e,"application/json"),function(t,e,i){if(n.isString(t))try{return(e||JSON.parse)(t),n.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(i||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional,i=e&&e.silentJSONParsing,r=e&&e.forcedJSONParsing,o=!i&&"json"===this.responseType;if(o||r&&n.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(o){if("SyntaxError"===t.name)throw s(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(t){c.headers[t]={}})),n.forEach(["post","put","patch"],(function(t){c.headers[t]=n.merge(o)})),t.exports=c}).call(this,i(55))},function(t,e,i){var n=i(9),r=i(3),s=i(4),o=i(0),a=i(1),u=i(2),c="[OCM][User Engagement] ";t.exports=function(){"use strict";function t(e,i,n,r){o(this,t),u(this,"utils",void 0),u(this,"config",void 0),u(this,"ue_config",void 0),u(this,"oid",void 0),u(this,"oeid",void 0),u(this,"sent",void 0),u(this,"ocm_pvc_items",void 0),u(this,"now",void 0),u(this,"engaged",void 0),u(this,"engaged_time",void 0),u(this,"disengaged_time",void 0),u(this,"engagement_timer",void 0),u(this,"totalCompletion",void 0),u(this,"totalEngagedTime",void 0),u(this,"hasPageviewCompleteFired",void 0),u(this,"isLinkClicked",void 0),u(this,"isFormSubmitted",void 0),this.utils=e,this.config=e.config,this.ue_config=this.config.services.user_engagement,this.oid=n,this.oeid=r,this.sent=!1,this.ocm_pvc_items=JSON.parse(this.utils.window.localStorage.getItem("ocm_pvc_items"))||[],this.engaged=!1,this.engaged_time=this.getCurrentTime(),this.disengaged_time=this.engaged_time+2e3,this.totalCompletion=0,this.totalEngagedTime=0,this.hasPageviewCompleteFired=!1,this.isLinkClicked=!1,this.isFormSubmitted=!1,this.now=this.getCurrentTime()}var e,i,l,d,h;return a(t,[{key:"run",value:(h=s(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendAndEmptyEvents();case 2:return t.next=4,this.createPvcEvent();case 4:this.initEngagementListener(),this.updateEventListener();case 6:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"sendAndEmptyEvents",value:(d=s(r.mark((function t(){var e=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=s(r.mark((function t(i,s){var o,a,u,l;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n(e.ocm_pvc_items),(e.config.debug||e.ue_config.debug)&&console.log(c+"in sendAndEmptyEvents",e.ocm_pvc_items),"visible"!==e.utils.window.document.visibilityState){t.next=28;break}a=0;case 4:if(!(a<o.length)){t.next=26;break}if(u=o[a],!(l=JSON.parse(e.utils.window.localStorage.getItem(u))||null)){t.next=22;break}if(0!==l.tet){t.next=15;break}if((e.config.debug||e.ue_config.debug)&&console.log(c+"event ".concat(u," had 0 engagement time, skipping deletion")),!(l.tl+18e5<=e.now)){t.next=14;break}return(e.config.debug||e.ue_config.debug)&&console.log(c+"event ".concat(u," has been here for too long, deleting")),t.next=14,e.deletePvcEvent(u);case 14:return t.abrupt("continue",23);case 15:return(e.config.debug||e.ue_config.debug)&&console.log(c+"Deleting "+u,l),t.next=18,e.deletePvcEvent(u);case 18:return t.next=20,e.sendEventToAPI(l).then((function(){(e.config.debug||e.ue_config.debug)&&console.log(c+"Successfully sent events to API")})).catch((function(){(e.config.debug||e.ue_config.debug)&&console.error(c+"Failed to sent events to API")}));case 20:t.next=23;break;case 22:(e.config.debug||e.ue_config.debug)&&console.log(c+"Could not find "+u+" in localStorage",l);case 23:a++,t.next=4;break;case 26:t.next=29;break;case 28:(e.config.debug||e.ue_config.debug)&&console.log(c+"Doing nothing, since this is not a visible tab");case 29:i();case 30:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(){return d.apply(this,arguments)})},{key:"initEngagementListener",value:function(){var t=this;(this.config.debug||this.ue_config.debug)&&console.log(c+"Setting up Engagement");["touchstart","mousemove","mousedown","scroll","keydown","resize","focus"].forEach((function(e){t.utils.window.addEventListener(e,t.utils.throttle((function(){t.engaged=!0,t.engaged_time=t.getCurrentTime(),(t.config.debug||t.ue_config.debug)&&console.log(c+"User engaged"),t.engagement_timer&&clearTimeout(t.engagement_timer),t.engagement_timer=setTimeout((function(){t.engaged=!1,t.disengaged_time=t.getCurrentTime(),t.totalEngagedTime+=t.disengaged_time-t.engaged_time,(t.config.debug||t.ue_config.debug)&&console.log(c+"Disengaged")}),2e3)}),1e3))}))}},{key:"updateEventListener",value:function(){var t=this;setInterval((function(){"visible"===t.utils.window.document.visibilityState&&(t.ocm_pvc_items.filter((function(e){return e==="ocm_pvc_".concat(t.oeid)})).length||(t.ocm_pvc_items.push("ocm_pvc_".concat(t.oeid)),t.utils.window.localStorage.setItem("ocm_pvc_items",t.ocm_pvc_items)),t.utils.window.localStorage.setItem("ocm_pvc_".concat(t.oeid),JSON.stringify(t.updatePvcEvent("updateEventListener"))))}),this.ue_config.interval)}},{key:"createPvcEvent",value:(l=s(r.mark((function t(){var e=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){var n=e.updatePvcEvent("createPvcEvent");(e.config.debug||e.ue_config.debug)&&console.log(c+"Created new PVC event",n),e.ocm_pvc_items.push("ocm_pvc_".concat(e.oeid)),e.utils.window.localStorage.setItem("ocm_pvc_items",JSON.stringify(e.ocm_pvc_items)),e.utils.window.localStorage.setItem("ocm_pvc_".concat(e.oeid),JSON.stringify(n)),t()})));case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{key:"updatePvcEvent",value:function(t){(this.config.debug||this.ue_config.debug)&&console.log(c+"in updatePvcEvent from "+t);var e=Math.max(this.totalCompletion,this.getCurrentCompletion()),i=this.getCurrentCompletion();this.totalEngagedTime+=this.engaged&&"updateEventListener"===t?this.getCurrentTime()-this.engaged_time:0,this.totalCompletion=e;var n="";if((this.config.debug||this.ue_config.debug)&&console.log(c+"Build: ".concat(this.config.build)),this.config.build){var r=this.config.build.split(".");r.length>1&&(n=r[1])}return(this.config.debug||this.ue_config.debug)&&console.log(c+"Event `ocm_pvc_"+this.oeid+"` was updated: ",{u:this.utils.window.location.href,o:this.oeid,oi:this.oid,d:this.utils.window.location.hostname.replace("www.",""),tet:Math.ceil(parseInt(this.totalEngagedTime)/1e3),s:i,ts:this.totalCompletion,tm:this.now,tl:this.getCurrentTime(),v:n}),{u:this.utils.window.location.href,o:this.oeid,oi:this.oid,d:this.utils.window.location.hostname.replace("www.",""),tet:Math.ceil(parseInt(this.totalEngagedTime)/1e3),s:i,ts:this.totalCompletion,tm:this.now,tl:this.getCurrentTime(),v:n}}},{key:"deletePvcEvent",value:(i=s(r.mark((function t(e){var i=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){(i.config.debug||i.ue_config.debug)&&console.log(c+"in deletePvcEvent, key = "+e),i.ocm_pvc_items=JSON.parse(i.utils.window.localStorage.getItem("ocm_pvc_items")).filter((function(t){return t!==e})),i.utils.window.localStorage.setItem("ocm_pvc_items",JSON.stringify(i.ocm_pvc_items)),i.utils.window.localStorage.removeItem(e),t()})));case 1:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})},{key:"sendEventToAPI",value:(e=s(r.mark((function t(e){var i,n,s,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((this.config.debug||this.ue_config.debug)&&(console.log(c+"in sendEventToAPI, event = ",e),console.log(c+"in sendEventToAPI, tab = ",this.utils.window.location.href)),e){t.next=3;break}return t.abrupt("return");case 3:return i="",(this.config.debug||this.ue_config.debug)&&console.log(c+"Build: ".concat(this.config.build)),this.config.build&&(n=this.config.build.split(".")).length>1&&(i=n[1]),(this.config.debug||this.ue_config.debug)&&console.log(c+"Version: ".concat(i)),s={u:e.u,t:e.t,oi:e.oi,tet:parseInt(e.tet),s:e.s||0,ts:e.ts||0,o:e.o,h:e.d,tm:e.tm,v:i},o=new URLSearchParams(this.utils.window.location.search),Object.fromEntries(o.entries()),t.next=13,fetch("https://ue.adsquirrel.ai/pvc",{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify({events:[s]}),keepAlive:!0});case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"getCurrentCompletion",value:function(){var t=this.utils.window.document.documentElement.scrollHeight,e=this.utils.window.pageYOffset+this.utils.window.innerHeight;return e<=0?0:e>=t?1:e/t}},{key:"getCurrentTime",value:function(){var t=new Date;return t.toLocaleString("el-GR",{timeZone:"Europe/Athens"}),t.getTime()}}]),t}()},function(t,e){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=function(t){for(var e=window.document,i=r(e);i;)i=r(e=i.ownerDocument);return e}(),e=[],i=null,n=null;o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o._setupCrossOriginUpdater=function(){return i||(i=function(t,i){n=t&&i?d(t,i):{top:0,bottom:0,left:0,right:0,width:0,height:0},e.forEach((function(t){t._checkForIntersections()}))}),i},o._resetCrossOriginUpdater=function(){i=null,n=null},o.prototype.observe=function(t){if(!this._observationTargets.some((function(e){return e.element==t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},o.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._unmonitorIntersections(t.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},o.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,i){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==i[e-1]}))},o.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},o.prototype._monitorIntersections=function(e){var i=e.defaultView;if(i&&-1==this._monitoringDocuments.indexOf(e)){var n=this._checkForIntersections,s=null,o=null;this.POLL_INTERVAL?s=i.setInterval(n,this.POLL_INTERVAL):(a(i,"resize",n,!0),a(e,"scroll",n,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in i&&(o=new i.MutationObserver(n)).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(e),this._monitoringUnsubscribes.push((function(){var t=e.defaultView;t&&(s&&t.clearInterval(s),u(t,"resize",n,!0)),u(e,"scroll",n,!0),o&&o.disconnect()}));var c=this.root&&(this.root.ownerDocument||this.root)||t;if(e!=c){var l=r(e);l&&this._monitorIntersections(l.ownerDocument)}}},o.prototype._unmonitorIntersections=function(e){var i=this._monitoringDocuments.indexOf(e);if(-1!=i){var n=this.root&&(this.root.ownerDocument||this.root)||t,s=this._observationTargets.some((function(t){var i=t.element.ownerDocument;if(i==e)return!0;for(;i&&i!=n;){var s=r(i);if((i=s&&s.ownerDocument)==e)return!0}return!1}));if(!s){var o=this._monitoringUnsubscribes[i];if(this._monitoringDocuments.splice(i,1),this._monitoringUnsubscribes.splice(i,1),o(),e!=n){var a=r(e);a&&this._unmonitorIntersections(a.ownerDocument)}}}},o.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var e=0;e<t.length;e++)t[e]()},o.prototype._checkForIntersections=function(){if(this.root||!i||n){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(n){var r=n.element,o=c(r),a=this._rootContainsTarget(r),u=n.entry,l=t&&a&&this._computeTargetAndRootIntersection(r,o,e),d=null;this._rootContainsTarget(r)?i&&!this.root||(d=e):d={top:0,bottom:0,left:0,right:0,width:0,height:0};var h=n.entry=new s({time:window.performance&&performance.now&&performance.now(),target:r,boundingClientRect:o,rootBounds:d,intersectionRect:l});u?t&&a?this._hasCrossedThreshold(u,h)&&this._queuedEntries.push(h):u&&u.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},o.prototype._computeTargetAndRootIntersection=function(e,r,s){if("none"!=window.getComputedStyle(e).display){for(var o,a,u,l,h,g,p,m,v=r,y=f(e),b=!1;!b&&y;){var w=null,x=1==y.nodeType?window.getComputedStyle(y):{};if("none"==x.display)return null;if(y==this.root||9==y.nodeType)if(b=!0,y==this.root||y==t)i&&!this.root?!n||0==n.width&&0==n.height?(y=null,w=null,v=null):w=n:w=s;else{var S=f(y),E=S&&c(S),_=S&&this._computeTargetAndRootIntersection(S,E,s);E&&_?(y=S,w=d(E,_)):(y=null,v=null)}else{var A=y.ownerDocument;y!=A.body&&y!=A.documentElement&&"visible"!=x.overflow&&(w=c(y))}if(w&&(o=w,a=v,u=void 0,l=void 0,h=void 0,g=void 0,p=void 0,m=void 0,u=Math.max(o.top,a.top),l=Math.min(o.bottom,a.bottom),h=Math.max(o.left,a.left),g=Math.min(o.right,a.right),m=l-u,v=(p=g-h)>=0&&m>=0&&{top:u,bottom:l,left:h,right:g,width:p,height:m}||null),!v)break;y=y&&f(y)}return v}},o.prototype._getRootRect=function(){var e;if(this.root&&!g(this.root))e=c(this.root);else{var i=g(this.root)?this.root:t,n=i.documentElement,r=i.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},o.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,i){return"px"==e.unit?e.value:e.value*(i%2?t.width:t.height)/100})),i={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},o.prototype._hasCrossedThreshold=function(t,e){var i=t&&t.isIntersecting?t.intersectionRatio||0:-1,n=e.isIntersecting?e.intersectionRatio||0:-1;if(i!==n)for(var r=0;r<this.thresholds.length;r++){var s=this.thresholds[r];if(s==i||s==n||s<i!=s<n)return!0}},o.prototype._rootIsInDom=function(){return!this.root||h(t,this.root)},o.prototype._rootContainsTarget=function(e){var i=this.root&&(this.root.ownerDocument||this.root)||t;return h(i,e)&&(!this.root||i==e.ownerDocument)},o.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},o.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=o,window.IntersectionObserverEntry=s}function r(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch(t){return null}}function s(t){this.time=t.time,this.target=t.target,this.rootBounds=l(t.rootBounds),this.boundingClientRect=l(t.boundingClientRect),this.intersectionRect=l(t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,i=e.width*e.height,n=this.intersectionRect,r=n.width*n.height;this.intersectionRatio=i?Number((r/i).toFixed(4)):this.isIntersecting?1:0}function o(t,e){var i,n,r,s=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(s.root&&1!=s.root.nodeType&&9!=s.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(i=this._checkForIntersections.bind(this),n=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout((function(){i(),r=null}),n))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function a(t,e,i,n){"function"==typeof t.addEventListener?t.addEventListener(e,i,n||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,i)}function u(t,e,i,n){"function"==typeof t.removeEventListener?t.removeEventListener(e,i,n||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,i)}function c(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function d(t,e){var i=e.top-t.top,n=e.left-t.left;return{top:i,left:n,height:e.height,width:e.width,bottom:i+e.height,right:n+e.width}}function h(t,e){for(var i=e;i;){if(i==t)return!0;i=f(i)}return!1}function f(e){var i=e.parentNode;return 9==e.nodeType&&e!=t?r(e):(i&&i.assignedSlot&&(i=i.assignedSlot.parentNode),i&&11==i.nodeType&&i.host?i.host:i)}function g(t){return t&&9===t.nodeType}}()},function(t,e,i){var n=i(0),r=i(1),s=i(2),a="[OCM][IMA-PLAYER] ";t.exports=function(){"use strict";function t(e,i,r,o){n(this,t),s(this,"adDiv",void 0),s(this,"size",void 0),s(this,"bid",void 0),s(this,"utils",void 0),s(this,"config",void 0),s(this,"hb_config",void 0),s(this,"vastUrl",void 0),s(this,"vastXml",void 0),s(this,"videoElement",void 0),s(this,"adContainer",void 0),s(this,"controlsContainer",void 0),s(this,"playButton",void 0),s(this,"playState",void 0),s(this,"volumeButton",void 0),s(this,"volumeState",void 0),s(this,"viewportObserver",void 0),s(this,"player",void 0),s(this,"visible",void 0),s(this,"playerState",void 0),this.utils=e,this.config=this.utils.config,this.hb_config=this.utils.config.services.header_bidding,this.adDiv=i,this.size=r,this.bid=o,this.vastUrl=this.bid.vastUrl||null,this.vastXml=this.bid.vastXml||null,this.playerState=!1,this.visible=!1,this.volumeState=!1,this.playState=!1}return r(t,[{key:"run",value:function(){this.styles(),this.html(),this.observer(),this.AdPlayer()}},{key:"AdPlayer",value:function(){var t,e,i=this,n="url";this.vastUrl&&!this.vastXml?n="url":this.vastXml&&(n="xml");var r={vastLoadTimeout:1e4};"xml"===n&&(r={vastLoadTimeout:1e4,adsResponse:this.vastXml}),(this.utils.config.debug||this.utils.config.services.header_bidding.debug)&&(console.log(a+"vastUrl",this.vastUrl),console.log(a+"adsRequestOptions",r)),ImaAdPlayer({video:this.videoElement,displayContainer:this.adContainer,vpaidMode:ImaAdPlayer.vpaidMode.ENABLED,locale:null!==(t=window)&&void 0!==t&&null!==(e=t.navigator)&&void 0!==e&&e.language?window.navigator.language:"en",tag:"url"===n?this.vastUrl:"",maxDuration:3e4,restoreVideo:!0,adsRequestOptions:r,adsRenderingOptions:{loadVideoTimeout:1e4,useStyledLinearAds:!1,useStyledNonLinearAds:!1},adWillPlayMuted:!0,timeout:5e3,debug:this.utils.config.debug||this.hb_config.debug},(function(t,e){i.player=t;try{window.google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0)}catch(s){console.log(a,s)}if(e){var n,r,s=null===(n=o.data)||void 0===n||null===(r=n.j)||void 0===r?void 0:r.j;i.handleAdError(s)}else{if(i.player.on("ad_play",(function(t){i.handleAdPlay()})),i.player.on("loaded",(function(t){i.handleLoaded(t)})),i.player.on("impression",(function(t){i.handleAdImpression()})),i.player.on("ad_error",(function(t){var e,n,r=null===(e=t.data)||void 0===e||null===(n=e.j)||void 0===n?void 0:n.j;i.handleAdError(r)})),i.player.on("ad_end",(function(t){i.handleAdEnd()})),i.player.play(),i.controlsContainer)"none"==window.getComputedStyle(i.controlsContainer).display&&i.controlsContainer.setAttribute("style","display:block !important")}}))}},{key:"observer",value:function(){var t=this;this.viewportObserver=new IntersectionObserver((function(e,i){e.forEach((function(e){t.visible=e.isIntersecting,t.playerState&&(t.visible?t.player.resume():t.player.pause())}))}))}},{key:"handleLoaded",value:function(t){var e=this;try{t.data.B.vpaid||(this.viewportObserver.observe(this.videoElement),this.playerState=!0,setTimeout((function(){e.playerState&&(e.visible?e.player.play():e.player.pause())}),1e3))}catch(t){this.viewportObserver.observe(this.videoElement),this.playerState=!0,setTimeout((function(){e.playerState&&(e.visible?e.player.play():e.player.pause())}),1e3)}this.resizeAd()}},{key:"resizeAd",value:function(){if(!(this.bid.width<=this.size.width)){var t=this.bid.height/this.bid.width;this.size.height=Math.floor(this.size.width*t),this.player.resize(this.size.width,this.size.height)}}},{key:"handleAdPlay",value:function(){this.controlsMute(),this.player.setVolume(0)}},{key:"handleAdImpression",value:function(){var t;if(null!==(t=this.utils.window.OCM)&&void 0!==t&&t.vidimps&&this.utils.window.OCM.vidimps[this.bid.auctionId]){var e=this.utils.window.OCM.vidimps[this.bid.auctionId];delete this.utils.window.OCM.vidimps[this.bid.auctionId],fetch("https://pba.orangeclickmedia.com/pba-update",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},withCredentials:!0,body:JSON.stringify(e)}).then((function(t){t.json().then((function(t){return console.log(t)}))})).catch((function(t){console.error(t)}))}}},{key:"handleAdEnd",value:function(){var t=this;this.viewportObserver.unobserve(this.videoElement),this.player.destroy(),this.videoElement.style.height=0,setTimeout((function(){t.videoElement.remove()}),500),this.refreshAd()}},{key:"handleAdError",value:function(t){this.refreshAd()}},{key:"refreshAd",value:function(){var t=this;if(this.hb_config.functionality.includes("lazyload"))this.resetLazyLoadForAdDiv();else{var e=this.utils.window.googletag.pubads().getSlots().filter((function(e){return e.getSlotElementId()===t.adDiv.id}));e.length&&this.utils.window.googletag.pubads().refresh(e)}}},{key:"resetLazyLoadForAdDiv",value:function(){this.adDiv.removeAttribute("data-lazyloaded-by-ocm"),this.adDiv.removeAttribute("data-oau-code")}},{key:"html",value:function(){var t='<div id="'.concat(this.adDiv.id,'-ocm-video" class="ocm-video-player">')+'  <div id="'.concat(this.adDiv.id,'-ocm-ad-container"></div>')+'  <div class="ocm-ad-controls">    <div class="ocm-ad-label">Ad</div>    <div class="ocm-ad-play"></div>    <div class="ocm-ad-volume"></div>    <div class="ocm-ad-replay"></div>  </div></div>';this.adDiv.insertAdjacentHTML("afterbegin",t),this.videoElement=document.getElementById("".concat(this.adDiv.id,"-ocm-video")),this.adContainer=document.getElementById("".concat(this.adDiv.id,"-ocm-ad-container")),this.controlsContainer=document.querySelector("#".concat(this.adDiv.id,"-ocm-video .ocm-ad-controls")),this.volumeButton=document.querySelector("#".concat(this.adDiv.id,"-ocm-video .ocm-ad-controls .ocm-ad-volume")),300===this.size.width&&(this.controlsContainer.classList.add("scaled"),this.volumeButton.classList.add("scaled")),this.elementListeners()}},{key:"elementListeners",value:function(){var t=this;this.volumeButton.addEventListener("click",(function(e){t.volumeState?(t.controlsMute(),t.player.setVolume(0)):(t.controlsUnMute(),t.player.setVolume(.6))}))}},{key:"controlsMute",value:function(){this.volumeState=!1,this.player.setVolume(0),this.volumeButton.classList.remove("unmuted"),this.volumeButton.classList.add("muted")}},{key:"controlsUnMute",value:function(){this.volumeState=!0,this.player.setVolume(1),this.volumeButton.classList.remove("muted"),this.volumeButton.classList.add("unmuted")}},{key:"styles",value:function(){this.utils.loadStyle("\n        .ocm-video-player {\n           display:inline-block; margin:0 auto; width:".concat(this.size.width,"px; height:").concat(this.size.height,"px; transition: height 1s, transform 1s;\n        }\n        .ocm-ad-controls {\n        \tdisplay:none;\n        \twidth:0px;\n        \theight:auto;\n        \tbottom:0px;\n        \tposition: relative;\n        \tz-index:101;\n        }\n        /*.ocm-ad-play, */\n        .ocm-ad-volume {\n        \tposition:absolute;\n        \ttop:10px;\n        \twidth:32px;\n        \theight:32px;\n        \tcursor: pointer;\n        \tborder-radius:50%;\n        \tbackground-color: rgb(223 129 0 / 85%);\n        \tbackground-origin:border-box;\n        \tbackground-position:center center;\n        \tbackground-repeat: no-repeat;\n        \tbackground-size:20px;\n        }\n        .ocm-ad-label {\n        \tposition:absolute;\n        \ttop:16px;\n        \tleft:50px;\n        \twidth:16px;\n        \theight:16px;\n        \tfont-size:12px;\n        \tcolor:#000;\n        \ttext-shadow:1px 1px 0px rgba(255, 255, 255, 0.6)\n        }\n        .scaled {\n            transform: scale(0.8) !important;        \n        }\n        .ocm-ad-label.scaled {\n            left: 46px !important;\n        }\n        .ocm-ad-volume {\n        \tleft:10px;\n        }\n        /*\n        .ocm-ad-play {\n    \t\tleft:10px;\n        }\n        .ocm-ad-play.playing {\n        \tbackground-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/pause.png');\n        }\n        .ocm-ad-play.paused {\n        \tbackground-position: 9px 6px;\n\t\t    background-size: 18px;\n        \tbackground-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/play.png');\n        }\n        */\n        .ocm-ad-volume.unmuted {\n        \tbackground-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/mute.png');\n        }\n        .ocm-ad-volume.muted {\n        \tbackground-position: 9px 9px;\n        \tbackground-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/unmute.png');\n        }\n        "))}}]),t}()},function(t,e){t.exports=function(t){var e=t.hasOwnProperty("use_window_top")?t.use_window_top?window.top:window:window.top;e.googletag=e.googletag||{},googletag.cmd=googletag.cmd||[],(t.debug||t.services.gpt.debug)&&console.log("[OCM][GPT] Loading GPT library...");var i=document.createElement("script"),n=document.getElementsByTagName("script")[0];i.async=!0,i.type="text/javascript",i.src="//securepubads.g.doubleclick.net/tag/js/gpt.js",n.parentNode.insertBefore(i,n),googletag.cmd.push((function(){t.services.gpt.collapseEmptyDivs[0]&&(t.services.gpt.collapseEmptyDivs[1]?googletag.pubads().collapseEmptyDivs(!0):googletag.pubads().collapseEmptyDivs()),t.services.gpt.enableSingleRequest&&googletag.pubads().enableSingleRequest(),t.services.gpt.setCentering&&googletag.pubads().setCentering(!0),t.services.gpt.disableInitialLoad&&googletag.pubads().disableInitialLoad(),googletag.enableServices()}))}},function(t,e){var i=navigator.userAgent||navigator.vendor||window.opera,n=(i.indexOf("FBAN")>-1||i.indexOf("FBAV"),i.indexOf("iPhone"),!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0),r=(window.safari,!!document.documentMode),s=(!r&&window.StyleMedia,!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime));(s||n)&&window.CSS},function(t,e,i){"use strict";t.exports=function(t,e){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return t.apply(e,i)}}},function(t,e,i){"use strict";var n=i(6);function r(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,i){if(!e)return t;var s;if(i)s=i(e);else if(n.isURLSearchParams(e))s=e.toString();else{var o=[];n.forEach(e,(function(t,e){null!=t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,(function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),o.push(r(e)+"="+r(t))})))})),s=o.join("&")}if(s){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+s}return t}},function(t,e,i){"use strict";t.exports=function(t,e,i,n,r){return t.config=e,i&&(t.code=i),t.request=n,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,i){"use strict";var n=i(6),r=i(57),s=i(58),o=i(25),a=i(59),u=i(62),c=i(63),l=i(28);t.exports=function(t){return new Promise((function(e,i){var d=t.data,h=t.headers,f=t.responseType;n.isFormData(d)&&delete h["Content-Type"];var g=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";h.Authorization="Basic "+btoa(p+":"+m)}var v=a(t.baseURL,t.url);function y(){if(g){var n="getAllResponseHeaders"in g?u(g.getAllResponseHeaders()):null,s={data:f&&"text"!==f&&"json"!==f?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:t,request:g};r(e,i,s),g=null}}if(g.open(t.method.toUpperCase(),o(v,t.params,t.paramsSerializer),!0),g.timeout=t.timeout,"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(y)},g.onabort=function(){g&&(i(l("Request aborted",t,"ECONNABORTED",g)),g=null)},g.onerror=function(){i(l("Network Error",t,null,g)),g=null},g.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),i(l(e,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},n.isStandardBrowserEnv()){var b=(t.withCredentials||c(v))&&t.xsrfCookieName?s.read(t.xsrfCookieName):void 0;b&&(h[t.xsrfHeaderName]=b)}"setRequestHeader"in g&&n.forEach(h,(function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete h[e]:g.setRequestHeader(e,t)})),n.isUndefined(t.withCredentials)||(g.withCredentials=!!t.withCredentials),f&&"json"!==f&&(g.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&g.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){g&&(g.abort(),i(t),g=null)})),d||(d=null),g.send(d)}))}},function(t,e,i){"use strict";var n=i(26);t.exports=function(t,e,i,r,s){var o=new Error(t);return n(o,e,i,r,s)}},function(t,e,i){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,i){"use strict";var n=i(6);t.exports=function(t,e){e=e||{};var i={},r=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(t,e){return n.isPlainObject(t)&&n.isPlainObject(e)?n.merge(t,e):n.isPlainObject(e)?n.merge({},e):n.isArray(e)?e.slice():e}function c(r){n.isUndefined(e[r])?n.isUndefined(t[r])||(i[r]=u(void 0,t[r])):i[r]=u(t[r],e[r])}n.forEach(r,(function(t){n.isUndefined(e[t])||(i[t]=u(void 0,e[t]))})),n.forEach(s,c),n.forEach(o,(function(r){n.isUndefined(e[r])?n.isUndefined(t[r])||(i[r]=u(void 0,t[r])):i[r]=u(void 0,e[r])})),n.forEach(a,(function(n){n in e?i[n]=u(t[n],e[n]):n in t&&(i[n]=u(void 0,t[n]))}));var l=r.concat(s).concat(o).concat(a),d=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===l.indexOf(t)}));return n.forEach(d,c),i}},function(t,e,i){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,i){var n=i(3),r=i(4),s=i(0),o=i(1),a=i(2),u="[OCM][Reaper] ",c=i(33),l=i(34),d=i(35);t.exports=function(){"use strict";function t(e,i){var n;s(this,t),a(this,"utils",void 0),a(this,"config",void 0),a(this,"reaper_config",void 0),a(this,"_oid",void 0),a(this,"_oeid",void 0),a(this,"_oeid_time",void 0),a(this,"data",void 0),a(this,"ip",void 0),a(this,"device_access",void 0),this.utils=e,this.config=i,this._oid=null,this._oeid=d.v4(),this.utils.window.OCM._oeid=this._oeid,this._oeid_time=(new Date).getTime(),this.reaper_config=i.services.reaper,this.data={},this.device_access=!0,this.ip=null,(this.config.debug||this.reaper_config.debug)&&console.log(u+"Creating the oeid(".concat(this._oeid,") at the constructor")),this.utils.window.OCM.site_language=(null==this||null===(n=this.reaper_config)||void 0===n?void 0:n.language)||null}var e,h;return o(t,[{key:"run",value:function(){var t,e=this;null!==(t=this.utils.window.OCM)&&void 0!==t&&t.hasPurposeOneConsent||!this.config.services.iab_compliance.active||((this.config.debug||this.reaper_config.debug)&&console.warn(u+"Device access was denied. Forcing first party."),this.device_access=!1),this.targetEventId(),this.getUserIP().catch((function(){(e.config.debug||e.reaper_config.debug)&&console.log(u+"Failed to fetch IP")})).finally((function(){e.collect().then((function(){(e.config.debug||e.reaper_config.debug)&&console.log(u+"Collected: ",e.data),e.send()})).catch((function(t){console.error(u+"Failed at data collection",t)}))}))}},{key:"getUserIP",value:(h=r(n.mark((function t(){var e=this;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=r(n.mark((function t(i,r){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("https://www.cloudflare.com/cdn-cgi/trace").then((function(t){return t.text()})).then((function(t){try{t=t.trim().split("\n").reduce((function(t,e){return t[(e=e.split("="))[0]]=e[1],t}),{}),e.ip=t.ip,i()}catch(t){fetch("https://api64.ipify.org").then((function(t){return t.text()})).then((function(t){e.ip=t,i()})).catch((function(t){r()}))}})).catch((function(t){fetch("https://api64.ipify.org").then((function(t){return t.text()})).then((function(t){e.ip=t,i()})).catch((function(t){r()}))}));case 1:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"runUserEngagement",value:function(t,e){var n,r;null!==(n=this.config.services)&&void 0!==n&&null!==(r=n.user_engagement)&&void 0!==r&&r.active&&new(i(19))(this.utils,this.config,t,e).run()}},{key:"hasAlreadyRun",value:function(){return this.utils.window.sessionStorage.getItem("has_reaper_already_run")||!1}},{key:"cleanSessionStorageOnUnload",value:function(){var t=this;this.utils.window.addEventListener("beforeunload",(function(){console.log(u+"Removing reaper key from session storage."),t.utils.window.sessionStorage.removeItem("has_reaper_already_run")}))}},{key:"targetEventId",value:function(){var t=this;this.utils.window.googletag=this.utils.window.googletag||{cmd:[]},this.utils.window.googletag.cmd.push((function(){t.utils.window.googletag.pubads().setTargeting("oeid",[t._oeid])}))}},{key:"collect",value:(e=r(n.mark((function t(){var e=this;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){(e.config.debug||e.reaper_config.debug)&&console.log(u+"Collecting data...");var n="third",r=l.parse(e.utils.window.navigator.userAgent);n=e.device_access?"iOS"===r.os.name&&parseFloat(r.os.version)>=14||"Safari"===r.browser.name&&parseFloat(r.browser.version)>=13.1||["Firefox","Brave"].includes(r.browser.name)?"first":"third":"first","bot"!==r.platform.type||e.utils.window.location.hostname.includes("newsbomb.gr")||((e.config.debug||e.reaper_config.debug)&&console.log(u+"Bot detected, terminating process"),i("Bot detected, terminating process")),(e.config.debug||e.reaper_config.debug)&&(console.log(u+"Cookie type decision:",n),console.log("OS:",r.os.name+" "+r.os.version),console.log("Browser:",r.browser.name+" "+r.browser.version)),e.reap(n).then((function(){var i,s,o,a;e.data={ip:e.ip,oid:e._oid,oeid:e._oeid,oeid_time:e._oeid_time,eids:"",cookie_type:n,os:"".concat(r.os.name||"","/").concat(r.os.versionName||"","/").concat(r.os.version||""),browser:"".concat(r.browser.name,"/").concat(r.browser.version)||"",platform:r.platform.type||"",pageType:e.utils.window.OCM.pageType,url:"".concat(e.utils.window.location.protocol,"//").concat(e.utils.window.location.hostname+e.utils.window.location.pathname),language:e.utils.window.navigator.language,hostname:e.utils.window.location.hostname.replace("www.",""),searchParams:e.utils.window.location.search,city:null!==(i=null===(s=e.utils.window.xtbClient)||void 0===s?void 0:s.cookies.city)&&void 0!==i?i:"",pixelRatio:null!==(o=e.utils.window.devicePixelRatio)&&void 0!==o?o:null,connection:e.getConnectionSpeed(),referrer:document.referrer,viewportSize:"".concat(document.documentElement.clientWidth,"x").concat(document.documentElement.clientHeight),windowSize:"".concat(e.utils.window.outerWidth,"x").concat(e.utils.window.outerHeight),site_language:(null==e||null===(a=e.reaper_config)||void 0===a?void 0:a.language)||"-"},e.runUserEngagement(e._oid,e._oeid);var c=10;!function i(){if((e.config.debug||e.reaper_config.debug)&&console.log(u+"running waitForUserIds",c),c<=0)return(e.config.debug||e.reaper_config.debug)&&console.log(u+"maxUserIdsTries zeroed out, resolving"),void t();window.ocmpbjs&&"function"==typeof window.ocmpbjs.getUserIdsAsEids&&window.ocmpbjs.getUserIdsAsEids().length?(e.data.eids=JSON.stringify(window.ocmpbjs.getUserIdsAsEids()),t()):(c--,setTimeout((function(){i()}),200))}()})).catch((function(t){(e.config.debug||e.reaper_config.debug)&&console.log(u+"Failed reaping, terminating process",t),i(t)}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"isDailyCallMade",value:function(){var t=this.utils.window.localStorage.getItem("ocm_sync_date");return!!t&&this.isToday(new Date(t))}},{key:"isToday",value:function(t){var e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}},{key:"reap",value:function(t){var e=this;return(this.config.debug||this.reaper_config.debug)&&console.log(u+"Reaping..."),new Promise(function(){var i=r(n.mark((function i(r,s){var o;return n.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=function(t){t?r(t):s()},e.isDailyCallMade()){i.next=6;break}(e.config.debug||e.reaper_config.debug)&&console.log(u+"Running daily sync"),e.thirdPartyCall(t,(function(t){t?(e.utils.window.localStorage.setItem("ocm_sync_date",new Date),e.saveOidInStorage()):e.deleteOidFromStorage(),o(t)})),i.next=14;break;case 6:if((e.config.debug||e.reaper_config.debug)&&console.log(u+"Daily sync has already run"),e._oid=c.get("_oid")||e.utils.window.localStorage.getItem("_oid")||null,(e.config.debug||e.reaper_config.debug)&&console.log(u+"_oid from storage = ",e._oid),!e._oid){i.next=12;break}return o(!0),i.abrupt("return");case 12:(e.config.debug||e.reaper_config.debug)&&(console.log(u+"this._oid = "+e._oid),console.log(u+"cookie_type = "+t)),e.thirdPartyCall(t,(function(t){t?e.saveOidInStorage():e.deleteOidFromStorage(),o(t)}));case 14:case"end":return i.stop()}}),i)})));return function(t,e){return i.apply(this,arguments)}}())}},{key:"saveOidInStorage",value:function(){(this.config.debug||this.reaper_config.debug)&&console.log(u+"Saving _oid in storage"),c.set("_oid",this._oid,{expires:3650,domain:"."+this.utils.window.location.host.replace("www.",""),path:"/",Secure:!0,HttpOnly:!1}),this.utils.window.localStorage.setItem("_oid",this._oid)}},{key:"deleteOidFromStorage",value:function(){(this.config.debug||this.reaper_config.debug)&&console.log(u+"Deleting _oid in storage"),c.remove("_oid",{domain:"."+this.utils.window.location.host.replace("www.",""),path:"/",Secure:!0,HttpOnly:!1}),this.utils.window.localStorage.removeItem("_oid")}},{key:"thirdPartyCall",value:function(t,e){var i=this;(this.config.debug||this.reaper_config.debug)&&console.log(u+"Calling for 3rd party cookie");var n=new XMLHttpRequest;n.open("GET","//pba.orangeclickmedia.com/usync?type="+t),n.setRequestHeader("Content-Type","application/json"),n.withCredentials=!0,n.send(),n.onloadend=function(){i._oid=JSON.parse(n.response)._oid,e(!0)},n.onerror=function(){i.deleteOidFromStorage(),e(!1)}}},{key:"getConnectionSpeed",value:function(){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!t)return null;if(t.saveData)return null;switch(t.effectiveType){case"4g":return 3;case"3g":return 2;case"2g":case"slow-2g":return 1;default:return null}}},{key:"send",value:function(){(this.config.debug||this.reaper_config.debug)&&console.log(u+"Sending: ",this.data);var t=new XMLHttpRequest;t.open("POST","https://ue.adsquirrel.ai/insert"),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(this.data)),t.onerror=function(){}}}]),t}()},function(t,e,i){t.exports=function(){"use strict";function t(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function e(i,n){function r(e,r,s){if("undefined"!=typeof document){"number"==typeof(s=t({},n,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in s)s[a]&&(o+="; "+a,!0!==s[a]&&(o+="="+s[a].split(";")[0]));return document.cookie=e+"="+i.write(r,e)+o}}function s(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var e=document.cookie?document.cookie.split("; "):[],n={},r=0;r<e.length;r++){var s=e[r].split("="),o=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(n[a]=i.read(o,a),t===a)break}catch(t){}}return t?n[t]:n}}return Object.create({set:r,get:s,remove:function(e,i){r(e,"",t({},i,{expires:-1}))},withAttributes:function(i){return e(this.converter,t({},this.attributes,i))},withConverter:function(i){return e(t({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(i)}})}return e({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},function(t,e,i){t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=90)}({17:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n=i(18),r=function(){function t(){}return t.getFirstMatch=function(t,e){var i=e.match(t);return i&&i.length>0&&i[1]||""},t.getSecondMatch=function(t,e){var i=e.match(t);return i&&i.length>1&&i[2]||""},t.matchAndReturnConst=function(t,e,i){if(t.test(e))return i},t.getWindowsVersionName=function(t){switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},t.getMacOSVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},t.getAndroidVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0},t.getVersionPrecision=function(t){return t.split(".").length},t.compareVersions=function(e,i,n){void 0===n&&(n=!1);var r=t.getVersionPrecision(e),s=t.getVersionPrecision(i),o=Math.max(r,s),a=0,u=t.map([e,i],(function(e){var i=o-t.getVersionPrecision(e),n=e+new Array(i+1).join(".0");return t.map(n.split("."),(function(t){return new Array(20-t.length).join("0")+t})).reverse()}));for(n&&(a=o-Math.min(r,s)),o-=1;o>=a;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===a)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}},t.map=function(t,e){var i,n=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(i=0;i<t.length;i+=1)n.push(e(t[i]));return n},t.find=function(t,e){var i,n;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(i=0,n=t.length;i<n;i+=1){var r=t[i];if(e(r,i))return r}},t.assign=function(t){for(var e,i,n=t,r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[t].concat(s));var a=function(){var t=s[e];"object"==typeof t&&null!==t&&Object.keys(t).forEach((function(e){n[e]=t[e]}))};for(e=0,i=s.length;e<i;e+=1)a();return t},t.getBrowserAlias=function(t){return n.BROWSER_ALIASES_MAP[t]},t.getBrowserTypeByAlias=function(t){return n.BROWSER_MAP[t]||""},t}();e.default=r,t.exports=e.default},18:function(t,e,i){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(91))&&n.__esModule?n:{default:n},s=i(18);function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(){}var e,i,n;return t.getParser=function(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)throw new Error("UserAgent should be a string");return new r.default(t,e)},t.parse=function(t){return new r.default(t).getResult()},e=t,n=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(i=null)&&o(e.prototype,i),n&&o(e,n),t}();e.default=a,t.exports=e.default},91:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n=u(i(92)),r=u(i(93)),s=u(i(94)),o=u(i(95)),a=u(i(17));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(t,e){if(void 0===e&&(e=!1),null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==e&&this.parse()}var e=t.prototype;return e.getUA=function(){return this._ua},e.test=function(t){return t.test(this._ua)},e.parseBrowser=function(){var t=this;this.parsedResult.browser={};var e=a.default.find(n.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser},e.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},e.getBrowserName=function(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},e.getBrowserVersion=function(){return this.getBrowser().version},e.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},e.parseOS=function(){var t=this;this.parsedResult.os={};var e=a.default.find(r.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os},e.getOSName=function(t){var e=this.getOS().name;return t?String(e).toLowerCase()||"":e||""},e.getOSVersion=function(){return this.getOS().version},e.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},e.getPlatformType=function(t){void 0===t&&(t=!1);var e=this.getPlatform().type;return t?String(e).toLowerCase()||"":e||""},e.parsePlatform=function(){var t=this;this.parsedResult.platform={};var e=a.default.find(s.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform},e.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},e.getEngineName=function(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},e.parseEngine=function(){var t=this;this.parsedResult.engine={};var e=a.default.find(o.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine},e.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},e.getResult=function(){return a.default.assign({},this.parsedResult)},e.satisfies=function(t){var e=this,i={},n=0,r={},s=0;if(Object.keys(t).forEach((function(e){var o=t[e];"string"==typeof o?(r[e]=o,s+=1):"object"==typeof o&&(i[e]=o,n+=1)})),n>0){var o=Object.keys(i),u=a.default.find(o,(function(t){return e.isOS(t)}));if(u){var c=this.satisfies(i[u]);if(void 0!==c)return c}var l=a.default.find(o,(function(t){return e.isPlatform(t)}));if(l){var d=this.satisfies(i[l]);if(void 0!==d)return d}}if(s>0){var h=Object.keys(r),f=a.default.find(h,(function(t){return e.isBrowser(t,!0)}));if(void 0!==f)return this.compareVersion(r[f])}},e.isBrowser=function(t,e){void 0===e&&(e=!1);var i=this.getBrowserName().toLowerCase(),n=t.toLowerCase(),r=a.default.getBrowserTypeByAlias(n);return e&&r&&(n=r.toLowerCase()),n===i},e.compareVersion=function(t){var e=[0],i=t,n=!1,r=this.getBrowserVersion();if("string"==typeof r)return">"===t[0]||"<"===t[0]?(i=t.substr(1),"="===t[1]?(n=!0,i=t.substr(2)):e=[],">"===t[0]?e.push(1):e.push(-1)):"="===t[0]?i=t.substr(1):"~"===t[0]&&(n=!0,i=t.substr(1)),e.indexOf(a.default.compareVersions(r,i,n))>-1},e.isOS=function(t){return this.getOSName(!0)===String(t).toLowerCase()},e.isPlatform=function(t){return this.getPlatformType(!0)===String(t).toLowerCase()},e.isEngine=function(t){return this.getEngineName(!0)===String(t).toLowerCase()},e.is=function(t,e){return void 0===e&&(e=!1),this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)},e.some=function(t){var e=this;return void 0===t&&(t=[]),t.some((function(t){return e.is(t)}))},t}();e.default=c,t.exports=e.default},92:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(t){var e={name:"Googlebot"},i=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/opera/i],describe:function(t){var e={name:"Opera"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opr\/|opios/i],describe:function(t){var e={name:"Opera"},i=r.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/SamsungBrowser/i],describe:function(t){var e={name:"Samsung Internet for Android"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Whale/i],describe:function(t){var e={name:"NAVER Whale Browser"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MZBrowser/i],describe:function(t){var e={name:"MZ Browser"},i=r.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/focus/i],describe:function(t){var e={name:"Focus"},i=r.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/swing/i],describe:function(t){var e={name:"Swing"},i=r.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/coast/i],describe:function(t){var e={name:"Opera Coast"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var e={name:"Opera Touch"},i=r.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/yabrowser/i],describe:function(t){var e={name:"Yandex Browser"},i=r.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/ucbrowser/i],describe:function(t){var e={name:"UC Browser"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Maxthon|mxios/i],describe:function(t){var e={name:"Maxthon"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/epiphany/i],describe:function(t){var e={name:"Epiphany"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/puffin/i],describe:function(t){var e={name:"Puffin"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sleipnir/i],describe:function(t){var e={name:"Sleipnir"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/k-meleon/i],describe:function(t){var e={name:"K-Meleon"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/micromessenger/i],describe:function(t){var e={name:"WeChat"},i=r.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/qqbrowser/i],describe:function(t){var e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},i=r.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/msie|trident/i],describe:function(t){var e={name:"Internet Explorer"},i=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/\sedg\//i],describe:function(t){var e={name:"Microsoft Edge"},i=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/edg([ea]|ios)/i],describe:function(t){var e={name:"Microsoft Edge"},i=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/vivaldi/i],describe:function(t){var e={name:"Vivaldi"},i=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/seamonkey/i],describe:function(t){var e={name:"SeaMonkey"},i=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sailfish/i],describe:function(t){var e={name:"Sailfish"},i=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return i&&(e.version=i),e}},{test:[/silk/i],describe:function(t){var e={name:"Amazon Silk"},i=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/phantom/i],describe:function(t){var e={name:"PhantomJS"},i=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/slimerjs/i],describe:function(t){var e={name:"SlimerJS"},i=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e={name:"BlackBerry"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e={name:"WebOS Browser"},i=r.default.getFirstMatch(s,t)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/bada/i],describe:function(t){var e={name:"Bada"},i=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/tizen/i],describe:function(t){var e={name:"Tizen"},i=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/qupzilla/i],describe:function(t){var e={name:"QupZilla"},i=r.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var e={name:"Firefox"},i=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/electron/i],describe:function(t){var e={name:"Electron"},i=r.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MiuiBrowser/i],describe:function(t){var e={name:"Miui"},i=r.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/chromium/i],describe:function(t){var e={name:"Chromium"},i=r.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/chrome|crios|crmo/i],describe:function(t){var e={name:"Chrome"},i=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/GSA/i],describe:function(t){var e={name:"Google Search"},i=r.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:function(t){var e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe:function(t){var e={name:"Android Browser"},i=r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/playstation 4/i],describe:function(t){var e={name:"PlayStation 4"},i=r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/safari|applewebkit/i],describe:function(t){var e={name:"Safari"},i=r.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/.*/i],describe:function(t){var e=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:r.default.getFirstMatch(e,t),version:r.default.getSecondMatch(e,t)}}}];e.default=o,t.exports=e.default},93:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),o=[{test:[/Roku\/DVP/],describe:function(t){var e=r.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:s.OS_MAP.Roku,version:e}}},{test:[/windows phone/i],describe:function(t){var e=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.WindowsPhone,version:e}}},{test:[/windows /i],describe:function(t){var e=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),i=r.default.getWindowsVersionName(e);return{name:s.OS_MAP.Windows,version:e,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var e={name:s.OS_MAP.iOS},i=r.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return i&&(e.version=i),e}},{test:[/macintosh/i],describe:function(t){var e=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),i=r.default.getMacOSVersionName(e),n={name:s.OS_MAP.MacOS,version:e};return i&&(n.versionName=i),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var e=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:e}}},{test:function(t){var e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe:function(t){var e=r.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),i=r.default.getAndroidVersionName(e),n={name:s.OS_MAP.Android,version:e};return i&&(n.versionName=i),n}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),i={name:s.OS_MAP.WebOS};return e&&e.length&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||r.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:s.OS_MAP.BlackBerry,version:e}}},{test:[/bada/i],describe:function(t){var e=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.Bada,version:e}}},{test:[/tizen/i],describe:function(t){var e=r.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.Tizen,version:e}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var e=r.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.PlayStation4,version:e}}}];e.default=o,t.exports=e.default},94:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var e=r.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",i={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return e&&(i.model=e),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(t){var e=t.test(/ipod|iphone/i),i=t.test(/like (ipod|iphone)/i);return e&&!i},describe:function(t){var e=r.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var e=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&e>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=o,t.exports=e.default},95:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),o=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:s.ENGINE_MAP.Blink};var e=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:s.ENGINE_MAP.EdgeHTML,version:e}}},{test:[/trident/i],describe:function(t){var e={name:s.ENGINE_MAP.Trident},i=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:function(t){return t.test(/presto/i)},describe:function(t){var e={name:s.ENGINE_MAP.Presto},i=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:function(t){var e=t.test(/gecko/i),i=t.test(/like gecko/i);return e&&!i},describe:function(t){var e={name:s.ENGINE_MAP.Gecko},i=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var e={name:s.ENGINE_MAP.WebKit},i=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}}];e.default=o,t.exports=e.default}})},function(t,e,i){var n=i(36),r=i(37),s=r;s.v1=n,s.v4=r,t.exports=s},function(t,e,i){var n,r,s=i(16),o=i(17),a=0,u=0;t.exports=function(t,e,i){var c=e&&i||0,l=e||[],d=(t=t||{}).node||n,h=void 0!==t.clockseq?t.clockseq:r;if(null==d||null==h){var f=s();null==d&&(d=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==h&&(h=r=16383&(f[6]<<8|f[7]))}var g=void 0!==t.msecs?t.msecs:(new Date).getTime(),p=void 0!==t.nsecs?t.nsecs:u+1,m=g-a+(p-u)/1e4;if(m<0&&void 0===t.clockseq&&(h=h+1&16383),(m<0||g>a)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=g,u=p,r=h;var v=(1e4*(268435455&(g+=122192928e5))+p)%4294967296;l[c++]=v>>>24&255,l[c++]=v>>>16&255,l[c++]=v>>>8&255,l[c++]=255&v;var y=g/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=h>>>8|128,l[c++]=255&h;for(var b=0;b<6;++b)l[c+b]=d[b];return e||o(l)}},function(t,e,i){var n=i(16),r=i(17);t.exports=function(t,e,i){var s=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;a<16;++a)e[s+a]=o[a];return e||r(o)}},function(t,e,i){var n=i(5),r=i(0),s=i(1),o=i(2);function a(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var c="[OCM][Fizz] ";t.exports=function(){"use strict";function t(e,i){r(this,t),o(this,"utils",void 0),o(this,"config",void 0),o(this,"fizz_config",void 0),o(this,"slots",[]),o(this,"lazyload",void 0),o(this,"headerBiddingFunctionality",void 0),o(this,"engaging",!1),o(this,"engagementTimer",null),o(this,"slotsObserver",null),o(this,"INTERSECTION_OBSERVER_TIMEOUT",1e3),o(this,"INTERSECTION_OBSERVER_OPTIONS",{root:null,rootMargin:"0px",threshold:.5}),o(this,"isRefreshIntervalStarted",!1),o(this,"TRIGGER_REFRESH_INTERVAL",3e3),this.utils=e,this.config=i,this.fizz_config=i.services.fizz,this.headerBiddingFunctionality=i.services.hasOwnProperty("header_bidding")&&i.services.header_bidding.active?i.services.header_bidding.functionality:null}return s(t,[{key:"run",value:function(){(this.config.debug||this.fizz_config.debug)&&console.log(c+"Running..."),this.trackUserEngagement(),this.slotsObserver=this.createSlotsObserver(),this.slotRenderEndedListener()}},{key:"allowByAdUnit",value:function(t){return!!this.fizz_config.ads_whitelist.find((function(e){return e.path===t}))}},{key:"allowByAdvertiser",value:function(t){if(this.fizz_config.advertisers_whitelist&&0===this.fizz_config.advertisers_whitelist.length)return!0;var e=this.fizz_config.advertisers_whitelist.find((function(e){return e.id===t}));return e&&(this.config.debug||this.fizz_config.debug)&&console.log(c+"Found whitelisted advertiser ".concat(e.name)),!!e}},{key:"removeFromSlots",value:function(t,e,i){this.slots.hasOwnProperty(t)&&((this.config.debug||this.fizz_config.debug)&&console.log(c,'Removing ad slot "'.concat(e,'" due to not whitelisted advertiserId = ').concat(i.advertiserId)),this.slots.splice(this.slots.findIndex(t),1))}},{key:"getAdDivElement",value:function(t){var e=null;if(this.utils.config.services.lazyload.active)e=this.utils.window.document.querySelector('[data-oau-code="'+t+'"]');else{var i=this.utils.window.googletag.pubads().getSlots().filter((function(e){return e.getAdUnitPath()===t}));i.length&&"object"===n(i[0])&&(e=this.utils.window.document.getElementById(i[0].getSlotElementId()))}return e}},{key:"trackUserEngagement",value:function(){var t=this;(this.config.debug||this.fizz_config.debug)&&console.log(c+"Running user engagement listener"),["touchstart","touchmove","click","scroll","keyup"].forEach((function(e){t.utils.window.addEventListener(e,t.utils.throttle((function(){t.engaging=!0,(t.config.debug||t.fizz_config.debug)&&console.log(c+"User engaged"),t.engagementTimer&&clearTimeout(t.engagementTimer),t.engagementTimer=setTimeout((function(){t.engaging=!1,(t.config.debug||t.fizz_config.debug)&&console.log(c+"User disengaged")}),1e4)}),1e3))}))}},{key:"createSlotsObserver",value:function(){var t=this;return new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&setTimeout((function(){var i,n=null==e||null===(i=e.target)||void 0===i?void 0:i.id;n&&t.utils.isSlotInViewport(n)?(t.slots[n].viewedAt=Date.now(),(t.config.debug||t.fizz_config.debug)&&console.log(c+'[Intersection Observer] Slot "'.concat(e.target.id,'" is visible at viewport'))):(t.config.debug||t.fizz_config.debug)&&console.log(c+'[Intersection Observer] Slot "'.concat(e.target.id,'" is out of viewport'))}),t.INTERSECTION_OBSERVER_TIMEOUT)}))}),this.INTERSECTION_OBSERVER_OPTIONS)}},{key:"slotRenderEndedListener",value:function(){var t=this;(this.config.debug||this.fizz_config.debug)&&console.log(c+"Looking for rendered slots"),this.utils.window.googletag.cmd.push((function(){t.utils.window.googletag.pubads().addEventListener("slotRenderEnded",(function(e){t.isRefreshIntervalStarted||(t.isRefreshIntervalStarted=!0,t.startRefreshInterval());var i=e.slot.getAdUnitPath(),n=e.slot.getSlotElementId(),r=e.isEmpty?null:e.slot.getResponseInformation();if((t.config.debug||t.fizz_config.debug)&&console.log(c+'Checking if ad unit "'.concat(i,'" is in whitelisted ad units'),t.fizz_config.ads_whitelist),!t.allowByAdUnit(i))return(t.config.debug||t.fizz_config.debug)&&console.log(c+'Blocking refresh of "'.concat(i,'" due to not whitelisted ad unit path')),null;if(!e.isEmpty&&((t.config.debug||t.fizz_config.debug)&&console.log(c+'Checking "'.concat(i,'" for whitelisted advertiserId = ').concat(r.advertiserId)),!t.allowByAdvertiser(r.advertiserId)))return(t.config.debug||t.fizz_config.debug)&&console.log(c+'Removing "'.concat(i,'" from fizz slots due to not allowed by advertiser')),t.removeFromSlots(n,i,r),null;if(t.slots.hasOwnProperty(n))t.slots[n].renderedAt=Date.now(),(t.config.debug||t.fizz_config.debug)&&console.log(c+'Updated time for slot "'.concat(n,'"'),t.slots[n]);else{var s=+t.fizz_config.interval;t.slots[n]={gptslot:e.slot,div:n,code:i,renderedAt:Date.now(),isEmpty:e.isEmpty,viewedAt:null,adUnitInterval:s/2,refreshTurn:"HB"},t.slotsObserver.observe(t.utils.window.document.getElementById(n)),(t.config.debug||t.fizz_config.debug)&&console.log(c+'Created a new slot for "'.concat(n,'"'),t.slots[n])}(t.config.debug||t.fizz_config.debug)&&console.log(c+"All Slots: ",t.slots)}))}))}},{key:"determineHbAdUnits",value:function(t){(this.config.debug||this.fizz_config.debug)&&console.log(c+"Determining HB ad units");var e,i=[],n=a(t);try{for(n.s();!(e=n.n()).done;){var r,s=e.value,o=a(this.utils.window.OCM.ad_units);try{for(o.s();!(r=o.n()).done;){var u=r.value;u.code===s.code&&i.push({code:u.code,mediaTypes:u.mediaTypes,bids:u.bids,ortb2Imp:{ext:{data:{fizz:!0}}}})}}catch(t){o.e(t)}finally{o.f()}}}catch(t){n.e(t)}finally{n.f()}return(this.config.debug||this.fizz_config.debug)&&console.log(c+"Determined HB ad units",i),i}},{key:"refreshHb",value:function(t){var e=this;(this.config.debug||this.fizz_config.debug)&&console.log(c+"in refreshHb");var i=this.determineHbAdUnits(t);i.length?this.utils.window.ocmpbjs.que.push((function(){e.utils.window.ocmpbjs.removeAdUnit(),(e.config.debug||e.fizz_config.debug)&&console.log(c+" Removing old ad units"),e.utils.window.ocmpbjs.addAdUnits(i),(e.config.debug||e.fizz_config.debug)&&console.log(c+"Adding new ad units",i),e.utils.window.ocmpbjs.requestBids({adUnitCodes:i.map((function(t){return t.code})),bidsBackHandler:function(i,n,r){(e.config.debug||e.fizz_config.debug)&&console.log(c+"Auction has finished and the bids are : ",i),Object.keys(i).forEach((function(t){i[t].bids=i[t].bids.filter((function(t){return"bidRejected"!==t.statusMessage&&"bidRejected"!==t.status}))})),Object.keys(i).forEach((function(t){i[t].bids.length||delete i[t]})),Object.keys(i).length>0&&e.renderBidResponses(i),t.forEach((function(t){e.slots[t.div].isEmpty=i[t.div]&&i[t.div].bids&&i[t.div].bids.length||!1}))}})})):t.forEach((function(t){e.slots[t.div].refreshTurn="GAM"}))}},{key:"renderBidResponses",value:function(t){for(var e in t){(this.config.debug||this.fizz_config.debug)&&console.log(c+"Found bid for #"+e);var i=e,n=this.getAdDivElement(e);if(n){(this.config.debug||this.fizz_config.debug)&&console.log(c+"Ad div = ",n),n.querySelector("iframe")&&n.querySelector("iframe").remove();var r=this.utils.window.document.createElement("iframe");r.setAttribute("id",i+"_ocm_hb"),r.setAttribute("style","border:0;overflow:hidden;margin:15px auto;display:block;"),r.scrolling="no",r.width="0",r.height="0",n.appendChild(r);var s=r.contentWindow.document,o=this.utils.window.ocmpbjs.getAdserverTargetingForAdUnitCode(i);(this.config.debug||this.fizz_config.debug)&&console.log(c+"adServerTargeting",o),o&&o.hb_adid&&((this.config.debug||this.fizz_config.debug)&&console.log(c+"Rendering ad for "+i),this.utils.window.ocmpbjs.renderAd(s,o.hb_adid),n.querySelector("script")&&n.querySelector("script").remove(),n.querySelector('div[id^="google_ads_iframe_"]')&&n.querySelector('div[id^="google_ads_iframe_"]').remove(),n.setAttribute("style","display:block;overflow:hidden;margin:0 auto;"))}else(this.config.debug||this.fizz_config.debug)&&console.log(c+"Ad div #"+i+" not found")}}},{key:"startRefreshInterval",value:function(){var t=this;setInterval((function(){if((t.config.debug||t.fizz_config.debug)&&console.log(c+"Refresh interval triggered"),t.engaging){(t.config.debug||t.fizz_config.debug)&&console.log(c+"User is engaged during refresh interval trigger.");var e=Date.now(),i=[],n=[];Object.keys(t.slots).forEach((function(r){var s=t.slots[r],o=e-s.renderedAt||0;if("HB"===s.refreshTurn)o>=s.adUnitInterval&&((t.config.debug||t.fizz_config.debug)&&console.log(c+s.div+'HB Slot "'.concat(s.div,'" passed time requirements. Turn: ').concat(s.refreshTurn)),t.utils.isSlotInViewport(s.div)?i.push(s):(t.config.debug||t.fizz_config.debug)&&console.log(c+'HB Slot "'.concat(s.div,'" not inside viewport')));else if("GAM"===s.refreshTurn){o>=(t.fizz_config.interval-s.adUnitInterval>0?t.fizz_config.interval-s.adUnitInterval:t.fizz_config.interval)&&((t.config.debug||t.fizz_config.debug)&&console.log(c+s.div+'GAM Slot "'.concat(s.div,'" passed time requirements')),t.utils.isSlotInViewport(s.div)?n.push(s):(t.config.debug||t.fizz_config.debug)&&console.log(c+'GAM Slot "'.concat(s.div,'" not inside viewport')))}})),t.refreshHbBubbles(i),t.refreshGAMBubbles(n)}else(t.config.debug||t.fizz_config.debug)&&console.log(c+"No user engagement during refresh interval trigger")}),this.TRIGGER_REFRESH_INTERVAL)}},{key:"refreshHbBubbles",value:function(t){var e=this;t.length?((this.config.debug||this.fizz_config.debug)&&console.log(c+"Found HB bubbles: ",t),this.refreshHb(t),t.forEach((function(t){e.slots[t.div].viewedAt=null,e.slots[t.div].renderedAt=Date.now(),e.slots[t.div].refreshTurn="GAM"})),(this.config.debug||this.fizz_config.debug)&&console.log(c+"Resetting all HB slots after refresh",this.slots)):(this.config.debug||this.fizz_config.debug)&&console.log(c+"No HB bubbles found")}},{key:"refreshGAMBubbles",value:function(t){var e=this;if(t.length){switch((this.config.debug||this.fizz_config.debug)&&console.log(c+"Found GAM bubbles: ",t),this.headerBiddingFunctionality){case null:this.refreshDfp(t);break;case"no_adserver":this.refreshHb(t);break;case"lazyload_v1":case"lazyload_v2":this.refreshDfpHbLazyload(t);break;default:this.refreshDfpHb(t)}t.forEach((function(t){e.slots[t.div].viewedAt=null,e.slots[t.div].renderedAt=Date.now(),e.slots[t.div].refreshTurn="HB"})),(this.config.debug||this.fizz_config.debug)&&console.log(c+"Resetting all GAM slots after refresh",this.slots)}else(this.config.debug||this.fizz_config.debug)&&console.log(c+"No GAM bubbles found")}},{key:"refreshDfp",value:function(t){var e=this;(this.config.debug||this.fizz_config.debug)&&console.log(c+"in refreshDfp");var i=[];Object.keys(t).forEach((function(n){e.utils.window.googletag.cmd.push((function(){t[n].gptslot.setTargeting("ocmFizz",["true"])})),i.push(t[n].gptslot)})),this.utils.window.googletag.cmd.push((function(){e.utils.window.googletag.pubads().refresh(i)}))}},{key:"refreshDfpHbLazyload",value:function(t){var e=this;(this.config.debug||this.fizz_config.debug)&&console.log(c+"in refreshDfpHbLazyload");var i,n=a(t);try{var r=function(){var t=i.value,n=document.querySelector('div[data-oau-code="'+t.code+'"]');n&&!n.hasAttribute("data-lazyincluded-by-ocm")&&(n.removeAttribute("data-lazyloaded-by-ocm"),n.removeAttribute("data-oau-code"),e.utils.window.googletag.cmd.push((function(){t.gptslot.setTargeting("ocmFizz",["true"])})))};for(n.s();!(i=n.n()).done;)r()}catch(t){n.e(t)}finally{n.f()}}},{key:"refreshDfpHb",value:function(t){var e=this;(this.config.debug||this.fizz_config.debug)&&console.log(c+"in refreshHbDfp"),this.utils.window.ocmpbjs.adUnits=[];var i=this.determineHbAdUnits(t);this.utils.window.googletag.cmd.push((function(){e.utils.window.ocmpbjs.que.push((function(){e.utils.window.ocmpbjs.addAdUnits(i),e.utils.window.ocmpbjs.requestBids({adUnitCodes:i.map((function(t){return t.code})),bidsBackHandler:function(){var i=[];try{Object.keys(t).forEach((function(n){e.utils.window.googletag.cmd.push((function(){t[n].gptslot.setTargeting("ocmFizz",["true"])})),i.push(t[n].gptslot)}))}catch(t){console.error("OCM Fizz: ",t)}i.length&&(e.utils.window.ocmpbjs.setTargetingForGPTAsync(i.map((function(t){return t.getAdUnitPath()}))),e.utils.window.googletag.pubads().refresh(i),e.utils.window.ocmpbjs.initAdserverSet=!0,(e.config.debug||e.fizz_config.debug)&&console.log(c+"=> HB: Called initAdServer"))}})}))}))}}]),t}()},function(t,e,i){var n=i(3),r=i(4),s=i(0),o=i(1),a=i(2);function u(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}i(20);var l=i(14),d=i(15),h="[OCM][LazyLoad] ";t.exports=function(){"use strict";function t(e,i){s(this,t),a(this,"utils",void 0),a(this,"config",void 0),a(this,"ll_config",void 0),a(this,"connection",void 0),a(this,"include_observer",void 0),a(this,"load_observer",void 0),a(this,"custom_observers",void 0),a(this,"include_offset",void 0),a(this,"load_offset",void 0),a(this,"offset_custom_observers",void 0),a(this,"hb",void 0),a(this,"uam",void 0),a(this,"scroll_direction",void 0),a(this,"last_scroll_top",void 0),a(this,"ticking",void 0),this.utils=e,this.config=i,this.ll_config=i.services.lazyload,this.scroll_direction="down",this.last_scroll_top=0,this.ticking=!1,this.include_offset=this.ll_config.include_offset,this.load_offset=this.ll_config.load_offset,this.offset_custom_observers=this.ll_config.load_offset,this.connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection,this.utils.serviceStates.header_bidding&&this.utils.allowPageType(this.config.services.header_bidding.page_types)?((this.config.debug||this.ll_config.debug)&&console.log(h+"HB is active, instantiating HB"),this.hb=new l(e,i)):this.hb=null,this.utils.serviceStates.uam&&this.utils.allowPageType(this.config.services.uam.page_types)?((this.config.debug||this.ll_config.debug)&&console.log(h+"UAM is active, instantiating UAM"),this.uam=new d(e,i),this.uam.init()):this.uam=null}var e,i,c,f,g;return o(t,[{key:"run",value:(g=r(n.mark((function t(){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((this.config.debug||this.ll_config.debug)&&console.log(h+"running lazy loaded ads..."),!this.hb){t.next=6;break}return(this.config.debug||this.ll_config.debug)&&console.log(h+"HB is active, instantiating HB"),this.utils.browser.isSafari&&this.utils.browser.isFacebookApp&&this.utils.browser.isIphone||this.networkInfo(),t.next=6,this.hb.prepare(!0);case 6:if(this.calculateDetectionPixels(this.ll_config.load_offset,!1),1!==this.ll_config.version){t.next=12;break}return t.next=10,this.v1();case 10:t.next=20;break;case 12:if(!this.utils.browser.isSafari){t.next=17;break}return t.next=15,this.v1();case 15:t.next=20;break;case 17:return t.next=19,this.setupObservers();case 19:this.v2();case 20:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"v1",value:(f=r(n.mark((function t(){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(this.config.debug||this.ll_config.debug)&&console.log(h+"v1"),t.next=3,this.utils.gptPubAdsReady();case 3:this.detectNextAdUnits(),this.setupDetectionEvent();case 5:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"v2",value:function(){var t=this;(this.config.debug||this.ll_config.debug)&&console.log(h+"v2"),this.utils.gptPubAdsReady().then((function(){!function e(){var i=t.utils.window.googletag.pubads().getSlots().map((function(e){var i=t.utils.window.document.querySelector('[id="'+e.getSlotElementId()+'"]:not([data-oau-code]):not([data-lazyloaded-by-ocm]):not([data-lazyincluded-by-ocm])');return i?(i.setAttribute("data-oau-code",e.getAdUnitPath()),i):null}));if((i=i.filter((function(t){return null!=t}))).length)for(var n=function(e){t.ll_config.hasOwnProperty("ad_load_offsets")&&t.ll_config.ad_load_offsets.length&&t.ll_config.ad_load_offsets.filter((function(t){return t.path===i[e].getAttribute("data-oau-code")&&-1===t.offset})).length?void 0!==t.custom_observers[i[e].getAttribute("data-oau-code")]&&(i[e].setAttribute("data-lazyincluded-by-ocm",""),t.custom_observers[i[e].getAttribute("data-oau-code")].observe(i[e])):i[e].hasAttribute("data-lazyincluded-by-ocm")||t.include_observer.observe(i[e])},r=0;r<i.length;r++)n(r);setTimeout(e,250)}()}))}},{key:"setupObservers",value:(c=r(n.mark((function t(){var e=this;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){e.custom_observers=[];var n={root:null,rootMargin:String(e.include_offset)+"px 0px"},r={root:null,rootMargin:String(e.load_offset)+"px 0px"};if(IntersectionObserver.prototype.POLL_INTERVAL=100,e.ll_config.hasOwnProperty("ad_load_offsets")&&e.ll_config.ad_load_offsets.length){var s,o=u(e.ll_config.ad_load_offsets);try{var a=function(){var t=s.value;e.offset_custom_observers=t.offset&&t.offset>0?t.offset:e.ll_config.load_offset;var i=-1===t.offset?99999:e.calculateDetectionPixels(t.offset,!0),n=[];if(!t.path||""===t.path)return"continue";var r={root:null,rootMargin:String(i)+"px 0px"};e.custom_observers[t.path]=new IntersectionObserver((function(t,i){var r=!1;t.forEach((function(t){void 0===t.isVisible&&(t.isVisible=!0),t.isIntersecting&&((e.config.debug||e.ll_config.debug)&&console.log("intersecting",t.target.getAttribute("data-oau-code"),t.target.hasAttribute("data-lazyincluded-by-ocm")),i.unobserve(t.target),n.push(t.target),r=!0)})),r&&e.combust(n)}),r)};for(o.s();!(s=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}}e.load_observer=new IntersectionObserver((function(t,i){var n=!1,r=[];t.forEach((function(t){void 0===t.isVisible&&(t.isVisible=!0),t.isIntersecting&&(i.unobserve(t.target),r.push(t.target),n=!0)})),n&&e.combust(r)}),r),e.include_observer=new IntersectionObserver((function(t,i){t.forEach((function(t){void 0===t.isVisible&&(t.isVisible=!0),t.isIntersecting&&(t.target.hasAttribute("data-lazyincluded-by-ocm")||(t.target.setAttribute("data-lazyincluded-by-ocm",""),e.load_observer.observe(t.target))),t.target.hasAttribute("data-lazyincluded-by-ocm")&&i.unobserve(t.target)}))}),n),t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"combust",value:(i=r(n.mark((function t(e){var i,r,s,o,a;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.utils.window.OCM.pb_done=!1,this.utils.window.OCM.uam_done=!1,(this.config.debug||this.ll_config.debug)&&console.log(h+"Combusting.."),i=Array.from(this.utils.window.document.querySelectorAll('div[id^="ocm_sticky_"][data-lazyincluded-by-ocm]')),(e=i.length?e.concat(i):e).forEach((function(t){t.removeAttribute("data-lazyincluded-by-ocm"),t.setAttribute("data-lazyloaded-by-ocm","")})),r=(r=e.map((function(t){return t.getAttribute("data-oau-code")}))).filter((function(t,e,i){return i.indexOf(t)===e})),s=e.map((function(t){return t.getAttribute("id")})),(o=this.utils.window.googletag.pubads().getSlots().filter((function(t){return!!s.includes(t.getSlotElementId())||null}))).length){t.next=13;break}return(this.config.debug||this.ll_config.debug)&&console.warn(h+"No lazyincluded-by-com ad units found. Aborting ad calls."),t.abrupt("return");case 13:if((this.config.debug||this.ll_config.debug)&&(console.log(h+"includedAdUnits",r),console.log(h+"includedAdSlots",o)),!(this.hb&&this.config.services.header_bidding.bidderTimeout>1)){t.next=32;break}if((this.config.debug||this.ll_config.debug)&&console.log(h+"HB is active, refreshing ads"),!(a=this.findAdUnitsInHb(r)).length){t.next=28;break}if(!this.uam){t.next=23;break}return(this.config.debug||this.ll_config.debug)&&console.log(h+"UAM is active, fetching bids"),this.uam.init(),t.next=23,this.uam.fetch(a);case 23:return(this.config.debug||this.ll_config.debug)&&console.log(h+"Found ad unit configuration in HB, running hbRefresh"),t.next=26,this.hbRefresh(a,o);case 26:t.next=30;break;case 28:(this.config.debug||this.ll_config.debug)&&console.log(h+"No ad unit configuration found in HB, running gptRefresh"),this.gptRefresh(o);case 30:t.next=34;break;case 32:(this.config.debug||this.ll_config.debug)&&console.log(h+"refreshing ad slots"),this.gptRefresh(o);case 34:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"findAdUnitsInHb",value:function(t){return this.utils.window.OCM.ad_units.map((function(e){if(t.indexOf(e.code)>-1)return e})).filter((function(t){return void 0!==t}))}},{key:"hbRefresh",value:(e=r(n.mark((function t(e,i){var r=this;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.utils.window.ocmpbjs.que.push((function(){try{r.utils.window.ocmpbjs.removeAdUnit(),r.utils.window.ocmpbjs.addAdUnits(e),r.utils.window.ocmpbjs.requestBids({adUnitCodes:e.map((function(t){return t.code})),bidsBackHandler:function(t,e,n){r.hb.initAdServer(i,!0)},timeout:r.hb.bidderTimeout})}catch(t){console.error(t)}}));case 1:case"end":return t.stop()}}),t,this)}))),function(t,i){return e.apply(this,arguments)})},{key:"gptRefresh",value:function(t){var e=this;this.utils.window.googletag.cmd.push((function(){var i,n=u(t);try{for(n.s();!(i=n.n()).done;){var r=i.value,s=document.getElementById(r.getSlotElementId());s.removeAttribute("data-lazyincluded-by-ocm"),s.setAttribute("data-lazyloaded-by-ocm","")}}catch(t){n.e(t)}finally{n.f()}e.utils.window.googletag.pubads().refresh(t)}))}},{key:"calculateDetectionPixels",value:function(t,e){var i=-1!==this.utils.window.navigator.userAgent.indexOf("Safari")||-1!==this.utils.window.navigator.userAgent.indexOf("Firefox")||-1!==this.utils.window.navigator.userAgent.indexOf("MSIE")||!0==!!document.documentMode;if((this.config.debug||this.ll_config.debug)&&console.info(h+"isSafariOfFirefoxOrIE is:",i),i||void 0!==this.connection&&void 0!==this.connection.effectiveType){if(!i||void 0!==this.connection&&void 0!==this.connection.effectiveType){if((this.config.debug||this.ll_config.debug)&&console.info(h+"flagForCustomOffset is:",e),!e){switch(this.include_offset=this.ll_config.include_offset,(this.config.debug||this.ll_config.debug)&&console.info(h+"old include offset",this.include_offset),this.utils.is_mobile&&(this.include_offset=2*this.include_offset),this.connection.effectiveType){case"2g":this.include_offset=Math.round(5*this.include_offset);break;case"3g":this.include_offset=Math.round(1.38*this.include_offset)}(this.config.debug||this.ll_config.debug)&&console.log(h+"Set include_offset to "+this.include_offset+"px")}switch(this.load_offset=t,(this.config.debug||this.ll_config.debug)&&console.info(h+"old load offset",this.load_offset),this.utils.is_mobile&&(this.load_offset=2*this.load_offset),this.connection.effectiveType){case"2g":this.load_offset=Math.round(5*this.load_offset);break;case"3g":this.load_offset=Math.round(1.38*this.load_offset)}(this.config.debug||this.ll_config.debug)&&console.log(h+"Set load_offset to "+this.load_offset+"px")}else(this.config.debug||this.ll_config.debug)&&console.info(h+"flagForCustomOffset is:",e),e||(this.include_offset=this.ll_config.include_offset,(this.config.debug||this.ll_config.debug)&&console.info(h+"old include offset",this.include_offset),this.utils.is_mobile&&(this.include_offset=2*this.include_offset),(this.config.debug||this.ll_config.debug)&&console.log(h+"Set include_offset to "+this.include_offset+"px")),this.load_offset=t,(this.config.debug||this.ll_config.debug)&&console.info(h+"old load offset",this.load_offset),this.utils.is_mobile&&(this.load_offset=2*this.load_offset),(this.config.debug||this.ll_config.debug)&&console.log(h+"Set load_offset to "+this.load_offset+"px");return this.load_offset}}},{key:"networkInfo",value:function(){var t=this;void 0!==this.connection&&void 0!==this.connection.effectiveType&&((this.config.debug||this.ll_config.debug)&&this.connection.addEventListener("change",this.logNetworkInfo.apply(this,[])),this.connection.addEventListener("change",(function(){t.calculateDetectionPixels(t.offset_custom_observers?t.offset_custom_observers:t.ll_config.load_offset,!1)})))}},{key:"logNetworkInfo",value:function(){this.ll_config.debug&&(console.log(h+"     downlink: "+this.connection.downlink+"Mb/s"),console.log(h+"          rtt: "+this.connection.rtt+"ms"),console.log(h+"========================================="))}},{key:"setupDetectionEvent",value:function(){var t=this;["scroll","size"].forEach((function(e){t.utils.window.addEventListener(e,t.utils.throttle((function(){var e=t.utils.window.pageYOffset||document.documentElement.scrollTop;(e>t.last_scroll_top?t.scroll_direction="down":t.scroll_direction="up",t.last_scroll_top=e<=0?0:e,t.ticking)||(t.utils.window.requestAnimationFrame||setTimeout)((function(){t.detectNextAdUnits(),t.ticking=!1}));t.ticking=!0}),1e3))}))}},{key:"detectNextAdUnits",value:function(){(this.config.debug||this.ll_config.debug)&&console.log(h+"Detecting next ad units");var t,e,i,n=[],r=u(googletag.pubads().getSlots());try{for(r.s();!(i=r.n()).done;){var s=i.value;(e=document.getElementById(s.getSlotElementId()))&&(n.push(e),e.hasAttribute("data-oau-code")||e.setAttribute("data-oau-code",s.getAdUnitPath()))}}catch(t){r.e(t)}finally{r.f()}for(var o=0,a=n;o<a.length;o++){var c=a[o];c.hasAttribute("data-lazyincluded-by-ocm")||c.hasAttribute("data-lazyloaded-by-ocm")||!1!==this.lazyIncludeIt(c)&&c.setAttribute("data-lazyincluded-by-ocm","")}void 0!==(t=Array.from(this.utils.window.document.querySelectorAll("div[data-lazyincluded-by-ocm]")))[0]&&!1!==this.lazyLoadIt(t[0])&&this.combust(t)}},{key:"lazyIncludeIt",value:function(t){var e;if("none"===t.style.display?(t.style.display="block",e=t.getBoundingClientRect(),t.style.display="none"):e=t.getBoundingClientRect(),"down"===this.scroll_direction){if(e.top>=0&&e.top<=this.utils.screen_height+this.ll_config.include_offset)return e.top}else if("up"===this.scroll_direction&&e.bottom>=-1*this.ll_config.include_offset)return e.top;return!1}},{key:"lazyLoadIt",value:function(t){var e;"none"===t.style.display?(t.style.display="block",e=t.getBoundingClientRect(),t.style.display="none"):e=t.getBoundingClientRect();var i=this.ll_config.load_offset,n=this.ll_config.ad_load_offsets.filter((function(e){return e.path===t.getAttribute("data-oau-code")}));if(n.hasOwnProperty("offset")&&(i=n.offset),"down"===this.scroll_direction){if(e.top>=0&&e.top<=this.utils.screen_height+i)return e.top}else if("up"===this.scroll_direction&&e.bottom>=-1*i)return e.top;return!1}}]),t}()},function(t,e,i){var n=i(5),r=i(3),s=i(4),o=i(0),a=i(1),u=i(2);function c(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d="[OCM][Sticky] ";t.exports=function(){"use strict";function t(e,i){o(this,t),u(this,"utils",void 0),u(this,"config",void 0),u(this,"sticky_config",void 0),u(this,"is_mobile",void 0),u(this,"counter",void 0),u(this,"skin_slot",void 0),u(this,"skin_empty",void 0),this.utils=e,this.config=i,this.sticky_config=i.services.sticky,this.counter=0,this.skin_slot=null,this.skin_empty=!0}var e,i,l,h,f;return a(t,[{key:"run",value:(f=s(r.mark((function t(){var e,i,n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(this.config.debug||this.sticky_config.debug)&&console.log(d+"Running..."),t.next=3,this.utils.gptPubAdsReady();case 3:e=c(this.sticky_config.ads),t.prev=4,e.s();case 6:if((i=e.n()).done){t.next=23;break}if((n=i.value).active){t.next=10;break}return t.abrupt("continue",21);case 10:if(this.deviceAllowed(n.conditions)){t.next=13;break}return(this.config.debug||this.sticky_config.debug)&&console.log(d+"Ad ("+n.code+") not meant to run in current device"),t.abrupt("continue",21);case 13:if(this.utils.allowPageType(n.conditions.page_types)){t.next=16;break}return(this.config.debug||this.sticky_config.debug)&&console.log(d+"Ad ("+n.code+") not meant to run in current page type"),t.abrupt("continue",21);case 16:if(!this.isExcluded(n.conditions.exclude_urls)){t.next=19;break}return(this.config.debug||this.sticky_config.debug)&&console.log(d+"Ad ("+n.code+"). Inside excluded url. Terminating service."),t.abrupt("continue",21);case 19:return t.next=21,this.structure(n);case 21:t.next=6;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(4),e.e(t.t0);case 28:return t.prev=28,e.f(),t.finish(28);case 31:case"end":return t.stop()}}),t,this,[[4,25,28,31]])}))),function(){return f.apply(this,arguments)})},{key:"determineSkinExists",value:(h=s(r.mark((function t(){var e=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){(e.config.debug||e.sticky_config.debug)&&console.log(d+"Checking if skin ad exists"),t(e.utils.window.googletag.pubads().getSlots().filter((function(t){return!(!t.getSlotElementId().includes("skin")&&!t.getAdUnitPath().includes("skin")||(e.skin_slot=t,0))})).length>0)})));case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"checkSkinEmpty",value:(l=s(r.mark((function t(){var e,i=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(this.config.debug||this.sticky_config.debug)&&console.log(d+"Since skin exists ## "+this.skin_slot.getAdUnitPath()+" ##, checking if it comes up empty"),e=new Promise((function(t,e){i.utils.window.googletag.cmd.push((function(){googletag.pubads().addEventListener("slotRenderEnded",(function(e){e.slot.getAdUnitPath()===i.skin_slot.getAdUnitPath()&&((i.config.debug||i.sticky_config.debug)&&console.log(d+"Skin isEmpty = "+e.isEmpty),function(e){t(e)}(e.isEmpty))}))}))})),t.next=4,e;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"structure",value:(i=s(r.mark((function t(e){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.counter++,e.bg_color||(e.bg_color="rgba(27,27,27,.75)"),t.t0=e.position,t.next="left"===t.t0?5:"right"===t.t0?9:"top"===t.t0?13:"bottom"===t.t0?16:19;break;case 5:return this.leftStyles(),t.next=8,this.side(e);case 8:case 12:case 19:return t.abrupt("break",20);case 9:return this.rightStyles(),t.next=12,this.side(e);case 13:return this.topStyles(e.bg_color),this.topBottom(e),t.abrupt("break",20);case 16:return this.bottomStyles(e.bg_color),this.topBottom(e),t.abrupt("break",20);case 20:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"side",value:(e=s(r.mark((function t(e){var i,n,o,a,u,c,l,h,f,g,p,m=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.styleForXButton(),i=!0,a=this.utils.window.document.querySelectorAll("body *")[0],(u=document.createElement("div")).classList.add("ocm-sticky",e.position),(c=document.createElement("div")).classList.add("ocm-sticky-container"),(l=document.createElement("div")).classList.add("ocm-sticky-content"),(h=document.createElement("div")).id="ocm_sticky_"+this.counter,h.classList.add("ocm-sticky-ad"),(f=document.createElement("script")).text="googletag.cmd.push(function() {try { var "+h.id+'_slot = googletag.defineSlot("'+e.code+'", '+e.sizes+', "'+h.id+'");if ('+h.id+"_slot) {   "+h.id+'_slot.addService(googletag.pubads());  googletag.display("'+h.id+'");}} catch(err) {}',!this.config.services.lazyload.active&&this.config.services.header_bidding.active&&(f.text+="if (window.OCM.init_ad_server_set) { googletag.pubads().refresh(["+h.id+"_slot]); }"),f.text+="})",this.config.services.lazyload.active&&(this.config.services.lazyload.ad_load_offsets.filter((function(t){return t.path===e.code&&-1===t.offset})).length||(h.setAttribute("data-lazyincluded-by-ocm",""),h.setAttribute("data-oau-code",e.code))),(g=document.createElement("div")).classList.add("ocm-close-icon-container"),(p=document.createElement("button")).classList.add("ocm-button-close"),this.utils.is_mobile||(g.addEventListener("mouseenter",(function(){p.classList.add("ocm-button-close-hover")})),g.addEventListener("mouseleave",(function(){p.classList.remove("ocm-button-close-hover")}))),!e.conditions.hide_if_skin){t.next=27;break}return t.next=25,this.determineSkinExists().then(function(){var t=s(r.mark((function t(e){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return t.next=3,m.checkSkinEmpty();case 3:m.skin_empty=t.sent,m.skin_empty&&(g.append(p),l.append(h),c.append(l),h.append(f),u.append(c),a.parentNode.insertBefore(u,a)),t.next=13;break;case 7:g.append(p),l.append(h),c.append(l),h.append(f),u.append(c),a.parentNode.insertBefore(u,a);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 25:t.next=33;break;case 27:g.append(p),l.append(h),c.append(l),h.append(f),u.append(c),a.parentNode.insertBefore(u,a);case 33:this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",(function(t){if((m.config.debug||m.sticky_config.debug)&&console.log(d+"Slot render ended. Event: ",t," condition: ",!t.isEmpty&&t.slot.getSlotElementId()===h.id),!t.isEmpty&&t.slot.getSlotElementId()===h.id){if(n=t.size[0],1===(o=t.size[1])&&1===n)return;u.style.width=String(n)+"px",u.style.height=String(o)+"px",u.style.marginTop="-"+String(o/2)+"px",l.style.width=String(n)+"px",l.style.height=String(o)+"px",e.conditions.retract&&(u.addEventListener("mouseenter",(function(t){i||("left"===e.position?u.style.marginLeft="0px":"right"===e.position&&(u.style.marginRight="0px"),i=!0,t.stopPropagation())})),u.addEventListener("mouseleave",(function(t){i&&(setTimeout((function(){"left"===e.position?u.style.marginLeft="-"+String(Math.round(.33*n))+"px":"right"===e.position&&(u.style.marginRight="-"+String(Math.round(.33*n))+"px"),i=!1}),1e3),t.stopPropagation())})))}})),this.utils.window.googletag.pubads().addEventListener("impressionViewable",(function(t){(m.config.debug||m.sticky_config.debug)&&console.log(d+"Event after impression viewable "+t+" event condition "+t.slot.getSlotElementId()===h.id),t.slot.getSlotElementId()===h.id&&(c&&c.childNodes&&Array.from(c.childNodes).find((function(t){return"ocm-close-icon-container"===t.className}))||c.append(g),p.addEventListener("click",(function(t){"left"===e.position?u.style.marginLeft="-"+String(n)+"px":"right"===e.position&&(u.style.marginRight="-"+String(n)+"px"),setTimeout((function(){u.remove()}),500),t.stopPropagation()})),e.conditions.retract&&1!==n&&1!==o&&setTimeout((function(){"left"===e.position?u.style.marginLeft="-"+String(Math.round(.33*n))+"px":"right"===e.position&&(u.style.marginRight="-"+String(Math.round(.33*n))+"px"),i=!1}),1e3))}));case 35:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"topBottom",value:function(t){this.styleForXButton();var e=this.utils.window.document.querySelectorAll("body *")[0],i=document.createElement("div");i.classList.add("ocm-sticky",t.position);var n=document.createElement("div");n.id="ocm_sticky_"+this.counter;var r=document.createElement("script");r.text="googletag.cmd.push(function() {  try { var "+n.id+'_slot = googletag.defineSlot("'+t.code+'", '+t.sizes+', "'+n.id+'");  if ('+n.id+"_slot) {     "+n.id+'_slot.addService(googletag.pubads());    googletag.display("'+n.id+'");  }} catch(err) {}',!this.config.services.lazyload.active&&this.config.services.header_bidding.active&&(r.text+="if (window.OCM.init_ad_server_set) { googletag.pubads().refresh(["+n.id+"_slot]); }"),r.text+="})",this.config.services.lazyload.active&&(this.config.services.lazyload.ad_load_offsets.filter((function(e){return e.path===t.code&&-1===e.offset})).length||(n.setAttribute("data-lazyincluded-by-ocm",""),n.setAttribute("data-oau-code",t.code)));var s=document.createElement("div");s.classList.add("close-icon-container");var o=document.createElement("button");o.classList.add("ocm-button-close"),this.utils.is_mobile||(s.addEventListener("mouseenter",(function(){o.classList.add("ocm-button-close-hover")})),s.addEventListener("mouseleave",(function(){o.classList.remove("ocm-button-close-hover")}))),s.append(o),i.append(s),n.append(r),i.append(n),e.parentNode.insertBefore(i,e),this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",(function(e){if(!e.isEmpty&&e.slot.getSlotElementId()===n.id){i.classList.add("reveal-"+t.position);var r=e.size[0],o=e.size[1];"desktop"===t.conditions.device&&(r+=6,o+=6,["top","bottom"].includes(t.position)||(i.style.width=String(r)+"px",i.style.height=String(o)+"px")),setTimeout((function(){s.addEventListener("click",(function(){i.classList.remove("reveal-"+t.position)}))}),2e3)}}))}},{key:"styleForXButton",value:function(){this.utils.loadStyle("          .ocm-button-close{\n               padding: 0 !important;\n               border-radius: 4px !important;\n               display: block !important;\n               position: relative !important;\n               width: 30px !important;\n               height: 30px !important;\n               background: #fff !important;\n               color: #4a968e !important;\n               border: 1px solid #106e89 !important;\n               outline: none !important;\n               cursor: pointer !important;\n           }\n\n           .ocm-button-close-hover:before{\n                   width: 100% !important;\n                   box-sizing: border-box !important;\n                   margin:0 !important;\n                   padding:0 !important;\n            }\n\n            .ocm-button-close-hover:after{\n                   width: 100% !important;\n                   box-sizing: border-box !important;\n                   margin:0 !important;\n                   padding:0 !important;\n            }\n\n            .ocm-button-close:before{\n               box-sizing: border-box !important;\n               content: '' !important;\n               border-radius: 13px !important;\n               position: absolute !important;\n               left: 50% !important;\n               top: 50% !important;\n               width: 0;\n               margin:0 !important;\n               padding:0 !important;\n               height: 1px !important;\n               border-left: 8px solid currentColor !important;\n               border-right: 8px solid currentColor !important;\n               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;\n               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;\n           }\n\n           .ocm-button-close:after{\n               box-sizing: border-box !important;\n               content: '' !important;\n               border-radius: 13px !important;\n               position: absolute !important;\n               left: 50% !important;\n               top: 50% !important;\n               width: 0;\n               margin:0 !important;\n               padding:0 !important;\n               height: 1px !important;\n               border-left: 8px solid currentColor !important;\n               border-right: 8px solid currentColor !important;\n               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;\n               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;\n           }")}},{key:"leftStyles",value:function(){this.utils.loadStyle("            .ocm-sticky.left {\n                z-index: 2147483641;\n                display: block;\n                position: fixed;\n                top:50%;\n                left:0px;\n                -webkit-transition: margin-left 0.5s ease-in-out !important;\n                transition: margin-left 0.5s ease-in-out !important;\n            }\n            .ocm-sticky.left .ocm-sticky-container {\n                z-index: 2147483643;\n                background-color: #fff;\n                border: 0 solid #afaeae;\n                box-sizing: content-box;\n                color: #000;\n                height: 100%;\n                overflow: visible;\n                position: absolute;\n                text-align: left;\n                visibility: visible;\n            }\n            .ocm-sticky.left .ocm-sticky-container .ocm-sticky-content {\n              overflow: hidden;\n              visibility: visible;\n            }\n            .ocm-sticky.left .ocm-sticky-container .ocm-sticky-content .ocm-sticky-ad {\n              border: 0;\n              height:100%;\n              visibility: visible;\n              width:100%;\n            }\n            .ocm-sticky.left .ocm-sticky-container .ocm-close-icon-container {\n              z-index: 2147483645;\n              cursor: pointer;\n              display: block;\n              height: 31px;\n              left: 3px;\n              position: absolute;\n              top: -35px;\n              width: 32px;\n            }\n            .ocm-sticky.left .ocm-sticky-container .ocm-close-icon-container .ocm-close-icon .progress {\n                opacity: 0;\n                stroke-dasharray: 0,120;\n                transition: 0.5s cubic-bezier(0.165, 0.775, 0.145, 1.020);\n            }")}},{key:"rightStyles",value:function(){this.utils.loadStyle("            .ocm-sticky.right {\n                z-index: 2147483641;\n                display: block;\n                position: fixed;\n                top:50%;\n                right:0px;\n                -webkit-transition: margin-right 0.5s ease-in-out !important;\n                transition: margin-right 0.5s ease-in-out !important;\n            }\n            .ocm-sticky.right .ocm-sticky-container {\n                z-index: 2147483643;\n                background-color: #fff;\n                border: 0 solid #afaeae;\n                box-sizing: content-box;\n                color: #000;\n                height: 100%;\n                overflow: visible;\n                position: absolute;\n                text-align: left;\n                visibility: visible;\n            }\n            .ocm-sticky.right .ocm-sticky-container .ocm-sticky-content {\n              overflow: hidden;\n              visibility: visible;\n            }\n            .ocm-sticky.right .ocm-sticky-container .ocm-sticky-content .ocm-sticky-ad {\n              border: 0;\n              height:100%;\n              visibility: visible;\n              width:100%;\n            }\n            .ocm-sticky.right .ocm-sticky-container .ocm-close-icon-container {\n              z-index: 2147483645;\n              cursor: pointer;\n              display: block;\n              height: 32px;\n              right: 3px;\n              position: absolute;\n              top: -35px;\n              width: 32px;\n            }\n            .ocm-sticky.right .ocm-sticky-container .ocm-close-icon-container .ocm-close-icon .progress {\n                opacity: 0;\n                stroke-dasharray: 0,120;\n                transition: 0.5s cubic-bezier(0.165, 0.775, 0.145, 1.020);\n            }")}},{key:"topStyles",value:function(t){this.utils.loadStyle("          .ocm-sticky.top {\n            position: fixed;\n            background-color:"+t+";\n            width: 100%;\n            padding: 8px 0;\n            z-index: 2147483641;\n            top: -1000px;\n            left: 0;\n            right: 0;\n            transition: top .5s ease-in-out !important;\n            text-align: center;\n          }\n\n          .ocm-sticky.reveal-top {\n            top: 0;\n          }\n\n          .ocm-sticky.reveal-top div[data-oau-code] {\n            margin: 0 auto;\n          }\n\n          .ocm-sticky.top .close-icon-container {\n            position: absolute;\n            bottom: -35px;\n            right: 4px;\n            z-index: 10;\n          }\n\n          .ocm-sticky.top .close-icon {\n            display: inline-block;\n            height: 32px;\n            width: 32px;\n            cursor: pointer;\n            stroke: #fff;\n          }\n\n          .ocm-sticky.top .progress {\n            opacity: 0;\n            stroke-dasharray: 0, 120;\n          }")}},{key:"bottomStyles",value:function(t){this.utils.loadStyle("          .ocm-sticky.bottom {\n            position: fixed;\n            background-color:"+t+";\n            width: 100%;\n            padding: 8px 0;\n            z-index: 2147483641;\n            bottom: -1000px;\n            left: 0px;\n            right: 0px;\n            transition: bottom .5s ease-in-out !important;\n            text-align: center;\n          }\n\n          .ocm-sticky.reveal-bottom {\n            bottom: 0px;\n          }\n          .ocm-sticky.reveal-bottom div[data-oau-code] {            margin: 0 auto;          }\n\n          .ocm-sticky.bottom .close-icon-container {\n            position: absolute;\n            top: -35px;\n            right: 4px;\n            z-index: 10;\n          }\n\n          .ocm-sticky.bottom .close-icon {\n            display: inline-block;\n            height: 32px;\n            width: 32px;\n            cursor: pointer;\n            stroke: #fff;\n          }\n\n          .ocm-sticky.bottom .progress {\n            opacity: 0;\n            stroke-dasharray: 0, 120;\n          }")}},{key:"deviceAllowed",value:function(t){return this.utils.is_mobile&&"mobile"===t.device||!this.utils.is_mobile&&"desktop"===t.device&&this.utils.screen_width>=t.min_width*this.utils.window.devicePixelRatio}},{key:"isExcluded",value:function(t){var e=this;return!(void 0===n(t)||!t.length||!t.find((function(t){return e.utils.window.location.href.includes(t)})))}}]),t}()},function(t,e,i){var n=i(3),r=i(4),s=i(0),o=i(1),a=i(2),u="[OCM][StoryTeller] ";t.exports=function(){"use strict";function t(e,i){s(this,t),a(this,"utils",void 0),a(this,"config",void 0),a(this,"st_config",void 0),a(this,"conditions",void 0),a(this,"stickyConfig",void 0),a(this,"selector",void 0),this.utils=e,this.config=i,this.st_config=i.services.story_teller,this.conditions=e.is_mobile?this.st_config.mobile.conditions:this.st_config.desktop.conditions,this.stickyConfig=e.is_mobile?this.st_config.mobile.sticky:this.st_config.desktop.sticky,this.selector=null}return o(t,[{key:"run",value:function(){var t=this;(this.config.debug||this.st_config.debug)&&console.log(u+"Running..."),this.setGlobals(),this.loadIma().then((function(){t.utils.allowPageType(t.conditions.page_types)?t.getStories().then((function(){var e=t.createWrapper(),i=t.utils.determineInjectionTarget(t.conditions.selector,t.conditions.position,t.conditions.count_gt,t.conditions.words,t.conditions.words_gt);i?e&&(t.utils.injectTag(i,e,t.conditions.place),t.populateWrapper(e)):(t.config.debug||t.st_config.debug)&&console.info(u+"selector NOT found, stopping process",i)})).catch((function(){t.utils.window.OCM.ST.stories=null,t.utils.window.OCM.ST.video_url="//cdn.orangeclickmedia.com/videos/clouds-720.mp4",t.utils.window.OCM.ST.source="video"})):(t.config.debug||t.st_config.debug)&&console.log(u+"Page type not allowed, terminating process",t.conditions.page_types)}))}},{key:"getStories",value:function(){var t=this;return new Promise((function(e,i){if("adsquirrel"===t.st_config.source)t.fetchStoriesFromAdsquirrel().then((function(){e()})).catch((function(){(t.config.debug||t.st_config.debug)&&console.log(u+"Failed fetchStoriesFromAdsquirrel, falling back to fetchStoriesFromRss"),t.fetchStoriesFromRss().then((function(){e()})).catch((function(){(t.config.debug||t.st_config.debug)&&console.log(u+"Failed fetchStoriesFromRss, falling back to cloud video"),i()}))}));else if("rss"===t.st_config.source){if("video"===t.st_config.stories_type)return void e();t.fetchStoriesFromRss().then((function(){e()})).catch((function(){(t.config.debug||t.st_config.debug)&&console.log(u+"Failed fetchStoriesFromRss, falling back to cloud video"),i()}))}else i()}))}},{key:"fetchStoriesFromRss",value:function(){var t=this;return new Promise(function(){var e=r(n.mark((function e(i,r){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.st_config.rss_url&&""!==t.st_config.rss_url||r(),t.utils.parseRss(t.st_config.rss_url).then((function(e){t.utils.window.OCM.ST.stories=[],e.forEach((function(e){(t.config.debug||t.st_config.debug)&&console.log(u+"Pushing to stories [",e.title,e.link,e.image,"]"),t.utils.window.OCM.ST.stories.push({url:e.link,title:e.title,img:null==e?void 0:e.image})})),i()})).catch((function(t){console.error(t),r()}));case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}())}},{key:"fetchStoriesFromAdsquirrel",value:function(){var t=this;return new Promise((function(e,i){t.utils.waitFor("ADSQ",(function(){if(null===t.utils.window.ADSQ.response||null===t.utils.window.ADSQ.response.classified_as)return(t.config.debug||t.st_config.debug)&&console.warn(u+"this.utils.window.ADSQ.response was null, rejecting fetchStoriesFromAdsquirrel"),void i();var n="";n+="hostname="+t.utils.window.location.host+"&",n=(n+="classification="+encodeURIComponent(t.utils.window.ADSQ.response.classified_as[0].split("/")[0])+"&").substring(0,n.length-1),n=btoa(n),fetch("https://api.adsquirrel.ai/stories?q="+n,{headers:{Accept:"application/json","Content-Type":"text/plain"},method:"GET"}).then((function(t){return t.json()})).then((function(n){t.utils.window.OCM.ST.stories=null==n?void 0:n.filter((function(e){return e.url!==t.utils.window.location.protocol+"//"+t.utils.window.location.host+t.utils.window.location.pathname})),void 0===t.utils.window.OCM.ST.stories&&((t.config.debug||t.st_config.debug)&&console.warn(u+"this.utils.window.OCM.ST.stories was undefined, rejecting fetchStoriesFromAdsquirrel"),i()),(t.config.debug||t.st_config.debug)&&console.log(u+"this.utils.window.OCM.ST.stories is gg, resolving fetchStoriesFromAdsquirrel"),e()})).catch((function(){(t.config.debug||t.st_config.debug)&&console.warn(u+"Could not fetch stories from api, rejecting fetchStoriesFromAdsquirrel"),i()}))}),100,(function(){(t.config.debug||t.st_config.debug)&&console.warn(u+"ADSQ response took too long to respond, rejecting fetchStoriesFromAdsquirrel"),i()}))}))}},{key:"setGlobals",value:function(){(this.config.debug||this.st_config.debug)&&console.log(u+"Setting globals"),this.utils.window.OCM.ST={ad_tag_url:this.st_config.ad_tag_url,delay_first_ad_request:this.st_config.delay_first_ad_request,load_offset:this.st_config.load_offset,source:this.st_config.source,rss_url:this.st_config.rss_url,stories_type:this.st_config.stories_type,video_url:this.st_config.video_url,captions_url:this.st_config.captions_url,debug:this.config.debug||this.st_config.debug,color:this.st_config.color,link_target:this.st_config.link_target,link_text:this.st_config.link_text,branding:this.st_config.branding,sticky:this.stickyConfig,correlator:(new Date).getTime(),device:this.utils.is_mobile?"mobile":"desktop"}}},{key:"createWrapper",value:function(){(this.config.debug||this.st_config.debug)&&console.log(u+"Creating wrapper div#ocm-st"),this.utils.loadStyle("#ocm-st { max-width:640px; display:block; margin:0 auto 1rem; position: relative; }");var t=this.utils.window.document.createElement("div");t.id="ocm-st";var e=this.utils.is_mobile?this.st_config.mobile.styles:this.st_config.desktop.styles,i=this.utils.is_mobile?this.st_config.mobile.classes:this.st_config.desktop.classes;return e&&""!==e&&(t.style=e),i&&""!==i&&t.setAttribute("class",i),t}},{key:"loadIma",value:function(){var t=this;return new Promise((function(e,i){try{var n=t.utils.window.document.getElementsByTagName("script")[0],r=t.utils.window.document.createElement("script");r.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",n.parentNode.insertBefore(r,n),r.onload=function(){e()}}catch(t){i()}}))}},{key:"populateWrapper",value:function(t){(this.config.debug||this.st_config.debug)&&console.log(u+"Populating #ocm-st");var e=this.utils.window.document.createElement("script");e.src="//cdn.orangeclickmedia.com/tech/libs/deckard-cain.js",t.append(e)}}]),t}()},function(t,e,i){var n=i(0),r=i(1),s=i(2);function o(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){u=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(u)throw s}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var u="[OCM][InstreamHB] ";t.exports=function(){"use strict";function t(e,i){n(this,t),s(this,"adunits",void 0),s(this,"utils",void 0),s(this,"config",void 0),s(this,"is_config",void 0),s(this,"videoGranularity",void 0),s(this,"oldGranularity",void 0),s(this,"conditions",void 0),s(this,"stickyConfig",void 0),this.utils=e,this.config=i,this.is_config=i.services.instream_hb,this.conditions=e.is_mobile?this.is_config.mobile.conditions:this.is_config.desktop.conditions,this.stickyConfig=e.is_mobile?this.is_config.mobile.sticky:this.is_config.desktop.sticky,this.adunits=[],this.videoGranularity={buckets:[{precision:2,min:.01,max:9,increment:.01},{precision:2,max:54,increment:.1}]}}return r(t,[{key:"run",value:function(){var t=this;if((this.config.debug||this.is_config.debug)&&console.log(u+"Running..."),this.utils.allowPageType(this.conditions.page_types)){this.setGlobals();var e=this.injectWrapper();this.init(),IntersectionObserver.prototype.POLL_INTERVAL=100;new IntersectionObserver((function(e,i){e.forEach((function(e){void 0===e.isVisible&&(e.isVisible=!0),e.isIntersecting&&(t.loadIma().then((function(){t.auction()})),i.unobserve(e.target))}))}),{root:null,rootMargin:"100px 0px"}).observe(e)}else(this.config.debug||this.is_config.debug)&&console.log(u+"Terminating due to page type")}},{key:"init",value:function(){(this.config.debug||this.is_config.debug)&&console.log(u+"Loading ocmpb_instream lib..."),this.utils.loadScript("https://cdn.orangeclickmedia.com/tech/libs/ocmpb_instream.js","text/javascript",1),this.prebidConfig(),this.buildAdUnits()}},{key:"buildAdUnits",value:function(){(this.config.debug||this.is_config.debug)&&console.log(u+"Building ad units...",this.is_config.adunits);var t,e=o(this.is_config.adunits);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.adunits.push({code:i.code,mediaTypes:{video:{context:"instream",playerSize:[[640,360]],mimes:["video/mp4","video/x-ms-wmv","video/3gpp","video/ogg","video/x-msvideo","video/mpeg","video/mpg","video/webm","video/m2t","video/3gpp2"],protocols:[1,2,3,4,5,6,7,8],playbackmethod:[1,2,5,6],linearity:1,startdelay:0,skip:1}},bids:i.bids})}}catch(t){e.e(t)}finally{e.f()}}},{key:"auction",value:function(){var t=this;(this.config.debug||this.is_config.debug)&&console.log(u+"Running HB auction..."),this.utils.window.ocmispbjs.que.push((function(){t.utils.window.ocmispbjs.addAdUnits(t.adunits),t.utils.window.ocmispbjs.requestBids({bidsBackHandler:function(e,i,n){t.adunits.forEach((function(e){var i=t.utils.window.ocmispbjs.adServers.dfp.buildVideoUrl({adUnit:e.code,params:{iu:e.code,sz:"1x1|300x169|400x300|640x360|640x480|854x480|1280x720|1920x1080",vad_type:"linear",unviewed_position_start:1,env:"vp",output:"vast"}});t.utils.window.OCM.ISHB.vast_tag_urls.push(i)})),t.utils.window.OCM.ISHB.vast_tag_urls.length?((t.config.debug||t.is_config.debug)&&(console.log(u+"Vast tags:",t.utils.window.OCM.ISHB.vast_tag_urls),console.log(u+"invoking video player")),t.invokeVideoPlayer()):"function"==typeof t.utils.window.OCM.oipb&&((t.config.debug||t.is_config.debug)&&console.log(u+"Empty vast tags, calling instreamHB pb"),t.utils.window.OCM.oipb())}})}))}},{key:"injectWrapper",value:function(){(this.config.debug||this.is_config.debug)&&console.log(u+"Injecting #ocm-ois"),this.utils.loadStyle("#ocm-ois { max-width:640px; display:block; margin:0 auto 1rem; position: relative; }");var t=this.utils.determineInjectionTarget(this.conditions.selector,this.conditions.position,this.conditions.count_gt,this.conditions.words,this.conditions.words_gt),e=this.utils.window.document.createElement("div");e.id="ocm-ois";var i=this.utils.is_mobile?this.is_config.mobile.styles:this.is_config.desktop.styles,n=this.utils.is_mobile?this.is_config.mobile.classes:this.is_config.desktop.classes;return i&&""!==i&&(e.style=i),n&&""!==n&&e.setAttribute("class",n),this.utils.injectTag(t,e,this.conditions.place)}},{key:"invokeVideoPlayer",value:function(){this.utils.loadScript("https://cdn.orangeclickmedia.com/tech/libs/ocm-oishb.js","text/javascript")}},{key:"loadIma",value:function(){var t=this;return new Promise((function(e,i){try{var n=t.utils.window.document.getElementsByTagName("script")[0],r=t.utils.window.document.createElement("script");r.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",n.parentNode.insertBefore(r,n),r.onload=function(){e()}}catch(t){i()}}))}},{key:"setGlobals",value:function(){(this.config.debug||this.is_config.debug)&&console.log(u+"Setting globals"),this.utils.window.OCM.ISHB={video_url:this.is_config.video_url,debug:this.config.debug||this.is_config.debug,color:this.is_config.color,sticky:this.stickyConfig,dispose_after_ad:this.is_config.dispose_after_ad,device:this.utils.is_mobile?"mobile":"desktop",vast_tag_urls:[]}}},{key:"prebidConfig",value:function(){var t=this;(this.config.debug||this.is_config.debug)&&console.log(u+"Setting up prebid configuration"),this.utils.window.ocmispbjs=this.utils.window.ocmispbjs||{que:[]},this.utils.window.ocmispbjs.que.push((function(){(void 0===t.config.uses_cmp||t.config.uses_cmp)&&t.utils.window.ocmispbjs.setConfig({consentManagement:{gdpr:{cmpApi:"iab",timeout:t.config.services.header_bidding.bidderTimeout+2e4,defaultGdprScope:!0,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0}]},usp:{cmpApi:"iab",timeout:100}}}),t.utils.window.ocmispbjs.setConfig({cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},priceGranularity:t.videoGranularity,schain:t.config.schain,currency:{adServerCurrency:t.config.services.header_bidding.adServerCurrency,conversionRateFile:"https://cdn.orangeclickmedia.com/tech/libs/latest_currencies.txt"},userSync:{syncsPerBidder:5,syncDelay:2500,filterSettings:{iframe:{bidders:"*",filter:"include"}},userIds:[{name:"lotamePanoramaId"},{name:"identityLink",params:{pid:"1258"},storage:{type:"html5",name:"idl_env",expires:30,refreshInSeconds:1800}},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=pubmatic&fmt=json",type:"html5",name:"_unifiedid",expires:30}},{name:"criteo"},{name:"id5Id",params:{partner:347},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}},{name:"sharedId",storage:{type:"html5",name:"_pubcid",expires:365}}]},maxRequestsPerOrigin:4,bidderTimeout:t.config.services.header_bidding.bidderTimeout,timeoutBuffer:400,useBidCache:!0,suppressEmptyKeys:!0,enableSendAllBids:!1,targetingControls:{alwaysIncludeDeals:!0},pageUrl:t.utils.window.location.protocol+"//"+t.utils.window.location.hostname,ix:{timeout:2e3},rubicon:{singleRequest:!0}});[{bidder:"pubmatic",domain:"pubmatic.com",id:"157884"},{bidder:"appnexus",domain:"xandr.com",id:"10452"},{bidder:"adform",domain:"adform.com",id:"2656"},{bidder:"openx",domain:"openx.com",id:"540861995"},{bidder:"rubicon",domain:"rubiconproject.com",id:"20086"},{bidder:"onetag",domain:"onetag.com",id:"5e5558fade26a9e"},{bidder:"criteo",domain:"criteo.com",id:"B-060738"},{bidder:"teads",domain:"teads.tv",id:"16578"},{bidder:"adyoulike",domain:"adyoulike.com",id:"7ddaba905b34014f9bd3fe2c57d6d46e"},{bidder:"gumgum",domain:"gumgum.com",id:"14064"},{bidder:"medianet",domain:"media.net",id:"8CU32RQ72"},{bidder:"triplelift",domain:"triplelift.com",id:"9262"},{bidder:"unruly",domain:"unrulygroup.com",id:"6111915185540403805"},{bidder:"yahoossp",domain:"yahoo.com",id:"59049"}].forEach((function(e){t.utils.window.ocmispbjs.setBidderConfig({bidders:[e.bidder],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[t.config.schain.config.nodes[0],{asi:"".concat(e.domain),sid:"".concat(e.id),hp:1}]}}}})})),t.utils.window.ocmispbjs.bidderSettings=t.setupBidderSettings()}))}},{key:"setupBidderSettings",value:function(){var t=this;return(this.config.debug||this.is_config.debug)&&console.log(u+"Setting up adserverTargeting & bidder settings"),{standard:{suppressEmptyKeys:!0,adserverTargeting:[{key:"infi_article_count",val:function(e){return t.utils.window.OCM.infi_article_count.toString()}},{key:"hb_bidder",val:function(t){return t.bidderCode}},{key:"hb_adid",val:function(t){return t.adId}},{key:"hb_pb",val:function(t){return t.pbCg}},{key:"hb_size",val:function(t){return t.getSize()}},{key:"hb_format",val:function(t){return t.mediaType}},{key:"hb_cpm",val:function(t){return t.cpm}},{key:"hb_deal",val:function(t){return t.dealId}},{key:"hb_source",val:function(t){return t.source}},{key:"hb_sf",val:function(e){var i="video"===e.mediaType,n=!1;return["sportdog.gr","startup.gr","provocateur.gr","newpost.gr"].includes(t.config.domain)&&(n="openx"===e.bidderCode&&["/15637987/sportdog.gr/inline1","/21748129265/startup.gr/billboard1","/15637987/provoc_right_1","/15637987/newpost_right_1"].includes(e.adUnitCode)),n||i||["justpremium","teads","gumgum","triplelift","adhash","engageya"].includes(e.bidderCode)?"false":"true"}},{key:"hb_cache_id",val:function(t){return t.videoCacheKey}},{key:"hb_uuid",val:function(t){return t.videoCacheKey}}]}}}}]),t}()},function(t,e,i){var n=i(0),r=i(1),s=i(2),o="[OCM][Instream] ";t.exports=function(){"use strict";function t(e,i){n(this,t),s(this,"utils",void 0),s(this,"config",void 0),s(this,"is_config",void 0),s(this,"conditions",void 0),s(this,"stickyConfig",void 0),s(this,"selector",void 0),this.utils=e,this.config=i,this.is_config=i.services.instream,this.conditions=e.is_mobile?this.is_config.mobile.conditions:this.is_config.desktop.conditions,this.stickyConfig=e.is_mobile?this.is_config.mobile.sticky:this.is_config.desktop.sticky,this.selector=null}return r(t,[{key:"run",value:function(){var t=this;(this.config.debug||this.is_config.debug)&&console.log(o+"Running..."),this.utils.allowPageType(this.conditions.page_types)?this.loadIma().then((function(){var e=t.createWrapper(),i=t.utils.determineInjectionTarget(t.conditions.selector,t.conditions.position,t.conditions.count_gt,t.conditions.words,t.conditions.words_gt);if(i){if(e){t.utils.injectTag(i,e,t.conditions.place),IntersectionObserver.prototype.POLL_INTERVAL=100;new IntersectionObserver((function(e,i){e.forEach((function(e){void 0===e.isVisible&&(e.isVisible=!0),e.isIntersecting&&(t.populateWrapper(e.target),i.unobserve(e.target))}))}),{root:null,rootMargin:"100px 0px"}).observe(e)}t.setGlobals()}else(t.config.debug||t.is_config.debug)&&console.info(o+"selector NOT found, stopping process",i)})):(this.config.debug||this.is_config.debug)&&console.log(o+"Page type not allowed, terminating process",this.conditions.page_types)}},{key:"createWrapper",value:function(){(this.config.debug||this.is_config.debug)&&console.log(o+"Creating wrapper div#ocm-ois"),this.utils.loadStyle("#ocm-ois { max-width:640px; display:block; margin:0 auto 1rem; position: relative; }");var t=this.utils.window.document.createElement("div");t.id="ocm-ois";var e=this.utils.is_mobile?this.is_config.mobile.styles:this.is_config.desktop.styles,i=this.utils.is_mobile?this.is_config.mobile.classes:this.is_config.desktop.classes;return e&&""!==e&&(t.style=e),i&&""!==i&&t.setAttribute("class",i),t}},{key:"populateWrapper",value:function(t){(this.config.debug||this.is_config.debug)&&console.log(o+"Populating #ocm-ois");var e=this.utils.window.document.createElement("script");e.src="//cdn.orangeclickmedia.com/tech/libs/ocm-ois.js",t.append(e)}},{key:"loadIma",value:function(){var t=this;return new Promise((function(e,i){try{var n=t.utils.window.document.getElementsByTagName("script")[0],r=t.utils.window.document.createElement("script");r.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",n.parentNode.insertBefore(r,n),r.onload=function(){e()}}catch(t){i()}}))}},{key:"setGlobals",value:function(){(this.config.debug||this.is_config.debug)&&console.log(o+"Setting globals"),this.utils.window.OCM.IS={debug:this.config.debug||this.is_config.debug,ad_tag_url:this.is_config.ad_tag_url,video_url:this.is_config.video_url,color:this.is_config.color,sticky:this.stickyConfig,dispose_after_ad:this.is_config.dispose_after_ad,device:this.utils.is_mobile?"mobile":"desktop"}}}]),t}()},function(t,e){t.exports=function(t){var e=document.createElement("script");t.services.adlightning.site&&""!==t.services.adlightning.site?e.src="https://tagan.adlightning.com/orangeclickmedia-".concat(t.services.adlightning.site,"/op.js"):e.src="https://tagan.adlightning.com/orangeclickmedia/op.js",e.setAttribute("defer",""),document.head.appendChild(e),(t.debug||t.services.adlightning.debug)&&console.info("[OCM][Adlightning] Loaded")}},function(t,e){t.exports=function(t){return new Promise((function(t,e){t(!0)}))}},function(t,e){t.exports={log:!1,debug:!1,use_window_top:!0,uses_cmp:!0,site_categories:["IAB12-1","IAB12-2"],services:{cmp:{active:!1,debug:!1,network_id:null},iab_compliance:{active:!0,debug:!1},gpt:{active:!1,debug:!1,collapseEmptyDivs:[!1,!1],enableSingleRequest:!1,setCentering:!1,disableInitialLoad:!1},blockthrough:{active:!1,debug:!1},geolocation:{active:!0,debug:!1},injected_tags:{active:!1,debug:!1,tags:[]},lazyload:{active:!0,debug:!1,page_types:["ROS"],version:2,include_offset:"800",load_offset:"600",ad_load_offsets:[]},uam:{active:!0,debug:!1,pubID:"21e3d7ee-4312-4deb-8ada-99c25a814bef",page_types:["ROS"],adServer:"googletag",bidTimeout:"1800"},adblock:{active:!1,debug:!1,pairs:[]},engageya:{active:!1,debug:!1,mobile:{wid:null,pubid:null,webid:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertAfter",word_count_gt:0}},desktop:{wid:null,pubid:null,webid:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertAfter",word_count_gt:0}}},fizz:{active:!0,debug:!1,interval:"30000",advertisers_whitelist:[],ads_whitelist:[{path:"/79450181/whoscored.com/billboard1"},{path:"/79450181/whoscored.com/rightsticky"},{path:"/79450181/whoscored.com/leftsticky"},{path:"/79450181/whoscored.com/sidebar1"},{path:"/79450181/whoscored.com/sidebar2"},{path:"/79450181/whoscored.com/sidebar3"},{path:"/79450181/whoscored.com/mobile_sticky"}]},header_bidding:{active:!0,debug:!1,adsqRTDModuleEnabled:!1,adServerCurrency:"GBP",bidderTimeout:"1800",custom_granularity:!0,domain:null,adUnits:[{code:"/79450181/whoscored.com/billboard1",sizes:"[[970,250],[970,90],[728,90],[320,100],[320,50],[300,250],[336,280]]",page_types:["ROS"],bids:[{bidder:"triplelift",params:{size:"[[970,250],[970,90],[728,90]]",floor:"0.01",inventoryCode:'"WhoScored_Desktop_Billboard1"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/billboard1"}',pubId:"5e5558fade26a9e"}},{bidder:"triplelift",params:{size:"[[320,100],[320,50]]",floor:"0.01",inventoryCode:'"WhoScored_Mobile_Billboard1"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/billboard1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/billboard1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"541192105"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"1072563"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"776768"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"776769"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[336, 280]]",tagid:'"1072564"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[728, 90]]",tagid:'"776767"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[970, 250]]",tagid:'"776765"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[970, 90]]",tagid:'"776766"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[970,250]",siteId:'"599824"'}},{bidder:"ix",params:{size:"[970,90]",siteId:'"599824"'}},{bidder:"ix",params:{size:"[728,90]",siteId:'"599824"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"599824"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"599824"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"599824"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"599824"'}},{bidder:"adform",params:{mid:1096047,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a969d9a017a7ae32520e33c65fd0014"}},{bidder:"sharethrough",params:{pkey:'"5bSyywijApcyFhoZJXuyJlmQ"',size:"[970,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"5OdcsEbx7OFoLHnEEU0vJ0SU"',size:"[970,90]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"uPOIn3tgHEB47I08q9YVeN9O"',size:"[728,90]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"nsZ2lJmp1zKQGIOOkVxxNbZN"',size:"[336,280]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[[300,250],[320,100],[320,50]]"},{window_size:"[340,0]",ad_sizes:"[[300,250],[320,100],[320,50],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[728,90]]"},{window_size:"[984,0]",ad_sizes:"[[970,250],[970,90],[728,90]]"}],slotID:"billboard1"},{code:"/79450181/whoscored.com/rightsticky",sizes:"[[160,600]]",page_types:["ROS"],bids:[{bidder:"triplelift",params:{size:"[[160,600]]",floor:"0.01",inventoryCode:'"WhoScored_ROS_HDX"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/rightsticky"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/rightsticky"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/rightsticky"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/rightsticky"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"541192106"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[160, 600]]",tagid:'"776770"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[160,600]",siteId:'"599827"'}},{bidder:"adform",params:{mid:1096041,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a96918a017a7ae328b6e33c67d40019"}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[1324,0]",ad_sizes:"[[160,600]]"}],slotID:"rightsticky"},{code:"/79450181/whoscored.com/leftsticky",sizes:"[[160,600]]",page_types:["ROS"],bids:[{bidder:"triplelift",params:{size:"[[160,600]]",floor:"0.01",inventoryCode:'"WhoScored_ROS_HDX"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/leftsticky"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/leftsticky"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/leftsticky"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/leftsticky"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"541192107"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[160, 600]]",tagid:'"776778"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[160,600]",siteId:'"599828"'}},{bidder:"adform",params:{mid:1096040,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a96952c017a7ae32c51e33c69b20012"}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[1324,0]",ad_sizes:"[[160,600]]"}],slotID:"leftsticky"},{code:"/79450181/whoscored.com/sidebar1",sizes:"[[300,250]]",page_types:["ROS"],bids:[{bidder:"triplelift",params:{size:"[[300,250]]",floor:"0.01",inventoryCode:'"WhoScored_Desktop_Sidebar1"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/sidebar1"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"541192108"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"776771"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"599829"'}},{bidder:"adform",params:{mid:1096042,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a969d9a017a7ae32520e33c6b940015"}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[984,0]",ad_sizes:"[[300,250]]"}],slotID:"sidebar1"},{code:"/79450181/whoscored.com/sidebar2",sizes:"[[300,250],[300,600]]",page_types:["ROS"],bids:[{bidder:"triplelift",params:{size:"[[300,250],[300,600]]",floor:"0.01",inventoryCode:'"WhoScored_Desktop_Sidebar2"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/sidebar2"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar2"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar2"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"541192109"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"776772"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[300, 600]]",tagid:'"776773"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"599830"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"599830"'}},{bidder:"adform",params:{mid:1096043,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a96918a017a7ae328b6e33c6d7e001a"}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"vEbmjpCVyXJ2mY9seIxtVK9q"',size:"[300,600]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[984,0]",ad_sizes:"[[300,250],[300,600]]"}],slotID:"sidebar2"},{code:"/79450181/whoscored.com/sidebar3",sizes:"[[300,250],[300,600]]",page_types:["ROS"],bids:[{bidder:"triplelift",params:{size:"[[300,250],[300,600]]",floor:"0.01",inventoryCode:'"WhoScored_Desktop_Sidebar3"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/sidebar3"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar3"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/sidebar3"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"541192110"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"776774"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[300, 600]]",tagid:'"776775"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"599831"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"599831"'}},{bidder:"adform",params:{mid:1096045,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a96952c017a7ae32c51e33c6f620013"}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"vEbmjpCVyXJ2mY9seIxtVK9q"',size:"[300,600]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[984,0]",ad_sizes:"[[300,250],[300,600]]"}],slotID:"sidebar3"},{code:"/79450181/whoscored.com/mobile_sticky",sizes:"[[320,100],[320,50]]",page_types:["ROS"],bids:[{bidder:"triplelift",params:{size:"[[320,50],[320,100]]",floor:"0.01",inventoryCode:'"WhoScored_ROS_HDX"'}},{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/mobile_sticky"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/mobile_sticky"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/mobile_sticky"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/mobile_sticky"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"541192111"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"776776"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"776777"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"599832"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"599832"'}},{bidder:"adform",params:{mid:1096044,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a969d9a017a7ae32520e33c715c0016"}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[[320,100],[320,50]]"},{window_size:"[340,0]",ad_sizes:"[[320,100],[320,50]]"},{window_size:"[768,0]",ad_sizes:"[]"},{window_size:"[1024,0]",ad_sizes:"[]"}],slotID:"mobile_sticky"},{code:"/79450181/whoscored.com/billboard2",sizes:"[[970,250],[970,90],[728,90]]",page_types:["ROS"],bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/billboard2"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"557946402"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[970, 90]]",tagid:'"1072566"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[970, 250]]",tagid:'"1072567"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[728, 90]]",tagid:'"1072565"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[970,250]",siteId:'"887548"'}},{bidder:"ix",params:{size:"[970,90]",siteId:'"887548"'}},{bidder:"ix",params:{size:"[728,90]",siteId:'"887548"'}},{bidder:"adform",params:{mid:1558753,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a9695530183837e7ad6832666980048"}},{bidder:"triplelift",params:{size:"[[970,250],[970,90],[728,90]]",floor:"0.01",inventoryCode:'"79450181_whoscored_billboard2"'}},{bidder:"sharethrough",params:{pkey:'"5bSyywijApcyFhoZJXuyJlmQ"',size:"[970,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"5OdcsEbx7OFoLHnEEU0vJ0SU"',size:"[970,90]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"uPOIn3tgHEB47I08q9YVeN9O"',size:"[728,90]",iframe:null,iframeSize:null}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[340,0]",ad_sizes:"[]"},{window_size:"[768,0]",ad_sizes:"[[728,90]]"},{window_size:"[984,0]",ad_sizes:"[[970,250],[970,90],[728,90]]"}],slotID:"billboard1"},{code:"/79450181/whoscored.com/infeed1",sizes:"[[320,50],[320,100],[300,250],[336,280]]",page_types:["ROS"],bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/infeed1"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/infeed1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"557946403"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"1072571"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"1072569"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072568"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[336, 280]]",tagid:'"1072570"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887549"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"887549"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"887549"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"887549"'}},{bidder:"adform",params:{mid:1558751,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a9695530183837e7ad68326bc1c0049"}},{bidder:"triplelift",params:{size:"[[320,50],[320,100],[300,250],[336,280]]",floor:"0.01",inventoryCode:'"79450181_whoscored_infeed1"'}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"nsZ2lJmp1zKQGIOOkVxxNbZN"',size:"[336,280]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[[320,50],[320,100],[300,250]]"},{window_size:"[340,0]",ad_sizes:"[[320,50],[320,100],[300,250],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[]"}]},{code:"/79450181/whoscored.com/infeed2",sizes:"[[320,50],[320,100],[300,250],[336,280]]",page_types:["ROS"],bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/infeed2"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/infeed2"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"557946404"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"1072573"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"1072572"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072574"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[336, 280]]",tagid:'"1072575"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887550"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"887550"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"887550"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"887550"'}},{bidder:"adform",params:{mid:1558756,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a9691260183837e750e8326f7020050"}},{bidder:"triplelift",params:{size:"[[320,50],[320,100],[300,250],[336,280]]",floor:"0.01",inventoryCode:'"79450181_whoscored_infeed2"'}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"nsZ2lJmp1zKQGIOOkVxxNbZN"',size:"[336,280]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[[320,50],[320,100],[300,250]]"},{window_size:"[340,0]",ad_sizes:"[[320,50],[320,100],[300,250],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[]"}]},{code:"/79450181/whoscored.com/infeed3",sizes:"[[320,50],[320,100],[300,250],[336,280]]",page_types:["ROS"],bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/infeed3"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"557946406"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"1072578"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"1072577"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072576"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[336, 280]]",tagid:'"1072579"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887551"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"887551"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"887551"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"887551"'}},{bidder:"adform",params:{mid:1558755,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a9691260183837e750e83272da60051"}},{bidder:"triplelift",params:{size:"[[320,50],[320,100],[300,250],[336,280]]",floor:"0.01",inventoryCode:'"79450181_whoscored_infeed3"'}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"nsZ2lJmp1zKQGIOOkVxxNbZN"',size:"[336,280]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[[320,50],[320,100],[300,250]]"},{window_size:"[340,0]",ad_sizes:"[[320,50],[320,100],[300,250],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[]"}]},{code:"/79450181/whoscored.com/674x40",sizes:"[[320,50]]",page_types:["ROS"],bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/674x40"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"557946407"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072580"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887552"'}},{bidder:"adform",params:{mid:1558752,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a969c690183837e714283297c1e005d"}},{bidder:"triplelift",params:{size:"[[320,50]]",floor:"0.01",inventoryCode:'"79450181_whoscored"'}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[[320,50]]"},{window_size:"[700,0]",ad_sizes:"[[674,40]]"}]},{code:"/79450181/whoscored.com/inline1",sizes:"[[970,250],[970,90],[728,90],[300,250],[320,100],[320,50],[336,280]]",page_types:["ROS"],bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/inline1"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/inline1"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"557946408"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"1072589"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"1072587"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072588"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[336, 280]]",tagid:'"1072584"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[728, 90]]",tagid:'"1072585"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[970, 250]]",tagid:'"1072586"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[970, 90]]",tagid:'"1072583"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[970,250]",siteId:'"887553"'}},{bidder:"ix",params:{size:"[970,90]",siteId:'"887553"'}},{bidder:"ix",params:{size:"[728,90]",siteId:'"887553"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"887553"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"887553"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887553"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"887553"'}},{bidder:"adform",params:{mid:1558754,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a9691260183837e750e8329c3b90052"}},{bidder:"triplelift",params:{size:"[[970,250],[970,90],[728,90],[300,250],[320,100],[320,50],[336,280]]",floor:"0.01",inventoryCode:'"79450181_whoscored_inline1"'}},{bidder:"sharethrough",params:{pkey:'"5bSyywijApcyFhoZJXuyJlmQ"',size:"[970,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"5OdcsEbx7OFoLHnEEU0vJ0SU"',size:"[970,90]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"uPOIn3tgHEB47I08q9YVeN9O"',size:"[728,90]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"nsZ2lJmp1zKQGIOOkVxxNbZN"',size:"[336,280]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[[300,250],[320,100],[320,50]]"},{window_size:"[340,0]",ad_sizes:"[[300,250],[320,100],[320,50],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[728,90],[300,250],[336,280]]"},{window_size:"[984,0]",ad_sizes:"[[970,250],[970,90],[728,90]]"}]},{code:"/79450181/whoscored.com/inline_art",sizes:"[[320,50],[320,100],[300,250],[336,280]]",page_types:["ROS"],bids:[{bidder:"adyoulike",params:{DC:null,placement:'"5860c8fbac723232127124c11d6f0c37"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/79450181/whoscored.com/inline_art"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/79450181/whoscored.com/inline_art"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"criteo",params:{networkId:7203,nativeCallback:null,integrationMode:null}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"150024",placementId:"164205"}},{bidder:"openx",params:{unit:'"557946409"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"sovrn",params:{size:"[[336, 280]]",tagid:'"1072594"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 50]]",tagid:'"1072592"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[300, 250]]",tagid:'"1072593"',bidfloor:'"0.01"'}},{bidder:"sovrn",params:{size:"[[320, 100]]",tagid:'"1072591"',bidfloor:'"0.01"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"887554"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"887554"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"887554"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"887554"'}},{bidder:"adform",params:{mid:1558750,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"rubicon",params:{floor:null,sizes:null,video:null,siteId:'"326978"',userId:null,zoneId:'"1701346"',latLong:null,visitor:null,keywords:null,position:null,accountId:'"20086"',inventory:null}},{bidder:"yahoossp",params:{dcn:"8a969d9a017a7ae32520e33931b1000a",ext:null,pos:"8a9691260183837e750e832a03b40053"}},{bidder:"triplelift",params:{size:"[[320,50],[320,100],[300,250],[336,280]]",floor:"0.01",inventoryCode:'"79450181_whoscored_inline1_art"'}},{bidder:"sharethrough",params:{pkey:'"LCblGVfxIbtG0yBmZgQpZwo9"',size:"[320,50]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"hnzlWW4XHncRKcUbzRY4vl48"',size:"[320,100]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"49nmlFfUlm7Bml66NcFRfjND"',size:"[300,250]",iframe:null,iframeSize:null}},{bidder:"sharethrough",params:{pkey:'"nsZ2lJmp1zKQGIOOkVxxNbZN"',size:"[336,280]",iframe:null,iframeSize:null}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[[320,50],[320,100],[300,250]]"},{window_size:"[340,0]",ad_sizes:"[[320,50],[320,100],[300,250],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[300,250],[336,280]]"}]}],analytics:["ocmpba"],bidders:[{name:"triplelift",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"adyoulike",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"onetag",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"openx",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"sovrn",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"ix",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"pubmatic",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"adform",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"criteo",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"rubicon",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"engageya",bid_cpm_adjust:"1.00",active:!1,geo:[]},{name:"unruly",bid_cpm_adjust:"1.00",active:!1,geo:[]},{name:"teads",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"yahoossp",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"sharethrough",bid_cpm_adjust:"1.00",active:!0,geo:["AU","BR","CA","FR","DE","MX","IT","ES","US","GB"]}],functionality:"lazyload_v2",video_mediatype_in_300:!1,page_types:["ROS"]},mobile_inread_sticky:{active:!1,debug:!1,show_text:!1,top:0,pairs:[]},mwi:{active:!1,debug:!1,page_types:["ROS"],code:null,safari:!1,desktop:!1,mobile:!0},sticky:{active:!0,debug:!1,ads:[{conditions:{page_types:["Home"],hide_if_skin:!1,device:"mobile",exclude_urls:[],min_width:1366,retract:!1},code:"/79450181/whoscored.com/mobile_sticky",sizes:"[[320,50],[320,100]]",position:"bottom",bg_color:"rgba(255, 255, 255, 0)",active:!0}]},vi:{active:!1,debug:!1,iab:"IAB1",style:"margin: 10px auto;",mobile:{conditions:{page_types:["ROS"],selector:".blog-post > p",count_gt:6,position:0,word_count:0,words_gt:0,place:"insertAfter",word_count_gt:0}},desktop:{conditions:{page_types:["ROS"],selector:".blog-post > p",count_gt:6,position:0,word_count:0,words_gt:0,place:"insertAfter",word_count_gt:0}}},primis:{active:!1,debug:!1,src:null,style:"display:inline-block; width:100%; height:100%; margin: 10px auto;",mobile:{conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},geo_filtering:!1,geo_filtering_countries:[]},desktop:{conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},geo_filtering:!1,geo_filtering_countries:[]}},instream:{active:!1,debug:!1,color:"#f59e0b",ad_tag_url:null,dispose_after_ad:!1,video_url:{landscape:"//cdn.orangeclickmedia.com/videos/xoria-sos.mp4",vertical:"//cdn.orangeclickmedia.com/videos/vertical.mp4",square:"//cdn.orangeclickmedia.com/videos/square-sky.mp4"},mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},language:"el"},instream_hb:{active:!1,debug:!1,color:"#f59e0b",video_url:{landscape:"//cdn.orangeclickmedia.com/videos/xoria-sos.mp4",vertical:"//cdn.orangeclickmedia.com/videos/vertical.mp4",square:"//cdn.orangeclickmedia.com/videos/square-sky.mp4"},adunits:[],mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}}},story_teller:{active:!1,debug:!1,ad_tag_url:null,delay_first_ad_request:0,load_offset:0,color:"#f59e0b",source:null,stories_type:"html",rss_url:null,video_url:null,captions_url:null,link_target:"_top",link_text:"READ MORE",mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore",word_count_gt:0},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},branding:{logo_url:null,title:null,site_name:null},language:"el"},reaper:{active:!0,debug:!1,timeout:"1500",language:"el"},in_image:{active:!1,debug:!1,tags:[],available_sizes:[{widthImg:500,heightImg:100,adSizes:"[[300,50]]",isActive:!1,isMobile:!1},{widthImg:500,heightImg:300,adSizes:"[[300,100]]",isActive:!1,isMobile:!1},{widthImg:540,heightImg:100,adSizes:"[[320,50]]",isActive:!1,isMobile:!1},{widthImg:540,heightImg:250,adSizes:"[[320,100]]",isActive:!1,isMobile:!1},{widthImg:838,heightImg:180,adSizes:"[[468,60]]",isActive:!1,isMobile:!1},{widthImg:900,heightImg:180,adSizes:"[[728,90]]",isActive:!0,isMobile:!1},{widthImg:320,heightImg:100,adSizes:"[[320,50]]",isActive:!0,isMobile:!0},{widthImg:468,heightImg:100,adSizes:"[[468,60]]",isActive:!0,isMobile:!0}],bg_color:"#ffffff00"},adlightning:{active:!0,debug:!1,site:"whoscoredcom"},teads_analytics:{active:!1,debug:!1,publisher_id:"16578"},user_engagement:{active:!0,debug:!1,interval:2e3},aniview:{active:!1,debug:!1,mobile:{playerTagId:null,publisher:"62ed18128bb9d95dbe10e294",rules:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertBefore"},styles:null,classes:null},desktop:{playerTagId:null,publisher:"62ed18128bb9d95dbe10e294",rules:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertBefore"},styles:null,classes:null}},outstream:{active:!1,debug:!1,page_id:null,article_identifier:null,exclude_urls:[]}},env:"prod",domain:"whoscored.com",script_tag:"whoscored.com_v2",build:"2.20230123121005",schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"orangeclickmedia.com",sid:"193164ud8gp3qzoc",hp:1}]}}}},function(t,e,i){var n=i(9),r=i(5),s=i(3),o=i(4),a=i(0),u=i(1),c=i(2);function l(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h=i(23),f=i(48),g=i(49),p="[OCM][Utils] ",m=i(69);t.exports=function(){"use strict";function t(e){var i;a(this,t),c(this,"config",void 0),c(this,"browser",void 0),c(this,"start",void 0),c(this,"window",void 0),c(this,"doc_head",void 0),c(this,"doc_body",void 0),c(this,"screen_width",void 0),c(this,"screen_height",void 0),c(this,"is_mobile",void 0),c(this,"hostname",void 0),c(this,"url",void 0),c(this,"willLog",void 0),c(this,"willSampleWarnings",void 0),c(this,"willSampleErrors",void 0),c(this,"log_blacklist",[]),this.config=e,this.browser=h,this.start=new Date,this.serviceStates=this.getServiceStates(),this.doc_head=window.parent.document.head||window.parent.document.getElementsByTagName("head")[0],this.doc_body=window.parent.document.body||window.parent.document.getElementsByTagName("body")[0],this.window=this.config.hasOwnProperty("use_window_top")?this.config.use_window_top?window.top:window:window.top,this.screen_width=this.screenWidth(),this.screen_height=this.screenHeight(),this.is_mobile=f(),this.hostname=this.window.location.hostname,this.url=this.window.location.href,this.calculateLoggingSamples(),null!==(i=this.config)&&void 0!==i&&i.log&&(this.log=new m(this.config.build,this.hostname,this.url)),this.log_blacklist=["FPD request size has exceeded maximum request size","missing parameters for real time module","module criteo is loading external JavaScript","Rubicon: Filtered FPD key:","User sync not allowed","Continuing without bids","No valid bid requests returned for auction","fetch encountered an error","xhr timeout after","TCF2 denied device access for","has been rendered before","criteoIdSystem: unable to sync user id","xhr error","Number of user syncs exceeded for","Bid does not meet price floor","Brightcom server returned empty/non-json response"]}var e,i;return u(t,[{key:"isAdBlocked",value:(i=o(s.mark((function t(){var e,i=this;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.config.debug&&console.log("[OCM] Checking for Adblock..."),e={method:"HEAD",mode:"no-cors"},t.next=5,fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",e).then((function(t){i.config.debug&&console.log(p+" adsbygoogle HEAD call response",t),0!==t.status&&200!==t.status||(i.window.OCM.adBlocked=!1),t.redirected&&(i.window.OCM.adBlocked=!0)})).catch((function(t){i.window.OCM.adBlocked=!0}));case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"isMobile",value:function(){return this.is_mobile}},{key:"getBrowser",value:function(){return this.browser}},{key:"hasJsonStructure",value:function(t){try{JSON.parse(t)}catch(t){return!1}return!0}},{key:"ocmChromeExt",value:function(t){this.config.debug&&console.info("[OCM] Provide data to our Chrome extension");var e={type:"OCM_CONFIG",data:t};this.window.postMessage(e,"*")}},{key:"geolocation",value:function(){var t=this;return this.config.debug&&console.info("[OCM] Geolocating..."),new Promise((function(e){t.window.OCM.geo?e():g.get("https://geo.ocm.workers.dev").then((function(i){t.window.OCM.geo=i.data,e()})).catch((function(t){console.error(p,t)}))}))}},{key:"contentLoaded",value:function(){return this.config.debug&&console.info("[OCM] Checking for DOMContentLoaded..."),new Promise((function(t){var e=function e(){/^(?:loaded|interactive|complete)$/.test(document.readyState)&&(document.removeEventListener("DOMContentLoaded",e),t())};document.addEventListener("DOMContentLoaded",e),e()}))}},{key:"isSlotInViewport",value:function(t){var e,i,n=this.window.document.getElementById(t),r=0;if(!n||void 0===n)return!1;if("none"===n.style.display?(n.style.display="block",e=n.getBoundingClientRect(),n.style.display="none"):e=n.getBoundingClientRect(),i=e.height>=600,e.top>=0&&e.left>=0&&e.bottom<=(this.window.innerHeight||this.window.document.documentElement.clientHeight)&&e.right<=(this.window.innerWidth||this.window.document.documentElement.clientWidth))return!0;if(e.top<0&&e.left>=0)if(r=(e.height-Math.abs(e.top))/e.height*100,i){if(r>=67)return!0}else if(r>=51)return!0;if(e.bottom>=(this.window.innerHeight||this.window.document.documentElement.clientHeight)&&e.left>=0)if(r=(e.height-(e.bottom-(this.window.innerHeight||this.window.documentElement.clientHeight)))/e.height*100,i){if(r>=67)return!0}else if(r>=51)return!0;return!1}},{key:"gptApiReady",value:function(){var t=this;return this.config.debug&&console.info("[OCM] Checking for googletag.apiReady..."),new Promise((function(e,i){!function n(r){if(t.window.googletag&&googletag.apiReady)e();else{if(!r)return i("OCM gptApiReady: Max tries reached");setTimeout(n.bind(null,r-1),50)}}(40)}))}},{key:"gptPubAdsReady",value:function(){var t=this;return this.config.debug&&console.info(p+"Checking for googletag.pubadsReady..."),new Promise((function(e,i){!function n(r){if(t.window.googletag&&t.window.googletag.pubadsReady)e();else{if(!r)return i("OCM gptPubAdsReady: Max tries reached");setTimeout(n.bind(null,r-1),200)}}(50)}))}},{key:"throttle",value:function(t,e){var i=Date.now();return function(){i+e-Date.now()<0&&(t(),i=Date.now())}}},{key:"getServiceStates",value:function(){var t=this;if(this.serviceStates&&this.serviceStates.length)return this.serviceStates;this.config.debug&&console.info("[OCM] Resolving service states...");var e={};return Object.keys(this.config.services).forEach((function(i){e[i]=t.config.services[i].active})),e}},{key:"allowPageType",value:function(t){return this.config.debug&&console.log(p+"checking for page type validity",t,this.window.OCM.pageType),!(!t.includes(this.window.OCM.pageType)&&!t.includes("ROS"))}},{key:"screenWidth",value:function(){return this.config.debug&&console.info("[OCM] Resolving screen width..."),this.window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}},{key:"screenHeight",value:function(){return this.config.debug&&console.info("[OCM] Resolving screen height..."),this.window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},{key:"loadStyle",value:function(t){this.config.debug&&console.info("[OCM] Loading style...",t.substring(0,100));var e=document.createElement("style");e.appendChild(document.createTextNode(t)),this.doc_head.appendChild(e)}},{key:"loadImage",value:function(t,e){this.config.debug&&console.info("[OCM] Loading image...",t);var i=document.createElement("img");i.src=t,"body"===e?this.doc_body.insertBefore(i,this.doc_body.firstChild):this.doc_head.appendChild(i)}},{key:"loadScript",value:function(t,e,i,n,r){this.config.debug&&console.info("[OCM] Loading script...",t);var s=document.createElement("script");s.type=e,s.src=t,1===i&&(s.async="true"),""!==n&&(s.class=n),"body"===r?this.doc_body.insertBefore(s,this.doc_body.firstChild):this.doc_head.appendChild(s)}},{key:"determineInjectionTarget",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.config.debug&&console.info(p+"determineInjectionTarget",t,e,i,n,s);var o,a=null;return""!==t&&t?("string"==typeof t?o=this.window.document.querySelectorAll(t):"object"===r(t)&&(o=void 0===t.length?[t]:t),0===n?o.length&&o.length>=i&&(a=e?-1===e?o[o.length-1]:o[e]:o[0]):a=this.getParagraphAt(n,s,o),a):a}},{key:"injectTag",value:function(t,e,i){this.config.debug&&console.info(p+"Injecting tag",t,e,i);var n=null;switch(i){case"insertInside":n=t.appendChild(e);break;case"insertAfter":n=t.parentNode.insertBefore(e,t.nextElementSibling);break;case"insertBefore":n=t.parentNode.insertBefore(e,t)}return n}},{key:"calculateBidderTimeout",value:function(){var t=this.config.services.header_bidding.timeout;return(this.config.debug||this.config.services.header_bidding.debug)&&console.log("[OCM][Header Bidding] bidderTimeout = "+this.config.services.header_bidding.timeout),this.isMobile()&&(t*=2,(this.config.debug||this.config.services.header_bidding.debug)&&console.log("[OCM][Header Bidding] Mobile device, so bidderTimeout = ",t)),t}},{key:"getParagraphAt",value:function(t,e,i){var n,r=0,s=0,o=l(i);try{for(o.s();!(n=o.n()).done;){r+=n.value.innerHTML.split(/\s+/).length}}catch(t){o.e(t)}finally{o.f()}if(r>=e){var a,u=l(i);try{for(u.s();!(a=u.n()).done;){var c=a.value;if((s+=c.innerHTML.split(/\s+/).length)>=t)return c}}catch(t){u.e(t)}finally{u.f()}}return null}},{key:"getParameterByName",value:function(t){var e=this.window.location.href;t=t.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}},{key:"waitFor",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=arguments.length>3?arguments[3]:void 0,s=setInterval((function(){0===--n&&(clearInterval(s),"function"==typeof r&&r()),void 0!==i.window[t]&&(clearInterval(s),"function"==typeof e&&e())}),100)}},{key:"getUniqueListBy",value:function(t,e){return n(new Map(t.map((function(t){return[t[e],t]}))).values())}},{key:"getUnique",value:function(t,e){return t.map((function(t){return t[e]})).map((function(t,e,i){return i.indexOf(t)===e&&e})).filter((function(e){return t[e]})).map((function(e){return t[e]}))}},{key:"parseRss",value:(e=o(s.mark((function t(e){var i=this;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=o(s.mark((function t(n,r){var o;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(t){t.length?n(t):r(t)},t.next=3,fetch(e).then((function(t){return t.text()})).then((function(t){return(new i.window.DOMParser).parseFromString(t,"text/xml")})).then((function(t){var e,n,r=[],s=t.querySelectorAll("item, entry"),a=!1;(null===(e=t.querySelector("feed"))||void 0===e||null===(n=e.getAttribute("xmlns"))||void 0===n?void 0:n.indexOf("Atom"))>-1&&(a=!0),Array.from(s).forEach((function(t){i.config.debug&&console.log(p,"Fetched RSS item",t);var e,n,s=t.querySelector("title"),u=t.querySelector("link"),c=t.querySelector("image"),l=t.querySelector("[url][width][height]"),d=t.querySelector("enclosure"),h=t.querySelector("description"),f=t.getElementsByTagName("media:content").length>0?t.getElementsByTagName("media:content").item(0):null,g=t.getElementsByTagName("media:thumbnail").length>0?t.getElementsByTagName("media:thumbnail").item(0):null;if(a)return s=t.querySelector("title"),c=null===(e=t.querySelector('link[type="image/jpeg"], link[type="image/png"], link[type="image/jpg"]'))||void 0===e?void 0:e.getAttribute("href"),u=null===(n=t.querySelector('link[rel="alternate"]'))||void 0===n?void 0:n.getAttribute("href"),void r.push({title:s?s.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",link:u||"",image:c});s&&u||(i.config.debug&&console.log(p,"Failed to get title or url element",t),o([]));var m="";c?(m=c.innerHTML).indexOf("<url>")>-1&&(m=m.replace("<url>","").replace("</url>","")):l&&l.getAttribute("url").length?m=l.getAttribute("url"):d&&d.getAttribute("url").length?m=d.getAttribute("url"):f?m=f.getAttribute("url"):g?m=g.getAttribute("url"):h&&(m=i.extractImageFromDescription(t.innerHTML)),m.length&&r.push({title:s?s.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",link:u?u.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",image:m})})),r=(r=(r=i.getUnique(r,"link")).filter((function(t){return t&&t.link&&!t.link.includes(i.window.location.pathname)}))).sort((function(){return.5-Math.random()})).slice(0,10),i.config.debug&&console.log(p,"RSS items: ",r),o(r)}));case 3:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"extractImageFromDescription",value:function(t){var e,i=l(t.matchAll(/img[^>]+src=['"]([^">]+)['"]/gm));try{for(i.s();!(e=i.n()).done;){var n=e.value;if(void 0!==n[1])return n[1]}}catch(t){i.e(t)}finally{i.f()}return""}},{key:"clipHiddenOverflows",value:function(t,e){var i=this,n=t;this.config.debug&&(e||console.log(p+"** Overflow check commence!",n));var r,s=e||n;if(r=n,"hidden"===i.window.getComputedStyle(r).overflow){this.config.debug&&console.warn("Overflow found on:",n.tagName,{issue:"OVERFLOW IS HIDDEN",tagName:n.tagName,id:n.id,class:n.className,element:n});var o=n.getAttribute("style");n.setAttribute("style",o+"; overflow:clip !important")}if(n.parentElement)return this.clipHiddenOverflows(n.parentElement,s);this.config.debug&&console.log(p+"Overflow check complete! original element:",s)}},{key:"calculateLoggingSamples",value:function(){var t=Math.floor(100*Math.random());this.willSampleWarnings=t<2,this.willSampleErrors=t<10}}]),t}()},function(t,e,i){"use strict";t.exports=s,t.exports.isMobile=s,t.exports.default=s;const n=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/android|ipad|playbook|silk/i;function s(t){t||(t={});let e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;let i=n.test(e)||!!t.tablet&&r.test(e);return!i&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(i=!0),i}},function(t,e,i){t.exports=i(50)},function(t,e,i){"use strict";var n=i(6),r=i(24),s=i(51),o=i(30);function a(t){var e=new s(t),i=r(s.prototype.request,e);return n.extend(i,s.prototype,e),n.extend(i,e),i}var u=a(i(18));u.Axios=s,u.create=function(t){return a(o(u.defaults,t))},u.Cancel=i(31),u.CancelToken=i(66),u.isCancel=i(29),u.all=function(t){return Promise.all(t)},u.spread=i(67),u.isAxiosError=i(68),t.exports=u,t.exports.default=u},function(t,e,i){"use strict";var n=i(6),r=i(25),s=i(52),o=i(53),a=i(30),u=i(64),c=u.validators;function l(t){this.defaults=t,this.interceptors={request:new s,response:new s}}l.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&u.assertOptions(e,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var i=[],n=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(n=n&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var r,s=[];if(this.interceptors.response.forEach((function(t){s.push(t.fulfilled,t.rejected)})),!n){var l=[o,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(s),r=Promise.resolve(t);l.length;)r=r.then(l.shift(),l.shift());return r}for(var d=t;i.length;){var h=i.shift(),f=i.shift();try{d=h(d)}catch(t){f(t);break}}try{r=o(d)}catch(t){return Promise.reject(t)}for(;s.length;)r=r.then(s.shift(),s.shift());return r},l.prototype.getUri=function(t){return t=a(this.defaults,t),r(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(t){l.prototype[t]=function(e,i){return this.request(a(i||{},{method:t,url:e,data:(i||{}).data}))}})),n.forEach(["post","put","patch"],(function(t){l.prototype[t]=function(e,i,n){return this.request(a(n||{},{method:t,url:e,data:i}))}})),t.exports=l},function(t,e,i){"use strict";var n=i(6);function r(){this.handlers=[]}r.prototype.use=function(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){n.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=r},function(t,e,i){"use strict";var n=i(6),r=i(54),s=i(29),o=i(18);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=r.call(t,t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||o.adapter)(t).then((function(e){return a(t),e.data=r.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return s(e)||(a(t),e&&e.response&&(e.response.data=r.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,i){"use strict";var n=i(6),r=i(18);t.exports=function(t,e,i){var s=this||r;return n.forEach(i,(function(i){t=i.call(s,t,e)})),t}},function(t,e){var i,n,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var u,c=[],l=!1,d=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&f())}function f(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++d<e;)u&&u[d].run();d=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new g(t,e)),1!==c.length||l||a(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";var n=i(6);t.exports=function(t,e){n.forEach(t,(function(i,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[n])}))}},function(t,e,i){"use strict";var n=i(28);t.exports=function(t,e,i){var r=i.config.validateStatus;i.status&&r&&!r(i.status)?e(n("Request failed with status code "+i.status,i.config,null,i.request,i)):t(i)}},function(t,e,i){"use strict";var n=i(6);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,i,r,s,o){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),n.isString(r)&&a.push("path="+r),n.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,i){"use strict";var n=i(60),r=i(61);t.exports=function(t,e){return t&&!n(e)?r(t,e):e}},function(t,e,i){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,i){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,i){"use strict";var n=i(6),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,i,s,o={};return t?(n.forEach(t.split("\n"),(function(t){if(s=t.indexOf(":"),e=n.trim(t.substr(0,s)).toLowerCase(),i=n.trim(t.substr(s+1)),e){if(o[e]&&r.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([i]):o[e]?o[e]+", "+i:i}})),o):o}},function(t,e,i){"use strict";var n=i(6);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(t){var n=t;return e&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=r(window.location.href),function(e){var i=n.isString(e)?r(e):e;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0}},function(t,e,i){"use strict";var n=i(65),r={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){r[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}}));var s={},o=n.version.split(".");function a(t,e){for(var i=e?e.split("."):o,n=t.split("."),r=0;r<3;r++){if(i[r]>n[r])return!0;if(i[r]<n[r])return!1}return!1}r.transitional=function(t,e,i){var r=e&&a(e);function o(t,e){return"[Axios v"+n.version+"] Transitional option '"+t+"'"+e+(i?". "+i:"")}return function(i,n,a){if(!1===t)throw new Error(o(n," has been removed in "+e));return r&&!s[n]&&(s[n]=!0,console.warn(o(n," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(i,n,a)}},t.exports={isOlderVersion:a,assertOptions:function(t,e,i){if("object"!=typeof t)throw new TypeError("options must be an object");for(var n=Object.keys(t),r=n.length;r-- >0;){var s=n[r],o=e[s];if(o){var a=t[s],u=void 0===a||o(a,s,t);if(!0!==u)throw new TypeError("option "+s+" must be "+u)}else if(!0!==i)throw Error("Unknown option "+s)}},validators:r}},function(t){t.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(t,e,i){"use strict";var n=i(31);function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var i=this;t((function(t){i.reason||(i.reason=new n(t),e(i.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r((function(e){t=e})),cancel:t}},t.exports=r},function(t,e,i){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,i){"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},function(t,e,i){var n=i(5),r=i(3),s=i(4),o=i(0),a=i(1),u=i(2),c=new(i(70));t.exports=function(){"use strict";function t(e,i,n){o(this,t),u(this,"jwt",void 0),u(this,"build",void 0),u(this,"hostname",void 0),u(this,"url",void 0),this.build=e,this.hostname=i,this.url=n,this.jwt=null}var e;return a(t,[{key:"stringifyError",value:function(t){return this.hasJsonStructure(t)?JSON.stringify(t):t}},{key:"hasJsonStructure",value:function(t){try{JSON.parse(t)}catch(t){return!1}return!0}},{key:"error",value:function(t){this.send("ERROR",t)}},{key:"warning",value:function(t){this.send("WARNING",t)}},{key:"notice",value:function(t){this.send("NOTICE",t)}},{key:"info",value:function(t){this.send("INFO",t)}},{key:"debug",value:function(t){this.send("DEBUG",t)}},{key:"send",value:(e=s(r.mark((function t(e,i){var n,s,o,a,u;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.jwt){t.next=4;break}return t.next=3,c.run();case 3:this.jwt=t.sent;case 4:return u={method:"POST",headers:{Authorization:"Bearer ".concat(this.jwt),Accept:"application/json; charset=UTF-8","Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({logName:"projects/ocm-logs/logs/ocm-js",resource:{type:"global",labels:{project_id:"ocm-logs",product:"ocm.js"}},entries:[{jsonPayload:{hostname:this.hostname,url:this.url,build:this.build.split(".")[1],userAgent:window.navigator.userAgent,service:i.service,msg:i.msg,error:this.stringifyError(i.error),consent:null===(n=window)||void 0===n||null===(s=n.OCM)||void 0===s?void 0:s.hasPurposeOneConsent,adBlocked:null===(o=window)||void 0===o||null===(a=o.OCM)||void 0===a?void 0:a.adBlocked},severity:e}]})},t.next=7,fetch("https://logging.googleapis.com/v2/entries:write",u);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)}))),function(t,i){return e.apply(this,arguments)})},{key:"getCircularReplacer",value:function(){var t=new WeakSet;return function(e,i){if("object"===n(i)&&null!==i){if(t.has(i))return;t.add(i)}return i}}}]),t}()},function(t,e,i){var n=i(0),r=i(1),s=i(71).jws.JWS;t.exports=function(){"use strict";function t(){n(this,t),this.accessToken=null,this.serviceAccountKey={private_key:"-----BEGIN PRIVATE KEY-----\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCziXpsfM5psnbj\nIwe7VwKixx9wRGPPl6FfGQyP+Oa45XCu/iPsMHNxGn0zAlhZAViguAkM6SxTdYyx\nNHsltAZPtug4A7qE3ZBZew+ZbMYZZjQ/koU6tSX+YRmTpqr+bFWc+nX90/9XezfR\nt1XX7DPpN8almWQOXnHB0ZeiDJ1kWbD3ZfAamAnE6Ry9ESPo/Pe5FnjMs2LYHSy/\nf75VmIuCuxjz/WVmeBTNbgmetugvymdvavLrxSZ6hdB6Ewd0dMW0Zh3qjLArb/XR\nDAICntfO33+/r/q751jtiBzh04o2zQQmGDJh7DbFKUDvnevkkI+/6zkSc+ff/QR7\nuXcVjJaLAgMBAAECggEAAL50Ydgh+2gk6bBTVE4etj9lRc/3Tw8NptkWcGG4Fncy\npQ3ZZtRwkXPX7vibX6+d4ot3irSVON4rsF1wBcWLobilT7KuiwoeSXCi9qA46DZS\noxqEL6yFWaQSyzOyCEVLgqsovbk9mOsP8AJkVaxLCjQ4iTkiyJPjU1wjsgCjqlN/\nCWNyZ+2f5fgrlAh7a5Bg/LtHzWnp/wjQ2U1Kp1mUgLZ7EfV2JG22kE3zQggKynIW\nohKOckJpMINbObp4idD8Op0/gbIobreoSimAKWxto/AHOykqiyhsUsx81S7I8mXq\nEXn5a+MLfEh8o9hAr5UY/4mm7AH1LgX45Oaz9jkkyQKBgQDqnQVFFaT50KJZxCkO\niUlwBqbvA5FSuT8n12/5drYZ7zFpa+EglZ4GzfU5aGCp67bXoKbpjR05tTAYAL6p\nE1PFlqnfLXtv/KQlZ5uPY+Oanahg+TMHX1b1gHwi2uTFj6yD3hYl5nlTOd12t6N1\n+aTO1K1KAg/wRhuqg8ipHfQJFQKBgQDD5y+1cGJTRBGXSJJpoZuUHeqGCLF/8R+T\nrRSGL1Q9lqaS+N0D4DSOuNOWMENsRA48TDr/ChXthAvEHChZzKMuAsGnBdV4/qK7\n+mceqPLLulkqlRhdTrmL4snMjSaqwlNehAdloJS+M6eR4pEOPuMgVjoiSd8lAFo5\nf6jjLebJHwKBgDTiok55W4/ohMBBZJPfRIuZJEYagsan9WGQwa/1H4VnErdV1xCW\nSWH1SULgkXGcLcIbd6SL57ubaTTv7gqEzcxrcu1Y/ks3IvU/jqRa+vJeeZcqdWND\nDYIXrWPZ/dm+0j+Db3CprE2jbJWXPaSZWpo4/LsDDf62fwQH4tKkat8lAoGActL1\n3sYxi5aRLPgHgUyNESL7zHYZ++DL3lYLep8RJExB9FFT0iq/A4yH0DcXvcSiB2uz\nBLvXoHDOKLNMX14XoydQdGJx/kpZ/g5GFO136jueedwL/Nzg2oIiP/fX2yytiu+e\nGk4mANnr9RE0boIjxFdmGaTs2xY6zArsZcQIyocCgYAM055vrwU40SCvIFgemstr\n9ilUiNSrKW+Y/vujGRtQp9/D1QwU2n6iNsLo/gs85GzH1STsagRbsLny504oTpfs\nOvc4lNek5JiL9/JFR07pH7/F9+STOgJgcn7oUnlfd/t86Th59Gx7H0v+RkhIXbtH\nFMMKkjRL/CjPolat6n41rw==\n-----END PRIVATE KEY-----\n",client_email:"ocm-logger@ocm-logs.iam.gserviceaccount.com"},this.jwt="",this.googleAuthURL="https://oauth2.googleapis.com/token",this.SCOPES=["https://www.googleapis.com/auth/logging.write"],this.EXPIRES_MARGIN=1800}return r(t,[{key:"run",value:function(){var t=this;return new Promise((function(e,i){var n=Math.floor(Date.now()/1e3);t.getJwt(t.serviceAccountKey,n);var r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:t.jwt})};fetch(t.googleAuthURL,r).then((function(t){return t.json()})).then((function(i){t.accessToken=i.access_token,e(t.accessToken)})).catch((function(t){i(t)}))}))}},{key:"getJwt",value:function(t,e){var i=t.client_email,n=t.private_key,r={typ:"JWT",alg:"RS256"},o=e+3600,a={aud:this.googleAuthURL,iss:i,scope:this.SCOPES.join(" "),iat:e,exp:o};this.jwt=s.sign(r.alg,r,a,n)}}]),t}()},function(t,e,i){(function(t){var i,n,r,s,o,a,u,c,l,d,h,f={userAgent:!1},g={},p=p||(i=Math,r=(n={}).lib={},s=r.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var i=new t;return e&&i.mixIn(e),i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=r.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,i=t.words,n=this.sigBytes,r=t.sigBytes;if(this.clamp(),n%4)for(var s=0;s<r;s++){var o=i[s>>>2]>>>24-s%4*8&255;e[n+s>>>2]|=o<<24-(n+s)%4*8}else for(s=0;s<r;s+=4)e[n+s>>>2]=i[s>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=i.ceil(e/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(4294967296*i.random()|0);return new o.init(e,t)}}),a=n.enc={},u=a.Hex={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],r=0;r<i;r++){var s=e[r>>>2]>>>24-r%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new o.init(i,e/2)}},c=a.Latin1={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],r=0;r<i;r++){var s=e[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new o.init(i,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},d=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,n=e.words,r=e.sigBytes,s=this.blockSize,a=r/(4*s),u=(a=t?i.ceil(a):i.max((0|a)-this._minBufferSize,0))*s,c=i.min(4*u,r);if(u){for(var l=0;l<u;l+=s)this._doProcessBlock(n,l);var d=n.splice(0,u);e.sigBytes-=c}return new o.init(d,c)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),r.Hasher=d.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,i){return new t.init(i).finalize(e)}},_createHmacHelper:function(t){return function(e,i){return new h.HMAC.init(t,i).finalize(e)}}}),h=n.algo={},n);!function(t){var e,i=(e=p).lib,n=i.Base,r=i.WordArray;(e=e.x64={}).Word=n.extend({init:function(t,e){this.high=t,this.low=e}}),e.WordArray=n.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,i=[],n=0;n<e;n++){var s=t[n];i.push(s.high),i.push(s.low)}return r.create(i,this.sigBytes)},clone:function(){for(var t=n.clone.call(this),e=t.words=this.words.slice(0),i=e.length,r=0;r<i;r++)e[r]=e[r].clone();return t}})}(),p.lib.Cipher||function(t){var e=(f=p).lib,i=e.Base,n=e.WordArray,r=e.BufferedBlockAlgorithm,s=f.enc.Base64,o=f.algo.EvpKDF,a=e.Cipher=r.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,i){this.cfg=this.cfg.extend(i),this._xformMode=t,this._key=e,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,i,n){return("string"==typeof i?g:h).encrypt(t,e,i,n)},decrypt:function(e,i,n){return("string"==typeof i?g:h).decrypt(t,e,i,n)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=f.mode={},c=function(t,e,i){var n=this._iv;n?this._iv=undefined:n=this._prevBlock;for(var r=0;r<i;r++)t[e+r]^=n[r]},l=(e.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();l.Encryptor=l.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize;c.call(this,t,e,n),i.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),l.Decryptor=l.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,r=t.slice(e,e+n);i.decryptBlock(t,e),c.call(this,t,e,n),this._prevBlock=r}}),u=u.CBC=l,l=(f.pad={}).Pkcs7={pad:function(t,e){for(var i,r=(i=(i=4*e)-t.sigBytes%i)<<24|i<<16|i<<8|i,s=[],o=0;o<i;o+=4)s.push(r);i=n.create(s,i),t.concat(i)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:u,padding:l}),reset:function(){a.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=e.createEncryptor;else i=e.createDecryptor,this._minBufferSize=1;this._mode=i.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var d=e.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),h=(u=(f.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?n.create([1398893684,1701076831]).concat(t).concat(e):e).toString(s)},parse:function(t){var e=(t=s.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var i=n.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return d.create({ciphertext:t,salt:i})}},e.SerializableCipher=i.extend({cfg:i.extend({format:u}),encrypt:function(t,e,i,n){n=this.cfg.extend(n);var r=t.createEncryptor(i,n);return e=r.finalize(e),r=r.cfg,d.create({ciphertext:e,key:i,iv:r.iv,algorithm:t,mode:r.mode,padding:r.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,i,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(i,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),f=(f.kdf={}).OpenSSL={execute:function(t,e,i,r){return r||(r=n.random(8)),t=o.create({keySize:e+i}).compute(t,r),i=n.create(t.words.slice(e),4*i),t.sigBytes=4*e,d.create({key:t,iv:i,salt:r})}},g=e.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:f}),encrypt:function(t,e,i,n){return i=(n=this.cfg.extend(n)).kdf.execute(i,t.keySize,t.ivSize),n.iv=i.iv,(t=h.encrypt.call(this,t,e,i.key,n)).mixIn(i),t},decrypt:function(t,e,i,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),i=n.kdf.execute(i,t.keySize,t.ivSize,e.salt),n.iv=i.iv,h.decrypt.call(this,t,e,i.key,n)}})}(),function(){for(var t=p,e=t.lib.BlockCipher,i=t.algo,n=[],r=[],s=[],o=[],a=[],u=[],c=[],l=[],d=[],h=[],f=[],g=0;256>g;g++)f[g]=128>g?g<<1:g<<1^283;var m=0,v=0;for(g=0;256>g;g++){var y=(y=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&y^99;n[m]=y,r[y]=m;var b=f[m],w=f[b],x=f[w],S=257*f[y]^16843008*y;s[m]=S<<24|S>>>8,o[m]=S<<16|S>>>16,a[m]=S<<8|S>>>24,u[m]=S,S=16843009*x^65537*w^257*b^16843008*m,c[y]=S<<24|S>>>8,l[y]=S<<16|S>>>16,d[y]=S<<8|S>>>24,h[y]=S,m?(m=b^f[f[f[x^b]]],v^=f[f[v]]):m=v=1}var E=[0,1,2,4,8,16,32,64,128,27,54];i=i.AES=e.extend({_doReset:function(){for(var t=(i=this._key).words,e=i.sigBytes/4,i=4*((this._nRounds=e+6)+1),r=this._keySchedule=[],s=0;s<i;s++)if(s<e)r[s]=t[s];else{var o=r[s-1];s%e?6<e&&4==s%e&&(o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o]):(o=n[(o=o<<8|o>>>24)>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o],o^=E[s/e|0]<<24),r[s]=r[s-e]^o}for(t=this._invKeySchedule=[],e=0;e<i;e++)s=i-e,o=e%4?r[s]:r[s-4],t[e]=4>e||4>=s?o:c[n[o>>>24]]^l[n[o>>>16&255]]^d[n[o>>>8&255]]^h[n[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,o,a,u,n)},decryptBlock:function(t,e){var i=t[e+1];t[e+1]=t[e+3],t[e+3]=i,this._doCryptBlock(t,e,this._invKeySchedule,c,l,d,h,r),i=t[e+1],t[e+1]=t[e+3],t[e+3]=i},_doCryptBlock:function(t,e,i,n,r,s,o,a){for(var u=this._nRounds,c=t[e]^i[0],l=t[e+1]^i[1],d=t[e+2]^i[2],h=t[e+3]^i[3],f=4,g=1;g<u;g++){var p=n[c>>>24]^r[l>>>16&255]^s[d>>>8&255]^o[255&h]^i[f++],m=n[l>>>24]^r[d>>>16&255]^s[h>>>8&255]^o[255&c]^i[f++],v=n[d>>>24]^r[h>>>16&255]^s[c>>>8&255]^o[255&l]^i[f++];h=n[h>>>24]^r[c>>>16&255]^s[l>>>8&255]^o[255&d]^i[f++],c=p,l=m,d=v}p=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^i[f++],m=(a[l>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^i[f++],v=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^i[f++],h=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&d])^i[f++],t[e]=p,t[e+1]=m,t[e+2]=v,t[e+3]=h},keySize:8});t.AES=e._createHelper(i)}(),function(){function t(t,e){var i=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=i,this._lBlock^=i<<t}function e(t,e){var i=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=i,this._rBlock^=i<<t}var i=p,n=(r=i.lib).WordArray,r=r.BlockCipher,s=i.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=r.extend({_doReset:function(){for(var t=this._key.words,e=[],i=0;56>i;i++){var n=o[i]-1;e[i]=t[n>>>5]>>>31-n%32&1}for(t=this._subKeys=[],n=0;16>n;n++){var r=t[n]=[],s=u[n];for(i=0;24>i;i++)r[i/6|0]|=e[(a[i]-1+s)%28]<<31-i%6,r[4+(i/6|0)]|=e[28+(a[i+24]-1+s)%28]<<31-i%6;for(r[0]=r[0]<<1|r[0]>>>31,i=1;7>i;i++)r[i]>>>=4*(i-1)+3;r[7]=r[7]<<5|r[7]>>>27}for(e=this._invSubKeys=[],i=0;16>i;i++)e[i]=t[15-i]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(i,n,r){this._lBlock=i[n],this._rBlock=i[n+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var s=0;16>s;s++){for(var o=r[s],a=this._lBlock,u=this._rBlock,d=0,h=0;8>h;h++)d|=c[h][((u^o[h])&l[h])>>>0];this._lBlock=u,this._rBlock=a^d}r=this._lBlock,this._lBlock=this._rBlock,this._rBlock=r,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),i[n]=this._lBlock,i[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=r._createHelper(d),s=s.TripleDES=r.extend({_doReset:function(){var t=this._key.words;this._des1=d.createEncryptor(n.create(t.slice(0,2))),this._des2=d.createEncryptor(n.create(t.slice(2,4))),this._des3=d.createEncryptor(n.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),i.TripleDES=r._createHelper(s)}(),function(){var t=p,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,n=this._map;t.clamp(),t=[];for(var r=0;r<i;r+=3)for(var s=(e[r>>>2]>>>24-r%4*8&255)<<16|(e[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|e[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;4>o&&r+.75*o<i;o++)t.push(n.charAt(s>>>6*(3-o)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var i=t.length,n=this._map;(r=n.charAt(64))&&(-1!=(r=t.indexOf(r))&&(i=r));for(var r=[],s=0,o=0;o<i;o++)if(o%4){var a=n.indexOf(t.charAt(o-1))<<o%4*2,u=n.indexOf(t.charAt(o))>>>6-o%4*2;r[s>>>2]|=(a|u)<<24-s%4*8,s++}return e.create(r,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,i,n,r,s,o){return((t=t+(e&i|~e&n)+r+o)<<s|t>>>32-s)+e}function i(t,e,i,n,r,s,o){return((t=t+(e&n|i&~n)+r+o)<<s|t>>>32-s)+e}function n(t,e,i,n,r,s,o){return((t=t+(e^i^n)+r+o)<<s|t>>>32-s)+e}function r(t,e,i,n,r,s,o){return((t=t+(i^(e|~n))+r+o)<<s|t>>>32-s)+e}for(var s=p,o=(u=s.lib).WordArray,a=u.Hasher,u=s.algo,c=[],l=0;64>l;l++)c[l]=4294967296*t.abs(t.sin(l+1))|0;u=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,s){for(var o=0;16>o;o++){var a=t[u=s+o];t[u]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}o=this._hash.words;var u=t[s+0],l=(a=t[s+1],t[s+2]),d=t[s+3],h=t[s+4],f=t[s+5],g=t[s+6],p=t[s+7],m=t[s+8],v=t[s+9],y=t[s+10],b=t[s+11],w=t[s+12],x=t[s+13],S=t[s+14],E=t[s+15],_=e(_=o[0],I=o[1],F=o[2],A=o[3],u,7,c[0]),A=e(A,_,I,F,a,12,c[1]),F=e(F,A,_,I,l,17,c[2]),I=e(I,F,A,_,d,22,c[3]);_=e(_,I,F,A,h,7,c[4]),A=e(A,_,I,F,f,12,c[5]),F=e(F,A,_,I,g,17,c[6]),I=e(I,F,A,_,p,22,c[7]),_=e(_,I,F,A,m,7,c[8]),A=e(A,_,I,F,v,12,c[9]),F=e(F,A,_,I,y,17,c[10]),I=e(I,F,A,_,b,22,c[11]),_=e(_,I,F,A,w,7,c[12]),A=e(A,_,I,F,x,12,c[13]),F=e(F,A,_,I,S,17,c[14]),_=i(_,I=e(I,F,A,_,E,22,c[15]),F,A,a,5,c[16]),A=i(A,_,I,F,g,9,c[17]),F=i(F,A,_,I,b,14,c[18]),I=i(I,F,A,_,u,20,c[19]),_=i(_,I,F,A,f,5,c[20]),A=i(A,_,I,F,y,9,c[21]),F=i(F,A,_,I,E,14,c[22]),I=i(I,F,A,_,h,20,c[23]),_=i(_,I,F,A,v,5,c[24]),A=i(A,_,I,F,S,9,c[25]),F=i(F,A,_,I,d,14,c[26]),I=i(I,F,A,_,m,20,c[27]),_=i(_,I,F,A,x,5,c[28]),A=i(A,_,I,F,l,9,c[29]),F=i(F,A,_,I,p,14,c[30]),_=n(_,I=i(I,F,A,_,w,20,c[31]),F,A,f,4,c[32]),A=n(A,_,I,F,m,11,c[33]),F=n(F,A,_,I,b,16,c[34]),I=n(I,F,A,_,S,23,c[35]),_=n(_,I,F,A,a,4,c[36]),A=n(A,_,I,F,h,11,c[37]),F=n(F,A,_,I,p,16,c[38]),I=n(I,F,A,_,y,23,c[39]),_=n(_,I,F,A,x,4,c[40]),A=n(A,_,I,F,u,11,c[41]),F=n(F,A,_,I,d,16,c[42]),I=n(I,F,A,_,g,23,c[43]),_=n(_,I,F,A,v,4,c[44]),A=n(A,_,I,F,w,11,c[45]),F=n(F,A,_,I,E,16,c[46]),_=r(_,I=n(I,F,A,_,l,23,c[47]),F,A,u,6,c[48]),A=r(A,_,I,F,p,10,c[49]),F=r(F,A,_,I,S,15,c[50]),I=r(I,F,A,_,f,21,c[51]),_=r(_,I,F,A,w,6,c[52]),A=r(A,_,I,F,d,10,c[53]),F=r(F,A,_,I,y,15,c[54]),I=r(I,F,A,_,a,21,c[55]),_=r(_,I,F,A,m,6,c[56]),A=r(A,_,I,F,E,10,c[57]),F=r(F,A,_,I,g,15,c[58]),I=r(I,F,A,_,x,21,c[59]),_=r(_,I,F,A,h,6,c[60]),A=r(A,_,I,F,b,10,c[61]),F=r(F,A,_,I,l,15,c[62]),I=r(I,F,A,_,v,21,c[63]);o[0]=o[0]+_|0,o[1]=o[1]+I|0,o[2]=o[2]+F|0,o[3]=o[3]+A|0},_doFinalize:function(){var e=this._data,i=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;i[r>>>5]|=128<<24-r%32;var s=t.floor(n/4294967296);for(i[15+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),i[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(i.length+1),this._process(),i=(e=this._hash).words,n=0;4>n;n++)r=i[n],i[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=a._createHelper(u),s.HmacMD5=a._createHmacHelper(u)}(Math),function(){var t=p,e=(r=t.lib).WordArray,i=r.Hasher,n=[],r=t.algo.SHA1=i.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var i=this._hash.words,r=i[0],s=i[1],o=i[2],a=i[3],u=i[4],c=0;80>c;c++){if(16>c)n[c]=0|t[e+c];else{var l=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=l<<1|l>>>31}l=(r<<5|r>>>27)+u+n[c],l=20>c?l+(1518500249+(s&o|~s&a)):40>c?l+(1859775393+(s^o^a)):60>c?l+((s&o|s&a|o&a)-1894007588):l+((s^o^a)-899497514),u=a,a=o,o=s<<30|s>>>2,s=r,r=l}i[0]=i[0]+r|0,i[1]=i[1]+s|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),e[15+(n+64>>>9<<4)]=i,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=i._createHelper(r),t.HmacSHA1=i._createHmacHelper(r)}(),function(t){for(var e=p,i=(r=e.lib).WordArray,n=r.Hasher,r=e.algo,s=[],o=[],a=function(t){return 4294967296*(t-(0|t))|0},u=2,c=0;64>c;){var l;t:{l=u;for(var d=t.sqrt(l),h=2;h<=d;h++)if(!(l%h)){l=!1;break t}l=!0}l&&(8>c&&(s[c]=a(t.pow(u,.5))),o[c]=a(t.pow(u,1/3)),c++),u++}var f=[];r=r.SHA256=n.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,e){for(var i=this._hash.words,n=i[0],r=i[1],s=i[2],a=i[3],u=i[4],c=i[5],l=i[6],d=i[7],h=0;64>h;h++){if(16>h)f[h]=0|t[e+h];else{var g=f[h-15],p=f[h-2];f[h]=((g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3)+f[h-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+f[h-16]}g=d+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+o[h]+f[h],p=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&r^n&s^r&s),d=l,l=c,c=u,u=a+g|0,a=s,s=r,r=n,n=g+p|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+u|0,i[5]=i[5]+c|0,i[6]=i[6]+l|0,i[7]=i[7]+d|0},_doFinalize:function(){var e=this._data,i=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=t.floor(n/4294967296),i[15+(r+64>>>9<<4)]=n,e.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=n._createHelper(r),e.HmacSHA256=n._createHmacHelper(r)}(Math),function(){var t=p,e=t.lib.WordArray,i=(n=t.algo).SHA256,n=n.SHA224=i.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=i._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=i._createHelper(n),t.HmacSHA224=i._createHmacHelper(n)}(),function(){function t(){return n.create.apply(n,arguments)}for(var e=p,i=e.lib.Hasher,n=(s=e.x64).Word,r=s.WordArray,s=e.algo,o=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=t();s=s.SHA512=i.extend({_doReset:function(){this._hash=new r.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var i=(d=this._hash.words)[0],n=d[1],r=d[2],s=d[3],u=d[4],c=d[5],l=d[6],d=d[7],h=i.high,f=i.low,g=n.high,p=n.low,m=r.high,v=r.low,y=s.high,b=s.low,w=u.high,x=u.low,S=c.high,E=c.low,_=l.high,A=l.low,F=d.high,I=d.low,C=h,k=f,P=g,T=p,O=m,R=v,D=y,B=b,N=w,M=x,j=S,z=E,H=_,L=A,V=F,U=I,q=0;80>q;q++){var K=a[q];if(16>q)var G=K.high=0|t[e+2*q],W=K.low=0|t[e+2*q+1];else{G=((W=(G=a[q-15]).high)>>>1|(J=G.low)<<31)^(W>>>8|J<<24)^W>>>7;var J=(J>>>1|W<<31)^(J>>>8|W<<24)^(J>>>7|W<<25),Y=((W=(Y=a[q-2]).high)>>>19|(X=Y.low)<<13)^(W<<3|X>>>29)^W>>>6,X=(X>>>19|W<<13)^(X<<3|W>>>29)^(X>>>6|W<<26),Z=(W=a[q-7]).high,$=(Q=a[q-16]).high,Q=Q.low;G=(G=(G=G+Z+((W=J+W.low)>>>0<J>>>0?1:0))+Y+((W=W+X)>>>0<X>>>0?1:0))+$+((W=W+Q)>>>0<Q>>>0?1:0);K.high=G,K.low=W}Z=N&j^~N&H,Q=M&z^~M&L,K=C&P^C&O^P&O;var tt=k&T^k&R^T&R,et=(J=(C>>>28|k<<4)^(C<<30|k>>>2)^(C<<25|k>>>7),Y=(k>>>28|C<<4)^(k<<30|C>>>2)^(k<<25|C>>>7),(X=o[q]).high),it=X.low;$=V+((N>>>14|M<<18)^(N>>>18|M<<14)^(N<<23|M>>>9))+((X=U+((M>>>14|N<<18)^(M>>>18|N<<14)^(M<<23|N>>>9)))>>>0<U>>>0?1:0),V=H,U=L,H=j,L=z,j=N,z=M,N=D+($=($=($=$+Z+((X=X+Q)>>>0<Q>>>0?1:0))+et+((X=X+it)>>>0<it>>>0?1:0))+G+((X=X+W)>>>0<W>>>0?1:0))+((M=B+X|0)>>>0<B>>>0?1:0)|0,D=O,B=R,O=P,R=T,P=C,T=k,C=$+(K=J+K+((W=Y+tt)>>>0<Y>>>0?1:0))+((k=X+W|0)>>>0<X>>>0?1:0)|0}f=i.low=f+k,i.high=h+C+(f>>>0<k>>>0?1:0),p=n.low=p+T,n.high=g+P+(p>>>0<T>>>0?1:0),v=r.low=v+R,r.high=m+O+(v>>>0<R>>>0?1:0),b=s.low=b+B,s.high=y+D+(b>>>0<B>>>0?1:0),x=u.low=x+M,u.high=w+N+(x>>>0<M>>>0?1:0),E=c.low=E+z,c.high=S+j+(E>>>0<z>>>0?1:0),A=l.low=A+L,l.high=_+H+(A>>>0<L>>>0?1:0),I=d.low=I+U,d.high=F+V+(I>>>0<U>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[30+(n+128>>>10<<5)]=Math.floor(i/4294967296),e[31+(n+128>>>10<<5)]=i,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),e.SHA512=i._createHelper(s),e.HmacSHA512=i._createHmacHelper(s)}(),function(){var t=p,e=(r=t.x64).Word,i=r.WordArray,n=(r=t.algo).SHA512,r=r.SHA384=n.extend({_doReset:function(){this._hash=new i.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var t=n._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=n._createHelper(r),t.HmacSHA384=n._createHmacHelper(r)}(),function(){var t=p,e=(n=t.lib).WordArray,i=n.Hasher,n=t.algo,r=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=e.create([0,1518500249,1859775393,2400959708,2840853838]),c=e.create([1352829926,1548603684,1836072691,2053994217,0]);n=n.RIPEMD160=i.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var i=0;16>i;i++){var n=t[w=e+i];t[w]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var l,d,h,f,g,p,m,v,y,b,w=this._hash.words,x=(n=u.words,c.words),S=r.words,E=s.words,_=o.words,A=a.words;p=l=w[0],m=d=w[1],v=h=w[2],y=f=w[3],b=g=w[4];var F;for(i=0;80>i;i+=1)F=l+t[e+S[i]]|0,F=16>i?F+((d^h^f)+n[0]):32>i?F+((d&h|~d&f)+n[1]):48>i?F+(((d|~h)^f)+n[2]):64>i?F+((d&f|h&~f)+n[3]):F+((d^(h|~f))+n[4]),F=(F=(F|=0)<<_[i]|F>>>32-_[i])+g|0,l=g,g=f,f=h<<10|h>>>22,h=d,d=F,F=p+t[e+E[i]]|0,F=16>i?F+((m^(v|~y))+x[0]):32>i?F+((m&y|v&~y)+x[1]):48>i?F+(((m|~v)^y)+x[2]):64>i?F+((m&v|~m&y)+x[3]):F+((m^v^y)+x[4]),F=(F=(F|=0)<<A[i]|F>>>32-A[i])+b|0,p=b,b=y,y=v<<10|v>>>22,v=m,m=F;F=w[1]+h+y|0,w[1]=w[2]+f+b|0,w[2]=w[3]+g+p|0,w[3]=w[4]+l+m|0,w[4]=w[0]+d+v|0,w[0]=F},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;for(e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,i=0;5>i;i++)n=e[i],e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});t.RIPEMD160=i._createHelper(n),t.HmacRIPEMD160=i._createHmacHelper(n)}(Math),function(){var t=p,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,i){t=this._hasher=new t.init,"string"==typeof i&&(i=e.parse(i));var n=t.blockSize,r=4*n;i.sigBytes>r&&(i=t.finalize(i)),i.clamp();for(var s=this._oKey=i.clone(),o=this._iKey=i.clone(),a=s.words,u=o.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t,e=p,i=(t=e.lib).Base,n=t.WordArray,r=(t=e.algo).HMAC,s=t.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){var i=this.cfg,s=r.create(i.hasher,t),o=n.create(),a=n.create([1]),u=o.words,c=a.words,l=i.keySize;for(i=i.iterations;u.length<l;){var d=s.update(e).finalize(a);s.reset();for(var h=d.words,f=h.length,g=d,p=1;p<i;p++){g=s.finalize(g),s.reset();for(var m=g.words,v=0;v<f;v++)h[v]^=m[v]}o.concat(d),c[0]++}return o.sigBytes=4*l,o}});e.PBKDF2=function(t,e,i){return s.create(i).compute(t,e)}}();var m,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function y(t){var e,i,n="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),n+=v.charAt(i>>6)+v.charAt(63&i);for(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),n+=v.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),n+=v.charAt(i>>2)+v.charAt((3&i)<<4)),"=";(3&n.length)>0;)n+="=";return n}function b(t){var e,i,n,r="",s=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e)(n=v.indexOf(t.charAt(e)))<0||(0==s?(r+=F(n>>2),i=3&n,s=1):1==s?(r+=F(i<<2|n>>4),i=15&n,s=2):2==s?(r+=F(i),r+=F(n>>2),i=3&n,s=3):(r+=F(i<<2|n>>4),r+=F(15&n),s=0));return 1==s&&(r+=F(i<<2)),r}function w(t){var e,i=b(t),n=new Array;for(e=0;2*e<i.length;++e)n[e]=parseInt(i.substring(2*e,2*e+2),16);return n}function x(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function S(){return new x(null)}"Microsoft Internet Explorer"==f.appName?(x.prototype.am=function(t,e,i,n,r,s){for(var o=32767&e,a=e>>15;--s>=0;){var u=32767&this[t],c=this[t++]>>15,l=a*u+c*o;r=((u=o*u+((32767&l)<<15)+i[n]+(1073741823&r))>>>30)+(l>>>15)+a*c+(r>>>30),i[n++]=1073741823&u}return r},m=30):"Netscape"!=f.appName?(x.prototype.am=function(t,e,i,n,r,s){for(;--s>=0;){var o=e*this[t++]+i[n]+r;r=Math.floor(o/67108864),i[n++]=67108863&o}return r},m=26):(x.prototype.am=function(t,e,i,n,r,s){for(var o=16383&e,a=e>>14;--s>=0;){var u=16383&this[t],c=this[t++]>>14,l=a*u+c*o;r=((u=o*u+((16383&l)<<14)+i[n]+r)>>28)+(l>>14)+a*c,i[n++]=268435455&u}return r},m=28),x.prototype.DB=m,x.prototype.DM=(1<<m)-1,x.prototype.DV=1<<m;x.prototype.FV=Math.pow(2,52),x.prototype.F1=52-m,x.prototype.F2=2*m-52;var E,_,A=new Array;for(E="0".charCodeAt(0),_=0;_<=9;++_)A[E++]=_;for(E="a".charCodeAt(0),_=10;_<36;++_)A[E++]=_;for(E="A".charCodeAt(0),_=10;_<36;++_)A[E++]=_;function F(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function I(t,e){var i=A[t.charCodeAt(e)];return null==i?-1:i}function C(t){var e=S();return e.fromInt(t),e}function k(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function P(t){this.m=t}function T(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function O(t,e){return t&e}function R(t,e){return t|e}function D(t,e){return t^e}function B(t,e){return t&~e}function N(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function M(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function j(){}function z(t){return t}function H(t){this.r2=S(),this.q3=S(),x.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}P.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},P.prototype.revert=function(t){return t},P.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},P.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},P.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},T.prototype.convert=function(t){var e=S();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(x.ZERO)>0&&this.m.subTo(e,e),e},T.prototype.revert=function(t){var e=S();return t.copyTo(e),this.reduce(e),e},T.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},T.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},T.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},x.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},x.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},x.prototype.fromString=function(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var n=t.length,r=!1,s=0;--n>=0;){var o=8==i?255&t[n]:I(t,n);o<0?"-"==t.charAt(n)&&(r=!0):(r=!1,0==s?this[this.t++]=o:s+i>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=i)>=this.DB&&(s-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),r&&x.ZERO.subTo(this,this)},x.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},x.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s},x.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},x.prototype.lShiftTo=function(t,e){var i,n=t%this.DB,r=this.DB-n,s=(1<<r)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)e[i+o+1]=this[i]>>r|a,a=(this[i]&s)<<n;for(i=o-1;i>=0;--i)e[i]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},x.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var n=t%this.DB,r=this.DB-n,s=(1<<n)-1;e[0]=this[i]>>n;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&s)<<r,e[o-i]=this[o]>>n;n>0&&(e[this.t-i-1]|=(this.s&s)<<r),e.t=this.t-i,e.clamp()}},x.prototype.subTo=function(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()},x.prototype.multiplyTo=function(t,e){var i=this.abs(),n=t.abs(),r=i.t;for(e.t=r+n.t;--r>=0;)e[r]=0;for(r=0;r<n.t;++r)e[r+i.t]=i.am(0,n[r],e,r,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&x.ZERO.subTo(e,e)},x.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},x.prototype.divRemTo=function(t,e,i){var n=t.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=S());var s=S(),o=this.s,a=t.s,u=this.DB-k(n[n.t-1]);u>0?(n.lShiftTo(u,s),r.lShiftTo(u,i)):(n.copyTo(s),r.copyTo(i));var c=s.t,l=s[c-1];if(0!=l){var d=l*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),h=this.FV/d,f=(1<<this.F1)/d,g=1<<this.F2,p=i.t,m=p-c,v=null==e?S():e;for(s.dlShiftTo(m,v),i.compareTo(v)>=0&&(i[i.t++]=1,i.subTo(v,i)),x.ONE.dlShiftTo(c,v),v.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--m>=0;){var y=i[--p]==l?this.DM:Math.floor(i[p]*h+(i[p-1]+g)*f);if((i[p]+=s.am(0,y,i,m,0,c))<y)for(s.dlShiftTo(m,v),i.subTo(v,i);i[p]<--y;)i.subTo(v,i)}null!=e&&(i.drShiftTo(c,e),o!=a&&x.ZERO.subTo(e,e)),i.t=c,i.clamp(),u>0&&i.rShiftTo(u,i),o<0&&x.ZERO.subTo(i,i)}}},x.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},x.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},x.prototype.exp=function(t,e){if(t>4294967295||t<1)return x.ONE;var i=S(),n=S(),r=e.convert(this),s=k(t)-1;for(r.copyTo(i);--s>=0;)if(e.sqrTo(i,n),(t&1<<s)>0)e.mulTo(n,r,i);else{var o=i;i=n,n=o}return e.revert(i)},x.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,r=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(i=this[o]>>a)>0&&(r=!0,s=F(i));o>=0;)a<e?(i=(this[o]&(1<<a)-1)<<e-a,i|=this[--o]>>(a+=this.DB-e)):(i=this[o]>>(a-=e)&n,a<=0&&(a+=this.DB,--o)),i>0&&(r=!0),r&&(s+=F(i));return r?s:"0"},x.prototype.negate=function(){var t=S();return x.ZERO.subTo(this,t),t},x.prototype.abs=function(){return this.s<0?this.negate():this},x.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0},x.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+k(this[this.t-1]^this.s&this.DM)},x.prototype.mod=function(t){var e=S();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(x.ZERO)>0&&t.subTo(e,e),e},x.prototype.modPowInt=function(t,e){var i;return i=t<256||e.isEven()?new P(e):new T(e),this.exp(t,i)},x.ZERO=C(0),x.ONE=C(1),j.prototype.convert=z,j.prototype.revert=z,j.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},j.prototype.sqrTo=function(t,e){t.squareTo(e)},H.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=S();return t.copyTo(e),this.reduce(e),e},H.prototype.revert=function(t){return t},H.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},H.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},H.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var L=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],V=(1<<26)/L[L.length-1];function U(){this.i=0,this.j=0,this.S=new Array}x.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},x.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=C(i),r=S(),s=S(),o="";for(this.divRemTo(n,r,s);r.signum()>0;)o=(i+s.intValue()).toString(t).substr(1)+o,r.divRemTo(n,r,s);return s.intValue().toString(t)+o},x.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),r=!1,s=0,o=0,a=0;a<t.length;++a){var u=I(t,a);u<0?"-"==t.charAt(a)&&0==this.signum()&&(r=!0):(o=e*o+u,++s>=i&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),r&&x.ZERO.subTo(this,this)},x.prototype.fromNumber=function(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(x.ONE.shiftLeft(t-1),R,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(x.ONE.shiftLeft(t-1),this);else{var n=new Array,r=7&t;n.length=1+(t>>3),e.nextBytes(n),r>0?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}},x.prototype.bitwiseTo=function(t,e,i){var n,r,s=Math.min(t.t,this.t);for(n=0;n<s;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(r=t.s&this.DM,n=s;n<this.t;++n)i[n]=e(this[n],r);i.t=this.t}else{for(r=this.s&this.DM,n=s;n<t.t;++n)i[n]=e(r,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},x.prototype.changeBit=function(t,e){var i=x.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i},x.prototype.addTo=function(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()},x.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},x.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},x.prototype.multiplyLowerTo=function(t,e,i){var n,r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;for(n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);r<n;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()},x.prototype.multiplyUpperTo=function(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)},x.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i},x.prototype.millerRabin=function(t){var e=this.subtract(x.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var n=e.shiftRight(i);(t=t+1>>1)>L.length&&(t=L.length);for(var r=S(),s=0;s<t;++s){r.fromInt(L[Math.floor(Math.random()*L.length)]);var o=r.modPow(n,this);if(0!=o.compareTo(x.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<i&&0!=o.compareTo(e);)if(0==(o=o.modPowInt(2,this)).compareTo(x.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0},x.prototype.clone=function(){var t=S();return this.copyTo(t),t},x.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},x.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},x.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},x.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},x.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var i,n=this.DB-t*this.DB%8,r=0;if(t-- >0)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[r++]=i|this.s<<this.DB-n);t>=0;)n<8?(i=(this[t]&(1<<n)-1)<<8-n,i|=this[--t]>>(n+=this.DB-8)):(i=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==r&&(128&this.s)!=(128&i)&&++r,(r>0||i!=this.s)&&(e[r++]=i);return e},x.prototype.equals=function(t){return 0==this.compareTo(t)},x.prototype.min=function(t){return this.compareTo(t)<0?this:t},x.prototype.max=function(t){return this.compareTo(t)>0?this:t},x.prototype.and=function(t){var e=S();return this.bitwiseTo(t,O,e),e},x.prototype.or=function(t){var e=S();return this.bitwiseTo(t,R,e),e},x.prototype.xor=function(t){var e=S();return this.bitwiseTo(t,D,e),e},x.prototype.andNot=function(t){var e=S();return this.bitwiseTo(t,B,e),e},x.prototype.not=function(){for(var t=S(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},x.prototype.shiftLeft=function(t){var e=S();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},x.prototype.shiftRight=function(t){var e=S();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},x.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+N(this[t]);return this.s<0?this.t*this.DB:-1},x.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=M(this[i]^e);return t},x.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},x.prototype.setBit=function(t){return this.changeBit(t,R)},x.prototype.clearBit=function(t){return this.changeBit(t,B)},x.prototype.flipBit=function(t){return this.changeBit(t,D)},x.prototype.add=function(t){var e=S();return this.addTo(t,e),e},x.prototype.subtract=function(t){var e=S();return this.subTo(t,e),e},x.prototype.multiply=function(t){var e=S();return this.multiplyTo(t,e),e},x.prototype.divide=function(t){var e=S();return this.divRemTo(t,e,null),e},x.prototype.remainder=function(t){var e=S();return this.divRemTo(t,null,e),e},x.prototype.divideAndRemainder=function(t){var e=S(),i=S();return this.divRemTo(t,e,i),new Array(e,i)},x.prototype.modPow=function(t,e){var i,n,r=t.bitLength(),s=C(1);if(r<=0)return s;i=r<18?1:r<48?3:r<144?4:r<768?5:6,n=r<8?new P(e):e.isEven()?new H(e):new T(e);var o=new Array,a=3,u=i-1,c=(1<<i)-1;if(o[1]=n.convert(this),i>1){var l=S();for(n.sqrTo(o[1],l);a<=c;)o[a]=S(),n.mulTo(l,o[a-2],o[a]),a+=2}var d,h,f=t.t-1,g=!0,p=S();for(r=k(t[f])-1;f>=0;){for(r>=u?d=t[f]>>r-u&c:(d=(t[f]&(1<<r+1)-1)<<u-r,f>0&&(d|=t[f-1]>>this.DB+r-u)),a=i;0==(1&d);)d>>=1,--a;if((r-=a)<0&&(r+=this.DB,--f),g)o[d].copyTo(s),g=!1;else{for(;a>1;)n.sqrTo(s,p),n.sqrTo(p,s),a-=2;a>0?n.sqrTo(s,p):(h=s,s=p,p=h),n.mulTo(p,o[d],s)}for(;f>=0&&0==(t[f]&1<<r);)n.sqrTo(s,p),h=s,s=p,p=h,--r<0&&(r=this.DB-1,--f)}return n.revert(s)},x.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return x.ZERO;for(var i=t.clone(),n=this.clone(),r=C(1),s=C(0),o=C(0),a=C(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(r.isEven()&&s.isEven()||(r.addTo(this,r),s.subTo(t,s)),r.rShiftTo(1,r)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);i.compareTo(n)>=0?(i.subTo(n,i),e&&r.subTo(o,r),s.subTo(a,s)):(n.subTo(i,n),e&&o.subTo(r,o),a.subTo(s,a))}return 0!=n.compareTo(x.ONE)?x.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},x.prototype.pow=function(t){return this.exp(t,new j)},x.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var r=e.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return e;for(r<s&&(s=r),s>0&&(e.rShiftTo(s,e),i.rShiftTo(s,i));e.signum()>0;)(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i},x.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=L[L.length-1]){for(e=0;e<L.length;++e)if(i[0]==L[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<L.length;){for(var n=L[e],r=e+1;r<L.length&&n<V;)n*=L[r++];for(n=i.modInt(n);e<r;)if(n%L[e++]==0)return!1}return i.millerRabin(t)},x.prototype.square=function(){var t=S();return this.squareTo(t),t},U.prototype.init=function(t){var e,i,n;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[i],this.S[i]=n;this.i=0,this.j=0},U.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var q,K,G;function W(){!function(t){K[G++]^=255&t,K[G++]^=t>>8&255,K[G++]^=t>>16&255,K[G++]^=t>>24&255,G>=256&&(G-=256)}((new Date).getTime())}if(null==K){var J;if(K=new Array,G=0,void 0!==g&&(void 0!==g.crypto||void 0!==g.msCrypto)){var Y=g.crypto||g.msCrypto;if(Y.getRandomValues){var X=new Uint8Array(32);for(Y.getRandomValues(X),J=0;J<32;++J)K[G++]=X[J]}else if("Netscape"==f.appName&&f.appVersion<"5"){var Z=g.crypto.random(32);for(J=0;J<Z.length;++J)K[G++]=255&Z.charCodeAt(J)}}for(;G<256;)J=Math.floor(65536*Math.random()),K[G++]=J>>>8,K[G++]=255&J;G=0,W()}function $(){if(null==q){for(W(),(q=new U).init(K),G=0;G<K.length;++G)K[G]=0;G=0}return q.next()}function Q(){}function tt(t,e){return new x(t,e)}function et(t,e,i){for(var n="",r=0;n.length<e;)n+=i(String.fromCharCode.apply(String,t.concat([(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r]))),r+=1;return n}function it(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function nt(t,e,i){for(var n="",r=0;n.length<e;)n+=i(t+String.fromCharCode.apply(String,[(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r])),r+=1;return n}function rt(t,e){this.x=e,this.q=t}function st(t,e,i,n){this.curve=t,this.x=e,this.y=i,this.z=null==n?x.ONE:n,this.zinv=null}function ot(t,e,i){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(i),this.infinity=new st(this,null,null)}Q.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=$()},it.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},it.prototype.setPublic=function(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA public key";this.n=tt(t,16),this.e=parseInt(e,16)}},it.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var i=new Array,n=t.length-1;n>=0&&e>0;){var r=t.charCodeAt(n--);r<128?i[--e]=r:r>127&&r<2048?(i[--e]=63&r|128,i[--e]=r>>6|192):(i[--e]=63&r|128,i[--e]=r>>6&63|128,i[--e]=r>>12|224)}i[--e]=0;for(var s=new Q,o=new Array;e>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);i[--e]=o[0]}return i[--e]=2,i[--e]=0,new x(i)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var i=this.doPublic(e);if(null==i)return null;var n=i.toString(16);return 0==(1&n.length)?n:"0"+n},it.prototype.encryptOAEP=function(t,e,i){var n=function(t,e,i,n){var r=ut.crypto.MessageDigest,s=ut.crypto.Util,o=null;if(i||(i="sha1"),"string"==typeof i&&(o=r.getCanonicalAlgName(i),n=r.getHashLength(o),i=function(t){return Et(s.hashHex(_t(t),o))}),t.length+2*n+2>e)throw"Message too long for RSA";var a,u="";for(a=0;a<e-t.length-2*n-2;a+=1)u+="\0";var c=i("")+u+""+t,l=new Array(n);(new Q).nextBytes(l);var d=et(l,c.length,i),h=[];for(a=0;a<c.length;a+=1)h[a]=c.charCodeAt(a)^d.charCodeAt(a);var f=et(h,l.length,i),g=[0];for(a=0;a<l.length;a+=1)g[a+1]=l[a]^f.charCodeAt(a);return new x(g.concat(h))}(t,this.n.bitLength()+7>>3,e,i);if(null==n)return null;var r=this.doPublic(n);if(null==r)return null;var s=r.toString(16);return 0==(1&s.length)?s:"0"+s},it.prototype.type="RSA",it.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},it.prototype.setPrivate=function(t,e,i){if(this.isPrivate=!0,"string"!=typeof t)this.n=t,this.e=e,this.d=i;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key";this.n=tt(t,16),this.e=parseInt(e,16),this.d=tt(i,16)}},it.prototype.setPrivateEx=function(t,e,i,n,r,s,o,a){if(this.isPrivate=!0,this.isPublic=!1,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=tt(t,16),this.e=parseInt(e,16),this.d=tt(i,16),this.p=tt(n,16),this.q=tt(r,16),this.dmp1=tt(s,16),this.dmq1=tt(o,16),this.coeff=tt(a,16)},it.prototype.generate=function(t,e){var i=new Q,n=t>>1;this.e=parseInt(e,16);for(var r=new x(e,16),s=t/2-100,o=x.ONE.shiftLeft(s);;){for(;this.p=new x(t-n,1,i),0!=this.p.subtract(x.ONE).gcd(r).compareTo(x.ONE)||!this.p.isProbablePrime(10););for(;this.q=new x(n,1,i),0!=this.q.subtract(x.ONE).gcd(r).compareTo(x.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}var u=this.q.subtract(this.p).abs();if(!(u.bitLength()<s||u.compareTo(o)<=0)){var c=this.p.subtract(x.ONE),l=this.q.subtract(x.ONE),d=c.multiply(l);if(0==d.gcd(r).compareTo(x.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==t)){this.d=r.modInverse(d),this.dmp1=this.d.mod(c),this.dmq1=this.d.mod(l),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0},it.prototype.decrypt=function(t){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var e=tt(t,16),i=this.doPrivate(e);return null==i?null:function(t,e){for(var i=t.toByteArray(),n=0;n<i.length&&0==i[n];)++n;if(i.length-n!=e-1||2!=i[n])return null;for(++n;0!=i[n];)if(++n>=i.length)return null;for(var r="";++n<i.length;){var s=255&i[n];s<128?r+=String.fromCharCode(s):s>191&&s<224?(r+=String.fromCharCode((31&s)<<6|63&i[n+1]),++n):(r+=String.fromCharCode((15&s)<<12|(63&i[n+1])<<6|63&i[n+2]),n+=2)}return r}(i,this.n.bitLength()+7>>3)},it.prototype.decryptOAEP=function(t,e,i){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var n=tt(t,16),r=this.doPrivate(n);return null==r?null:function(t,e,i,n){var r=ut.crypto.MessageDigest,s=ut.crypto.Util,o=null;for(i||(i="sha1"),"string"==typeof i&&(o=r.getCanonicalAlgName(i),n=r.getHashLength(o),i=function(t){return Et(s.hashHex(_t(t),o))}),t=t.toByteArray(),a=0;a<t.length;a+=1)t[a]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*n+2)throw"Cipher too short";var a,u=t.substr(1,n),c=t.substr(n+1),l=nt(c,n,i),d=[];for(a=0;a<u.length;a+=1)d[a]=u.charCodeAt(a)^l.charCodeAt(a);var h=nt(String.fromCharCode.apply(String,d),t.length-n,i),f=[];for(a=0;a<c.length;a+=1)f[a]=c.charCodeAt(a)^h.charCodeAt(a);if((f=String.fromCharCode.apply(String,f)).substr(0,n)!==i(""))throw"Hash mismatch";var g=(f=f.substr(n)).indexOf("");if((-1!=g?f.substr(0,g).lastIndexOf("\0"):-1)+1!=g)throw"Malformed data";return f.substr(g+1)}(r,this.n.bitLength()+7>>3,e,i)},rt.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},rt.prototype.toBigInteger=function(){return this.x},rt.prototype.negate=function(){return new rt(this.q,this.x.negate().mod(this.q))},rt.prototype.add=function(t){return new rt(this.q,this.x.add(t.toBigInteger()).mod(this.q))},rt.prototype.subtract=function(t){return new rt(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},rt.prototype.multiply=function(t){return new rt(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},rt.prototype.square=function(){return new rt(this.q,this.x.square().mod(this.q))},rt.prototype.divide=function(t){return new rt(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},rt.prototype.sqrt=function(){return new rt(this.q,this.x.sqrt().mod(this.q))},st.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},st.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},st.prototype.equals=function(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(x.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(x.ZERO))},st.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(x.ZERO)&&!this.y.toBigInteger().equals(x.ZERO)},st.prototype.negate=function(){return new st(this.curve,this.x,this.y.negate(),this.z)},st.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),i=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(x.ZERO.equals(i))return x.ZERO.equals(e)?this.twice():this.curve.getInfinity();var n=new x("3"),r=this.x.toBigInteger(),s=this.y.toBigInteger(),o=(t.x.toBigInteger(),t.y.toBigInteger(),i.square()),a=o.multiply(i),u=r.multiply(o),c=e.square().multiply(this.z),l=c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(a).multiply(i).mod(this.curve.q),d=u.multiply(n).multiply(e).subtract(s.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),h=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new st(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(d),h)},st.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new x("3"),e=this.x.toBigInteger(),i=this.y.toBigInteger(),n=i.multiply(this.z),r=n.multiply(i).mod(this.curve.q),s=this.curve.a.toBigInteger(),o=e.square().multiply(t);x.ZERO.equals(s)||(o=o.add(this.z.square().multiply(s)));var a=(o=o.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(r)).shiftLeft(1).multiply(n).mod(this.curve.q),u=o.multiply(t).multiply(e).subtract(r.shiftLeft(1)).shiftLeft(2).multiply(r).subtract(o.square().multiply(o)).mod(this.curve.q),c=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new st(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},st.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,i=t,n=i.multiply(new x("3")),r=this.negate(),s=this,o=this.curve.q.subtract(t),a=o.multiply(new x("3")),u=new st(this.curve,this.x,this.y),c=u.negate();for(e=n.bitLength()-2;e>0;--e){s=s.twice();var l=n.testBit(e);l!=i.testBit(e)&&(s=s.add(l?this:r))}for(e=a.bitLength()-2;e>0;--e){u=u.twice();var d=a.testBit(e);d!=o.testBit(e)&&(u=u.add(d?u:c))}return s},st.prototype.multiplyTwo=function(t,e,i){var n;n=t.bitLength()>i.bitLength()?t.bitLength()-1:i.bitLength()-1;for(var r=this.curve.getInfinity(),s=this.add(e);n>=0;)r=r.twice(),t.testBit(n)?r=i.testBit(n)?r.add(s):r.add(this):i.testBit(n)&&(r=r.add(e)),--n;return r},ot.prototype.getQ=function(){return this.q},ot.prototype.getA=function(){return this.a},ot.prototype.getB=function(){return this.b},ot.prototype.equals=function(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},ot.prototype.getInfinity=function(){return this.infinity},ot.prototype.fromBigInteger=function(t){return new rt(this.q,t)},ot.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var e=t.substr(0,2),i=(t.substr(2),this.fromBigInteger(new x(a,16))),n=this.getA(),r=this.getB(),s=i.square().add(n).multiply(i).add(r).sqrt();return"03"==e&&(s=s.negate()),new st(this,i,s);case 4:case 6:case 7:var o=(t.length-2)/2,a=t.substr(2,o),u=t.substr(o+2,o);return new st(this,this.fromBigInteger(new x(a,16)),this.fromBigInteger(new x(u,16)));default:return null}},rt.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},st.prototype.getEncoded=function(t){var e=function(t,e){var i=t.toByteArrayUnsigned();if(e<i.length)i=i.slice(i.length-e);else for(;e>i.length;)i.unshift(0);return i},i=this.getX().toBigInteger(),n=this.getY().toBigInteger(),r=e(i,32);return t?n.isEven()?r.unshift(2):r.unshift(3):(r.unshift(4),r=r.concat(e(n,32))),r},st.decodeFrom=function(t,e){e[0];var i=e.length-1,n=e.slice(1,1+i/2),r=e.slice(1+i/2,1+i);n.unshift(0),r.unshift(0);var s=new x(n),o=new x(r);return new st(t,t.fromBigInteger(s),t.fromBigInteger(o))},st.decodeFromHex=function(t,e){e.substr(0,2);var i=e.length-2,n=e.substr(2,i/2),r=e.substr(2+i/2,i/2),s=new x(n,16),o=new x(r,16);return new st(t,t.fromBigInteger(s),t.fromBigInteger(o))},st.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),i=t.y.subtract(this.y).divide(e),n=i.square().subtract(this.x).subtract(t.x),r=i.multiply(this.x.subtract(n)).subtract(this.y);return new st(this.curve,n,r)},st.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(x.valueOf(2)),e=this.curve.fromBigInteger(x.valueOf(3)),i=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),n=i.square().subtract(this.x.multiply(t)),r=i.multiply(this.x.subtract(n)).subtract(this.y);return new st(this.curve,n,r)},st.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,i=t,n=i.multiply(new x("3")),r=this.negate(),s=this;for(e=n.bitLength()-2;e>0;--e){s=s.twice();var o=n.testBit(e);o!=i.testBit(e)&&(s=s.add2D(o?this:r))}return s},st.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),i=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),r=this.curve.getQ(),s=e.multiply(e).mod(r),o=t.multiply(t).multiply(t).add(i.multiply(t)).add(n).mod(r);return s.equals(o)},st.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},st.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),i=this.getY().toBigInteger();if(e.compareTo(x.ONE)<0||e.compareTo(t.subtract(x.ONE))>0)throw new Error("x coordinate out of bounds");if(i.compareTo(x.ONE)<0||i.compareTo(t.subtract(x.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var at=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),i={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function n(t,e,n){return e?i[e]:String.fromCharCode(parseInt(n,16))}var r=new String(""),s=Object.hasOwnProperty;return function(i,o){var a,u,c=i.match(t),l=c[0],d=!1;"{"===l?a={}:"["===l?a=[]:(a=[],d=!0);for(var h=[a],f=1-d,g=c.length;f<g;++f){var p;switch((l=c[f]).charCodeAt(0)){default:(p=h[0])[u||p.length]=+l,u=void 0;break;case 34:if(-1!==(l=l.substring(1,l.length-1)).indexOf("\\")&&(l=l.replace(e,n)),p=h[0],!u){if(!(p instanceof Array)){u=l||r;break}u=p.length}p[u]=l,u=void 0;break;case 91:p=h[0],h.unshift(p[u||p.length]=[]),u=void 0;break;case 93:case 125:h.shift();break;case 102:(p=h[0])[u||p.length]=!1,u=void 0;break;case 110:(p=h[0])[u||p.length]=null,u=void 0;break;case 116:(p=h[0])[u||p.length]=!0,u=void 0;break;case 123:p=h[0],h.unshift(p[u||p.length]={}),u=void 0}}if(d){if(1!==h.length)throw new Error;a=a[0]}else if(h.length)throw new Error;if(o){var m=function(t,e){var i=t[e];if(i&&"object"==typeof i){var n=null;for(var r in i)if(s.call(i,r)&&i!==t){var a=m(i,r);void 0!==a?i[r]=a:(n||(n=[]),n.push(r))}if(n)for(var u=n.length;--u>=0;)delete i[n[u]]}return o.call(t,e,i)};a=m({"":a},"")}return a}}();void 0!==ut&&ut||(ut={}),void 0!==ut.asn1&&ut.asn1||(ut.asn1={}),ut.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var i=e.substr(1).length;i%2==1?i+=1:e.match(/^[0-7]/)||(i+=2);for(var n="",r=0;r<i;r++)n+="f";e=new x(n,16).xor(t).add(x.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return Ct(t,e)},this.newObject=function(t){var e=ut.asn1,i=e.ASN1Object,n=e.DERBoolean,r=e.DERInteger,s=e.DERBitString,o=e.DEROctetString,a=e.DERNull,u=e.DERObjectIdentifier,c=e.DEREnumerated,l=e.DERUTF8String,d=e.DERNumericString,h=e.DERPrintableString,f=e.DERTeletexString,g=e.DERIA5String,p=e.DERUTCTime,m=e.DERGeneralizedTime,v=e.DERVisibleString,y=e.DERBMPString,b=e.DERSequence,w=e.DERSet,x=e.DERTaggedObject,S=e.ASN1Util.newObject;if(t instanceof e.ASN1Object)return t;var E=Object.keys(t);if(1!=E.length)throw new Error("key of param shall be only one.");var _=E[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+_+":"))throw new Error("undefined key: "+_);if("bool"==_)return new n(t[_]);if("int"==_)return new r(t[_]);if("bitstr"==_)return new s(t[_]);if("octstr"==_)return new o(t[_]);if("null"==_)return new a(t[_]);if("oid"==_)return new u(t[_]);if("enum"==_)return new c(t[_]);if("utf8str"==_)return new l(t[_]);if("numstr"==_)return new d(t[_]);if("prnstr"==_)return new h(t[_]);if("telstr"==_)return new f(t[_]);if("ia5str"==_)return new g(t[_]);if("utctime"==_)return new p(t[_]);if("gentime"==_)return new m(t[_]);if("visstr"==_)return new v(t[_]);if("bmpstr"==_)return new y(t[_]);if("asn1"==_)return new i(t[_]);if("seq"==_){for(var A=t[_],F=[],I=0;I<A.length;I++){var C=S(A[I]);F.push(C)}return new b({array:F})}if("set"==_){for(A=t[_],F=[],I=0;I<A.length;I++){C=S(A[I]);F.push(C)}return new w({array:F})}if("tag"==_){var k=t[_];if("[object Array]"===Object.prototype.toString.call(k)&&3==k.length){var P=S(k[2]);return new x({tag:k[0],explicit:k[1],obj:P})}return new x(k)}},this.jsonToASN1HEX=function(t){return this.newObject(t).tohex()}},ut.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",i=parseInt(t.substr(0,2),16),n=(e=Math.floor(i/40)+"."+i%40,""),r=2;r<t.length;r+=2){var s=("00000000"+parseInt(t.substr(r,2),16).toString(2)).slice(-8);if(n+=s.substr(1,7),"0"==s.substr(0,1))e=e+"."+new x(n,2).toString(10),n=""}return e},ut.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},i=function(t){var i="",n=new x(t,10).toString(2),r=7-n.length%7;7==r&&(r=0);for(var s="",o=0;o<r;o++)s+="0";n=s+n;for(o=0;o<n.length-1;o+=7){var a=n.substr(o,7);o!=n.length-7&&(a="1"+a),i+=e(parseInt(a,2))}return i};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",r=t.split("."),s=40*parseInt(r[0])+parseInt(r[1]);n+=e(s),r.splice(0,2);for(var o=0;o<r.length;o++)n+=i(r[o]);return n},ut.asn1.ASN1Object=function(t){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var i=e.length/2;if(i>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+t.toString(16));return(128+i).toString(16)+e},this.tohex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(t){this.params=t},null!=t&&null!=t.tlv&&(this.hTLV=t.tlv,this.isModified=!1)},ut.asn1.DERAbstractString=function(t){ut.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=wt(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},$t(ut.asn1.DERAbstractString,ut.asn1.ASN1Object),ut.asn1.DERAbstractTime=function(t){ut.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(t){var e=t.getTime()+6e4*t.getTimezoneOffset();return new Date(e)},this.formatDate=function(t,e,i){var n=this.zeroPadding,r=this.localDateToUTC(t),s=String(r.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=s+n(String(r.getMonth()+1),2)+n(String(r.getDate()),2)+n(String(r.getHours()),2)+n(String(r.getMinutes()),2)+n(String(r.getSeconds()),2);if(!0===i){var a=r.getMilliseconds();if(0!=a){var u=n(String(a),3);o=o+"."+(u=u.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.setByParam=function(t){this.hV=null,this.hTLV=null,this.params=t},this.getString=function(){},this.setString=function(t){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.str=t},this.setByDate=function(t){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.date=t},this.setByDateValue=function(t,e,i,n,r,s){var o=new Date(Date.UTC(t,e-1,i,n,r,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},$t(ut.asn1.DERAbstractTime,ut.asn1.ASN1Object),ut.asn1.DERAbstractStructured=function(t){ut.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},$t(ut.asn1.DERAbstractStructured,ut.asn1.ASN1Object),ut.asn1.DERBoolean=function(t){ut.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==t?"010100":"0101ff"},$t(ut.asn1.DERBoolean,ut.asn1.ASN1Object),ut.asn1.DERInteger=function(t){ut.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=ut.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new x(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},$t(ut.asn1.DERInteger,ut.asn1.ASN1Object),ut.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=ut.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.tohex()}ut.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;this.hTLV=null,this.isModified=!0,this.hV=i+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0),t+="0000000".substr(0,e);for(var i="",n=0;n<t.length-1;n+=8){var r=t.substr(n,8),s=parseInt(r,2).toString(16);1==s.length&&(s="0"+s),i+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+i},this.setByBooleanArray=function(t){for(var e="",i=0;i<t.length;i++)1==t[i]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},$t(ut.asn1.DERBitString,ut.asn1.ASN1Object),ut.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=ut.asn1.ASN1Util.newObject(t.obj);t.hex=e.tohex()}ut.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},$t(ut.asn1.DEROctetString,ut.asn1.DERAbstractString),ut.asn1.DERNull=function(){ut.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},$t(ut.asn1.DERNull,ut.asn1.ASN1Object),ut.asn1.DERObjectIdentifier=function(t){ut.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){var e=Kt(t);if(null==e)throw new Error("malformed oid string: "+t);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueName=function(t){var e=ut.asn1.x509.OID.name2oid(t);if(""===e)throw new Error("DERObjectIdentifier oidName undefined: "+t);this.setValueOidString(e)},this.setValueNameOrOid=function(t){t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){"string"==typeof t?this.setValueNameOrOid(t):void 0!==t.oid?this.setValueNameOrOid(t.oid):void 0!==t.name?this.setValueNameOrOid(t.name):void 0!==t.hex&&this.setValueHex(t.hex)},void 0!==t&&this.setByParam(t)},$t(ut.asn1.DERObjectIdentifier,ut.asn1.ASN1Object),ut.asn1.DEREnumerated=function(t){ut.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=ut.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new x(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},$t(ut.asn1.DEREnumerated,ut.asn1.ASN1Object),ut.asn1.DERUTF8String=function(t){ut.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},$t(ut.asn1.DERUTF8String,ut.asn1.DERAbstractString),ut.asn1.DERNumericString=function(t){ut.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},$t(ut.asn1.DERNumericString,ut.asn1.DERAbstractString),ut.asn1.DERPrintableString=function(t){ut.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},$t(ut.asn1.DERPrintableString,ut.asn1.DERAbstractString),ut.asn1.DERTeletexString=function(t){ut.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},$t(ut.asn1.DERTeletexString,ut.asn1.DERAbstractString),ut.asn1.DERIA5String=function(t){ut.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},$t(ut.asn1.DERIA5String,ut.asn1.DERAbstractString),ut.asn1.DERVisibleString=function(t){ut.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="1a"},$t(ut.asn1.DERVisibleString,ut.asn1.DERAbstractString),ut.asn1.DERBMPString=function(t){ut.asn1.DERBMPString.superclass.constructor.call(this,t),this.hT="1e"},$t(ut.asn1.DERBMPString,ut.asn1.DERAbstractString),ut.asn1.DERUTCTime=function(t){ut.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var t=this.params;if(null==this.params&&(t={date:new Date}),"string"==typeof t){if(!t.match(/^[0-9]{12}Z$/)&&!t.match(/^[0-9]{12}\.[0-9]+Z$/))throw new Error("malformed string for UTCTime: "+t);this.hV=pt(t)}else if(null!=t.str)this.hV=pt(t.str);else if(null==t.date&&1==t.millis){var e=new Date;this.hV=pt(this.formatDate(e,"utc",!0))}else if(null!=t.date&&t.date instanceof Date){var i=!0===t.millis;this.hV=pt(this.formatDate(t.date,"utc",i))}else t instanceof Date&&(this.hV=pt(this.formatDate(t,"utc")));if(null==this.hV)throw new Error("parameter not specified properly for UTCTime");return this.hV},null!=t&&this.setByParam(t)},$t(ut.asn1.DERUTCTime,ut.asn1.DERAbstractTime),ut.asn1.DERGeneralizedTime=function(t){ut.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.params=t,this.getFreshValueHex=function(){var t=this.params;if(null==this.params&&(t={date:new Date}),"string"==typeof t){if(!t.match(/^[0-9]{14}Z$/)&&!t.match(/^[0-9]{14}\.[0-9]+Z$/))throw new Error("malformed string for GeneralizedTime: "+t);this.hV=pt(t)}else if(null!=t.str)this.hV=pt(t.str);else if(null==t.date&&1==t.millis){var e=new Date;this.hV=pt(this.formatDate(e,"gen",!0))}else if(null!=t.date&&t.date instanceof Date){var i=!0===t.millis;this.hV=pt(this.formatDate(t.date,"gen",i))}else t instanceof Date&&(this.hV=pt(this.formatDate(t,"gen")));if(null==this.hV)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},null!=t&&this.setByParam(t)},$t(ut.asn1.DERGeneralizedTime,ut.asn1.DERAbstractTime),ut.asn1.DERSequence=function(t){ut.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){t+=this.asn1Array[e].tohex()}return this.hV=t,this.hV}},$t(ut.asn1.DERSequence,ut.asn1.DERAbstractStructured),ut.asn1.DERSet=function(t){ut.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var i=this.asn1Array[e];t.push(i.tohex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},$t(ut.asn1.DERSet,ut.asn1.DERAbstractStructured),ut.asn1.DERTaggedObject=function(t){ut.asn1.DERTaggedObject.superclass.constructor.call(this);var e=ut.asn1,i=dt,n=i.getV,r=(i.isASN1HEX,e.ASN1Util.newObject);this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(t,e,i){this.params={tag:e,explicit:t,obj:i}},this.getFreshValueHex=function(){var t=this.params;if(null==t.explicit&&(t.explicit=!0),null!=t.tage&&(t.tag=t.tage,t.explicit=!0),null!=t.tagi&&(t.tag=t.tagi,t.explicit=!1),null!=t.str)this.hV=wt(t.str);else if(null!=t.hex)this.hV=t.hex;else{if(null==t.obj)throw new Error("str, hex nor obj not specified");var i;t.obj instanceof e.ASN1Object?i=t.obj.tohex():"object"==typeof t.obj&&(i=r(t.obj).tohex()),t.explicit?this.hV=i:this.hV=n(i,0)}return null==t.tag&&(t.tag="a0"),this.hT=t.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},$t(ut.asn1.DERTaggedObject,ut.asn1.ASN1Object);var ut,ct,lt,dt=new function(){};function ht(t){for(var e=new Array,i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}function ft(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e}function gt(t){for(var e="",i=0;i<t.length;i++){var n=t[i].toString(16);1==n.length&&(n="0"+n),e+=n}return e}function pt(t){return gt(ht(t))}function mt(t){return t=(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function vt(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),t=(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function yt(t){return t.length%2==1&&(t="0"+t),mt(y(t))}function bt(t){return b(vt(t))}function wt(t){return Ot(Lt(t)).toLowerCase()}function xt(t){try{return decodeURIComponent(Rt(t))}catch(t){return null}}function St(t){return xt(function(t){for(var e=t.match(/.{1,2}/g),i=[],n=0;n<e.length;n++){var r=parseInt(e[n],16);161<=r&&r<=191?(i.push("c2"),i.push(e[n])):192<=r&&r<=255?(i.push("c3"),i.push((r-64).toString(16))):i.push(e[n])}return i.join("")}(t))}function Et(t){for(var e="",i=0;i<t.length-1;i+=2)e+=String.fromCharCode(parseInt(t.substr(i,2),16));return e}function _t(t){for(var e="",i=0;i<t.length;i++)e+=("0"+t.charCodeAt(i).toString(16)).slice(-2);return e}function At(t){return y(t)}function Ft(t){var e=At(t).replace(/(.{64})/g,"$1\r\n");return e=e.replace(/\r\n$/,"")}function It(t){return b(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Ct(t,e){return"-----BEGIN "+e+"-----\r\n"+Ft(t)+"\r\n-----END "+e+"-----\r\n"}function kt(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return It(t=void 0!==e?(t=t.replace(new RegExp("^[^]*-----BEGIN "+e+"-----"),"")).replace(new RegExp("-----END "+e+"-----[^]*$"),""):(t=t.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Pt(t){var e,i,n,r,s,o,a,u,c,l,d;if(d=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=d[1],e=parseInt(u),2===u.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),i=parseInt(d[2])-1,n=parseInt(d[3]),r=parseInt(d[4]),s=parseInt(d[5]),o=parseInt(d[6]),a=0,""!==(c=d[7])&&(l=(c.substr(1)+"00").substr(0,3),a=parseInt(l)),Date.UTC(e,i,n,r,s,o,a);throw new Error("unsupported zulu format: "+t)}function Tt(t){return Math.round(Pt(t)/1e3)}function Ot(t){return t.replace(/%/g,"")}function Rt(t){return t.replace(/(..)/g,"%$1")}function Dt(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;var i=(t=t.toLowerCase()).split(":").length-1;if(i<2)throw e;var n=":".repeat(7-i+2),r=(t=t.replace("::",n)).split(":");if(8!=r.length)throw e;for(var s=0;s<8;s++)r[s]=("0000"+r[s]).slice(-4);return r.join("")}function Bt(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+t);var e=(t=t.toLowerCase()).match(/.{1,4}/g);e=e.map((function(t){return t.replace(/^0+/,"")})),e=e.map((function(t){return""==t?"0":t}));var i=(t=":"+e.join(":")+":").match(/:(0:){2,}/g);if(null==i)return t.slice(1,-1);var n=i.sort().slice(-1)[0];return"::"!=(t=t.replace(n.substr(0,n.length-1),":")).substr(0,2)&&(t=t.substr(1)),"::"!=t.substr(-2,2)&&(t=t.substr(0,t.length-1)),t}function Nt(t){var e=new Error("malformed hex value");if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(8==t.length){try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(t){throw e}}else{if(16!=t.length){if(32==t.length)return Bt(t);if(64==t.length){try{return Bt(t.substr(0,32))+"/"+Mt(t.substr(32))}catch(t){throw e}return}return t}try{return Nt(t.substr(0,8))+"/"+Mt(t.substr(8))}catch(t){throw e}}}function Mt(t){var e,i=new Error("malformed mask");try{e=new x(t,16).toString(2)}catch(t){throw i}if(!e.match(/^1*0*$/))throw i;return e.replace(/0+$/,"").length}function jt(t){var e=new Error("malformed IP address");if(!(t=t.toLowerCase(t)).match(/^[0-9a-f.:/]+$/))throw e;if(!t.match(/^[0-9.]+$/)){var i;if(t.match(/^[0-9.]+\/[0-9]+$/))return jt((i=t.split("/"))[0])+zt(parseInt(i[1]),32);if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return Dt(t);if(t.match(/^[0-9a-f:]+\/[0-9]+$/)&&-1!==t.indexOf(":"))return Dt((i=t.split("/"))[0])+zt(parseInt(i[1]),128);throw e}var n=t.split(".");if(4!==n.length)throw e;var r="";try{for(var s=0;s<4;s++){r+=("0"+parseInt(n[s]).toString(16)).slice(-2)}return r}catch(t){throw e}}function zt(t,e){return 32==e&&0==t?"00000000":128==e&&0==t?"00000000000000000000000000000000":new x(Array(t+1).join("1")+Array(e-t+1).join("0"),2).toString(16)}function Ht(t){var e=t.match(/.{4}/g).map((function(t){var e=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2),16);if(0==e&i<128)return String.fromCharCode(i);if(e<8){var n=128|63&i;return xt((192|(7&e)<<3|(192&i)>>6).toString(16)+n.toString(16))}n=128|(15&e)<<2|(192&i)>>6;var r=128|63&i;return xt((224|(240&e)>>4).toString(16)+n.toString(16)+r.toString(16))}));return e.join("")}function Lt(t){for(var e=encodeURIComponent(t),i="",n=0;n<e.length;n++)"%"==e[n]?(i+=e.substr(n,3),n+=2):i=i+"%"+pt(e[n]);return i}function Vt(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))}function Ut(t){return!!t.match(/^[0-9A-Za-z-_.]+$/)}function qt(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}dt.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var i=parseInt(t.substr(e+3,1));return 0==i?-1:0<i&&i<10?i+1:-2},dt.getL=function(t,e){var i=dt.getLblen(t,e);return i<1?"":t.substr(e+2,2*i)},dt.getVblen=function(t,e){var i;return""==(i=dt.getL(t,e))?-1:("8"===i.substr(0,1)?new x(i.substr(2),16):new x(i,16)).intValue()},dt.getVidx=function(t,e){var i=dt.getLblen(t,e);return i<0?i:e+2*(i+1)},dt.getV=function(t,e){var i=dt.getVidx(t,e),n=dt.getVblen(t,e);return t.substr(i,2*n)},dt.getTLV=function(t,e){return t.substr(e,2)+dt.getL(t,e)+dt.getV(t,e)},dt.getTLVblen=function(t,e){return 2+2*dt.getLblen(t,e)+2*dt.getVblen(t,e)},dt.getNextSiblingIdx=function(t,e){return dt.getVidx(t,e)+2*dt.getVblen(t,e)},dt.getChildIdx=function(t,e){var i,n,r,s=dt,o=[];i=s.getVidx(t,e),n=2*s.getVblen(t,e),"03"==t.substr(e,2)&&(i+=2,n-=2),r=0;for(var a=i;r<=n;){var u=s.getTLVblen(t,a);if((r+=u)<=n&&o.push(a),a+=u,r>=n)break}return o},dt.getNthChildIdx=function(t,e,i){return dt.getChildIdx(t,e)[i]},dt.getIdxbyList=function(t,e,i,n){var r,s,o=dt;return 0==i.length?void 0!==n&&t.substr(e,2)!==n?-1:e:(r=i.shift())>=(s=o.getChildIdx(t,e)).length?-1:o.getIdxbyList(t,s[r],i,n)},dt.getIdxbyListEx=function(t,e,i,n){var r,s,o=dt;if(0==i.length)return void 0!==n&&t.substr(e,2)!==n?-1:e;r=i.shift(),s=o.getChildIdx(t,e);for(var a=0,u=0;u<s.length;u++){var c=t.substr(s[u],2);if("number"==typeof r&&!o.isContextTag(c)&&a==r||"string"==typeof r&&o.isContextTag(c,r))return o.getIdxbyListEx(t,s[u],i,n);o.isContextTag(c)||a++}return-1},dt.getTLVbyList=function(t,e,i,n){var r=dt,s=r.getIdxbyList(t,e,i,n);return-1==s||s>=t.length?null:r.getTLV(t,s)},dt.getTLVbyListEx=function(t,e,i,n){var r=dt,s=r.getIdxbyListEx(t,e,i,n);return-1==s?null:r.getTLV(t,s)},dt.getVbyList=function(t,e,i,n,r){var s,o,a=dt;return-1==(s=a.getIdxbyList(t,e,i,n))||s>=t.length?null:(o=a.getV(t,s),!0===r&&(o=o.substr(2)),o)},dt.getVbyListEx=function(t,e,i,n,r){var s,o,a=dt;return-1==(s=a.getIdxbyListEx(t,e,i,n))?null:(o=a.getV(t,s),"03"==t.substr(s,2)&&!1!==r&&(o=o.substr(2)),o)},dt.getInt=function(t,e,i){null==i&&(i=-1);try{var n=t.substr(e,2);if("02"!=n&&"03"!=n)return i;var r=dt.getV(t,e);return"02"==n?parseInt(r,16):Jt(r)}catch(t){return i}},dt.getOID=function(t,e,i){null==i&&(i=null);try{return"06"!=t.substr(e,2)?i:Gt(dt.getV(t,e))}catch(t){return i}},dt.getOIDName=function(t,e,i){null==i&&(i=null);try{var n=dt.getOID(t,e,i);if(n==i)return i;var r=ut.asn1.x509.OID.oid2name(n);return""==r?n:r}catch(t){return i}},dt.getString=function(t,e,i){null==i&&(i=null);try{return Et(dt.getV(t,e))}catch(t){return i}},dt.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},i=[],n=t.substr(0,2),r=parseInt(n,16);i[0]=new String(Math.floor(r/40)),i[1]=new String(r%40);for(var s=t.substr(2),o=[],a=0;a<s.length/2;a++)o.push(parseInt(s.substr(2*a,2),16));var u=[],c="";for(a=0;a<o.length;a++)128&o[a]?c+=e((127&o[a]).toString(2),7):(c+=e((127&o[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var l=i.join(".");return u.length>0&&(l=l+"."+u.join(".")),l},dt.dump=function(t,e,i,n){var r=dt,s=r.getV,o=r.dump,a=r.getChildIdx,u=t;t instanceof ut.asn1.ASN1Object&&(u=t.tohex());var c=function(t,e){return t.length<=2*e?t:t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e)};void 0===e&&(e={ommit_long_octet:32}),void 0===i&&(i=0),void 0===n&&(n="");var l,d=e.ommit_long_octet;if("01"==(l=u.substr(i,2)))return"00"==(h=s(u,i))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==l)return n+"INTEGER "+c(h=s(u,i),d)+"\n";if("03"==l){var h=s(u,i);if(r.isASN1HEX(h.substr(2))){var f=n+"BITSTRING, encapsulates\n";return f+=o(h.substr(2),e,0,n+"  ")}return n+"BITSTRING "+c(h,d)+"\n"}if("04"==l){h=s(u,i);if(r.isASN1HEX(h)){f=n+"OCTETSTRING, encapsulates\n";return f+=o(h,e,0,n+"  ")}return n+"OCTETSTRING "+c(h,d)+"\n"}if("05"==l)return n+"NULL\n";if("06"==l){var g=s(u,i),p=ut.asn1.ASN1Util.oidHexToInt(g),m=ut.asn1.x509.OID.oid2name(p),v=p.replace(/\./g," ");return""!=m?n+"ObjectIdentifier "+m+" ("+v+")\n":n+"ObjectIdentifier ("+v+")\n"}if("0a"==l)return n+"ENUMERATED "+parseInt(s(u,i))+"\n";if("0c"==l)return n+"UTF8String '"+xt(s(u,i))+"'\n";if("13"==l)return n+"PrintableString '"+xt(s(u,i))+"'\n";if("14"==l)return n+"TeletexString '"+xt(s(u,i))+"'\n";if("16"==l)return n+"IA5String '"+xt(s(u,i))+"'\n";if("17"==l)return n+"UTCTime "+xt(s(u,i))+"\n";if("18"==l)return n+"GeneralizedTime "+xt(s(u,i))+"\n";if("1a"==l)return n+"VisualString '"+xt(s(u,i))+"'\n";if("1e"==l)return n+"BMPString '"+Ht(s(u,i))+"'\n";if("30"==l){if("3000"==u.substr(i,4))return n+"SEQUENCE {}\n";f=n+"SEQUENCE\n";var y=e;if((2==(x=a(u,i)).length||3==x.length)&&"06"==u.substr(x[0],2)&&"04"==u.substr(x[x.length-1],2)){m=r.oidname(s(u,x[0]));var b=JSON.parse(JSON.stringify(e));b.x509ExtName=m,y=b}for(var w=0;w<x.length;w++)f+=o(u,y,x[w],n+"  ");return f}if("31"==l){f=n+"SET\n";var x=a(u,i);for(w=0;w<x.length;w++)f+=o(u,e,x[w],n+"  ");return f}if(0!=(128&(l=parseInt(l,16)))){var S=31&l;if(0!=(32&l)){for(f=n+"["+S+"]\n",x=a(u,i),w=0;w<x.length;w++)f+=o(u,e,x[w],n+"  ");return f}h=s(u,i);if(dt.isASN1HEX(h)){var f=n+"["+S+"]\n";return f+=o(h,e,0,n+"  ")}return("68747470"==h.substr(0,8)||"subjectAltName"===e.x509ExtName&&2==S)&&(h=xt(h)),f=n+"["+S+"] "+h+"\n"}return n+"UNKNOWN("+l+") "+s(u,i)+"\n"},dt.parse=function(t){var e=dt,i=e.parse,n=e.isASN1HEX,r=e.getV,s=e.getTLV,o=e.getChildIdx,a=ut.asn1,u=a.ASN1Util.oidHexToInt,c=a.x509.OID.oid2name,l=xt,d=Ht,h=St,f={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},g=t.substr(0,2),p={},m=r(t,0);if("01"==g)return"0101ff"==t?{bool:!0}:{bool:!1};if("02"==g)return{int:{hex:m}};if("03"==g)try{if("00"!=m.substr(0,2))throw"not encap";var v=m.substr(2);if(!n(v))throw"not encap";return{bitstr:{obj:i(v)}}}catch(t){var y=null;return m.length<=10&&(y=Xt(m)),null==y?{bitstr:{hex:m}}:{bitstr:{bin:y}}}else if("04"==g)try{if(!n(m))throw"not encap";return{octstr:{obj:i(m)}}}catch(t){return{octstr:{hex:m}}}else{if("05"==g)return{null:""};if("06"==g){var b=u(m),w=c(b);return""==w?{oid:b}:{oid:w}}if("0a"==g)return m.length>4?{enum:{hex:m}}:{enum:parseInt(m,16)};if("30"==g||"31"==g)return p[f[g]]=function(t){for(var e=[],n=o(t,0),r=0;r<n.length;r++){var a=n[r],u=s(t,a),c=i(u);e.push(c)}return e}(t),p;if("14"==g){var x=h(m);return p[f[g]]={str:x},p}if("1e"==g){x=d(m);return p[f[g]]={str:x},p}if(-1!=":0c:12:13:16:17:18:1a:".indexOf(g)){x=l(m);return p[f[g]]={str:x},p}if(g.match(/^8[0-9]$/))return null==(x=l(m))|""==x||null!=x.match(/[\x00-\x1F\x7F-\x9F]/)||null!=x.match(/[\u0000-\u001F\u0080\u009F]/)?{tag:{tag:g,explicit:!1,hex:m}}:{tag:{tag:g,explicit:!1,str:x}};if(!g.match(/^a[0-9]$/)){var S=new ut.asn1.ASN1Object;return S.hV=m,{asn1:{tlv:g+S.getLengthHexFromValue()+m}}}try{if(!n(m))throw new Error("not encap");return{tag:{tag:g,explicit:!0,obj:i(m)}}}catch(t){return{tag:{tag:g,explicit:!0,hex:m}}}}},dt.isContextTag=function(t,e){var i,n;t=t.toLowerCase();try{i=parseInt(t,16)}catch(t){return-1}if(void 0===e)return 128==(192&i);try{return null!=e.match(/^\[[0-9]+\]$/)&&(!((n=parseInt(e.substr(1,e.length-1),10))>31)&&(128==(192&i)&&(31&i)==n))}catch(t){return!1}},dt.isASN1HEX=function(t){var e=dt;if(t.length%2==1)return!1;var i=e.getVblen(t,0),n=t.substr(0,2),r=e.getL(t,0);return t.length-n.length-r.length==2*i},dt.checkStrictDER=function(t,e,i,n,r){var s=dt;if(void 0===i){if("string"!=typeof t)throw new Error("not hex string");if(t=t.toLowerCase(),!ut.lang.String.isHex(t))throw new Error("not hex string");i=t.length,r=(n=t.length/2)<128?1:Math.ceil(n.toString(16))+1}if(s.getL(t,e).length>2*r)throw new Error("L of TLV too long: idx="+e);var o=s.getVblen(t,e);if(o>n)throw new Error("value of L too long than hex: idx="+e);var a=s.getTLV(t,e),u=a.length-2-s.getL(t,e).length;if(u!==2*o)throw new Error("V string length and L's value not the same:"+u+"/"+2*o);if(0===e&&t.length!=a.length)throw new Error("total length and TLV length unmatch:"+t.length+"!="+a.length);var c=t.substr(e,2);if("02"===c){var l=s.getVidx(t,e);if("00"==t.substr(l,2)&&t.charCodeAt(l+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(c,16)){for(var d=s.getVblen(t,e),h=0,f=s.getChildIdx(t,e),g=0;g<f.length;g++){h+=s.getTLV(t,f[g]).length,s.checkStrictDER(t,f[g],i,n,r)}if(2*d!=h)throw new Error("sum of children's TLV length and L unmatch: "+2*d+"!="+h)}},dt.oidname=function(t){var e=ut.asn1;ut.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var i=e.x509.OID.oid2name(t);return""===i&&(i=t),i},void 0!==ut&&ut||(ut={}),void 0!==ut.asn1&&ut.asn1||(ut.asn1={}),void 0!==ut.asn1.x509&&ut.asn1.x509||(ut.asn1.x509={}),ut.asn1.x509.Certificate=function(t){ut.asn1.x509.Certificate.superclass.constructor.call(this);var e=ut.asn1,i=e.DERBitString,n=e.DERSequence,r=e.x509,s=r.TBSCertificate,o=r.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(t){this.params=t},this.sign=function(){var t=this.params,e=t.sigalg;null!=t.sigalg.name&&(e=t.sigalg.name);var i=t.tbsobj.tohex(),n=new ut.crypto.Signature({alg:e});n.init(t.cakey),n.updateHex(i),t.sighex=n.sign()},this.getPEM=function(){return Ct(this.tohex(),"CERTIFICATE")},this.tohex=function(){var t=this.params;if(null!=t.tbsobj&&null!=t.tbsobj||(t.tbsobj=new s(t)),null==t.sighex&&null!=t.cakey&&this.sign(),null==t.sighex)throw new Error("sighex or cakey parameter not defined");var e=[];return e.push(t.tbsobj),e.push(new o({name:t.sigalg})),e.push(new i({hex:"00"+t.sighex})),new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&(this.params=t)},$t(ut.asn1.x509.Certificate,ut.asn1.ASN1Object),ut.asn1.x509.TBSCertificate=function(t){ut.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=ut.asn1,i=e.x509,n=e.DERTaggedObject,r=e.DERInteger,s=e.DERSequence,o=i.AlgorithmIdentifier,a=i.Time,u=i.X500Name,c=i.Extensions,l=i.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=[],e=this.params;if(null!=e.version||1!=e.version){var i=2;null!=e.version&&(i=e.version-1);var d=new n({obj:new r({int:i})});t.push(d)}return t.push(new r(e.serial)),t.push(new o({name:e.sigalg})),t.push(new u(e.issuer)),t.push(new s({array:[new a(e.notbefore),new a(e.notafter)]})),t.push(new u(e.subject)),t.push(new l(Qt.getKey(e.sbjpubkey))),void 0!==e.ext&&e.ext.length>0&&t.push(new n({tag:"a3",obj:new c(e.ext)})),new ut.asn1.DERSequence({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.x509.TBSCertificate,ut.asn1.ASN1Object),ut.asn1.x509.Extensions=function(t){ut.asn1.x509.Extensions.superclass.constructor.call(this);var e=ut.asn1,i=e.DERSequence,n=e.x509;this.aParam=[],this.setByParam=function(t){this.aParam=t},this.tohex=function(){for(var t=[],e=0;e<this.aParam.length;e++){var r=this.aParam[e],s=r.extname,o=null;if(null!=r.extn)o=new n.PrivateExtension(r);else if("subjectKeyIdentifier"==s)o=new n.SubjectKeyIdentifier(r);else if("keyUsage"==s)o=new n.KeyUsage(r);else if("subjectAltName"==s)o=new n.SubjectAltName(r);else if("issuerAltName"==s)o=new n.IssuerAltName(r);else if("basicConstraints"==s)o=new n.BasicConstraints(r);else if("nameConstraints"==s)o=new n.NameConstraints(r);else if("cRLDistributionPoints"==s)o=new n.CRLDistributionPoints(r);else if("certificatePolicies"==s)o=new n.CertificatePolicies(r);else if("authorityKeyIdentifier"==s)o=new n.AuthorityKeyIdentifier(r);else if("extKeyUsage"==s)o=new n.ExtKeyUsage(r);else if("authorityInfoAccess"==s)o=new n.AuthorityInfoAccess(r);else if("cRLNumber"==s)o=new n.CRLNumber(r);else if("cRLReason"==s)o=new n.CRLReason(r);else if("ocspNonce"==s)o=new n.OCSPNonce(r);else if("ocspNoCheck"==s)o=new n.OCSPNoCheck(r);else if("adobeTimeStamp"==s)o=new n.AdobeTimeStamp(r);else{if("subjectDirectoryAttributes"!=s)throw new Error("extension not supported:"+JSON.stringify(r));o=new n.SubjectDirectoryAttributes(r)}null!=o&&t.push(o)}return new i({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.x509.Extensions,ut.asn1.ASN1Object),ut.asn1.x509.Extension=function(t){ut.asn1.x509.Extension.superclass.constructor.call(this);var e=ut.asn1,i=e.DERObjectIdentifier,n=e.DEROctetString,r=(e.DERBitString,e.DERBoolean),s=e.DERSequence;this.tohex=function(){var t=new i({oid:this.oid}),e=new n({hex:this.getExtnValueHex()}),o=new Array;return o.push(t),this.critical&&o.push(new r),o.push(e),new s({array:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},$t(ut.asn1.x509.Extension,ut.asn1.ASN1Object),ut.asn1.x509.KeyUsage=function(t){ut.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=Error,i={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var t=this.getBinValue();return this.asn1ExtnValue=new ut.asn1.DERBitString({bin:t}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var t=this.params;if("object"!=typeof t||"object"!=typeof t.names&&"string"!=typeof t.bin)throw new e("parameter not yet set");if(null!=t.names)return Zt(t.names,i);if(null!=t.bin)return t.bin;throw new e("parameter not set properly")},this.oid="2.5.29.15",void 0!==t&&(this.params=t)},$t(ut.asn1.x509.KeyUsage,ut.asn1.x509.Extension),ut.asn1.x509.BasicConstraints=function(t){ut.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);var e=ut.asn1,i=e.DERBoolean,n=e.DERInteger,r=e.DERSequence;this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new i),this.pathLen>-1&&t.push(new n({int:this.pathLen}));var e=new r({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},$t(ut.asn1.x509.BasicConstraints,ut.asn1.x509.Extension),ut.asn1.x509.CRLDistributionPoints=function(t){ut.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=ut.asn1,i=e.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(t){for(var n=[],r=0;r<t.length;r++)if(t[r]instanceof ut.asn1.ASN1Object)n.push(t[r]);else{var s=new i.DistributionPoint(t[r]);n.push(s)}this.asn1ExtnValue=new e.DERSequence({array:n})},this.setByOneURI=function(t){var e=new i.DistributionPoint({fulluri:t});this.setByDPArray([e])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},$t(ut.asn1.x509.CRLDistributionPoints,ut.asn1.x509.Extension),ut.asn1.x509.DistributionPoint=function(t){ut.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=ut.asn1,i=e.x509.DistributionPointName;this.tohex=function(){var t=new e.DERSequence;if(null!=this.asn1DP){var i=new e.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(i)}return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(void 0!==t.dpobj?this.asn1DP=t.dpobj:void 0!==t.dpname?this.asn1DP=new i(t.dpname):void 0!==t.fulluri&&(this.asn1DP=new i({full:[{uri:t.fulluri}]})))},$t(ut.asn1.x509.DistributionPoint,ut.asn1.ASN1Object),ut.asn1.x509.DistributionPointName=function(t){ut.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=ut.asn1,i=e.DERTaggedObject;if(this.tohex=function(){if("full"!=this.type)throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new i({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t)if(e.x509.GeneralNames.prototype.isPrototypeOf(t))this.type="full",this.tag="a0",this.asn1V=t;else{if(void 0===t.full)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new e.x509.GeneralNames(t.full)}},$t(ut.asn1.x509.DistributionPointName,ut.asn1.ASN1Object),ut.asn1.x509.CertificatePolicies=function(t){ut.asn1.x509.CertificatePolicies.superclass.constructor.call(this,t);var e=ut.asn1,i=e.x509,n=e.DERSequence,r=i.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var t=[],e=0;e<this.params.array.length;e++)t.push(new r(this.params.array[e]));var i=new n({array:t});return this.asn1ExtnValue=i,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",void 0!==t&&(this.params=t)},$t(ut.asn1.x509.CertificatePolicies,ut.asn1.x509.Extension),ut.asn1.x509.PolicyInformation=function(t){ut.asn1.x509.PolicyInformation.superclass.constructor.call(this,t);var e=ut.asn1,i=e.DERSequence,n=e.DERObjectIdentifier,r=e.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var t=[new n(this.params.policyoid)];if(void 0!==this.params.array){for(var e=[],s=0;s<this.params.array.length;s++)e.push(new r(this.params.array[s]));e.length>0&&t.push(new i({array:e}))}return new i({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},$t(ut.asn1.x509.PolicyInformation,ut.asn1.ASN1Object),ut.asn1.x509.PolicyQualifierInfo=function(t){ut.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,t);var e=ut.asn1,i=e.DERSequence,n=e.DERIA5String,r=e.DERObjectIdentifier,s=e.x509.UserNotice;this.params=null,this.tohex=function(){return void 0!==this.params.cps?new i({array:[new r({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]}).tohex():null!=this.params.unotice?new i({array:[new r({oid:"1.3.6.1.5.5.7.2.2"}),new s(this.params.unotice)]}).tohex():void 0},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},$t(ut.asn1.x509.PolicyQualifierInfo,ut.asn1.ASN1Object),ut.asn1.x509.UserNotice=function(t){ut.asn1.x509.UserNotice.superclass.constructor.call(this,t);var e=ut.asn1.DERSequence,i=(ut.asn1.DERInteger,ut.asn1.x509.DisplayText),n=ut.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var t=[];return void 0!==this.params.noticeref&&t.push(new n(this.params.noticeref)),void 0!==this.params.exptext&&t.push(new i(this.params.exptext)),new e({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},$t(ut.asn1.x509.UserNotice,ut.asn1.ASN1Object),ut.asn1.x509.NoticeReference=function(t){ut.asn1.x509.NoticeReference.superclass.constructor.call(this,t);var e=ut.asn1.DERSequence,i=ut.asn1.DERInteger,n=ut.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var t=[];if(void 0!==this.params.org&&t.push(new n(this.params.org)),void 0!==this.params.noticenum){for(var r=[],s=this.params.noticenum,o=0;o<s.length;o++)r.push(new i(s[o]));t.push(new e({array:r}))}if(0==t.length)throw new Error("parameter is empty");return new e({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},$t(ut.asn1.x509.NoticeReference,ut.asn1.ASN1Object),ut.asn1.x509.DisplayText=function(t){ut.asn1.x509.DisplayText.superclass.constructor.call(this,t),this.hT="0c",void 0!==t&&("ia5"===t.type?this.hT="16":"vis"===t.type?this.hT="1a":"bmp"===t.type&&(this.hT="1e"))},$t(ut.asn1.x509.DisplayText,ut.asn1.DERAbstractString),ut.asn1.x509.NameConstraints=function(t){ut.asn1.x509.NameConstraints.superclass.constructor.call(this,t);var e=ut.asn1,i=e.x509,n=e.ASN1Util.newObject,r=i.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var t=this.params,e=[];if(null!=t.permit&&null!=t.permit.length){for(var i=[],s=0;s<t.permit.length;s++)i.push(new r(t.permit[s]));e.push({tag:{tagi:"a0",obj:{seq:i}}})}if(null!=t.exclude&&null!=t.exclude.length){var o=[];for(s=0;s<t.exclude.length;s++)o.push(new r(t.exclude[s]));e.push({tag:{tagi:"a1",obj:{seq:o}}})}return this.asn1ExtnValue=n({seq:e}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",void 0!==t&&(this.params=t)},$t(ut.asn1.x509.NameConstraints,ut.asn1.x509.Extension),ut.asn1.x509.GeneralSubtree=function(t){ut.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var e=ut.asn1,i=e.x509.GeneralName,n=e.ASN1Util.newObject;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params,e=[new i(t)];return null!=t.min&&e.push({tag:{tagi:"80",obj:{int:t.min}}}),null!=t.max&&e.push({tag:{tagi:"81",obj:{int:t.max}}}),n({seq:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.x509.GeneralSubtree,ut.asn1.ASN1Object),ut.asn1.x509.ExtKeyUsage=function(t){ut.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=ut.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new e.DERSequence;for(var i=0;i<t.length;i++){var n=new e.DERObjectIdentifier(t[i]);this.asn1ExtnValue.appendASN1Object(n)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},$t(ut.asn1.x509.ExtKeyUsage,ut.asn1.x509.Extension),ut.asn1.x509.AuthorityKeyIdentifier=function(t){ut.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=ut,i=e.asn1,n=i.DERTaggedObject,r=i.x509.GeneralNames;e.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new n({explicit:!1,tag:"a1",obj:new r([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&t.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var e=new i.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(t){if(void 0!==t.str||void 0!==t.hex)this.asn1KID=new ut.asn1.DEROctetString(t);else if("object"==typeof t&&ut.crypto.Util.isKey(t)||"string"==typeof t&&-1!=t.indexOf("BEGIN ")){var e=t;"string"==typeof t&&(e=Qt.getKey(t));var i=Qt.getKeyID(e);this.asn1KID=new ut.asn1.DEROctetString({hex:i})}},this.setCertIssuerByParam=function(t){void 0!==t.str||void 0!==t.ldapstr||void 0!==t.hex||void 0!==t.certsubject||void 0!==t.certissuer?this.asn1CertIssuer=new ut.asn1.x509.X500Name(t):"string"==typeof t&&-1!=t.indexOf("BEGIN ")&&-1!=t.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new ut.asn1.x509.X500Name({certissuer:t}))},this.setCertSNByParam=function(t){if(void 0!==t.str||void 0!==t.bigint||void 0!==t.hex)this.asn1CertSN=new ut.asn1.DERInteger(t);else if("string"==typeof t&&-1!=t.indexOf("BEGIN ")&&t.indexOf("CERTIFICATE")){var e=new ne;e.readCertPEM(t);var i=e.getSerialNumberHex();this.asn1CertSN=new ut.asn1.DERInteger({hex:i})}},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn),void 0!==t.issuersn&&"string"==typeof t.issuersn&&-1!=t.issuersn.indexOf("BEGIN ")&&t.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(t.issuersn),this.setCertIssuerByParam(t.issuersn)))},$t(ut.asn1.x509.AuthorityKeyIdentifier,ut.asn1.x509.Extension),ut.asn1.x509.SubjectKeyIdentifier=function(t){ut.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,t);var e=ut.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(t){if(void 0!==t.str||void 0!==t.hex)this.asn1KID=new e(t);else if("object"==typeof t&&ut.crypto.Util.isKey(t)||"string"==typeof t&&-1!=t.indexOf("BEGIN")){var i=t;"string"==typeof t&&(i=Qt.getKey(t));var n=Qt.getKeyID(i);this.asn1KID=new ut.asn1.DEROctetString({hex:n})}},this.oid="2.5.29.14",void 0!==t&&void 0!==t.kid&&this.setKIDByParam(t.kid)},$t(ut.asn1.x509.SubjectKeyIdentifier,ut.asn1.x509.Extension),ut.asn1.x509.AuthorityInfoAccess=function(t){ut.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,i=ut.asn1,n=i.DERSequence,r=i.DERObjectIdentifier,s=i.x509.GeneralName,o=0;o<t.length;o++){var a,u=t[o];if(void 0!==u.ocsp)a=new n({array:[new r({oid:"1.3.6.1.5.5.7.48.1"}),new s({uri:u.ocsp})]});else{if(void 0===u.caissuer)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(u));a=new n({array:[new r({oid:"1.3.6.1.5.5.7.48.2"}),new s({uri:u.caissuer})]})}e.push(a)}this.asn1ExtnValue=new n({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},$t(ut.asn1.x509.AuthorityInfoAccess,ut.asn1.x509.Extension),ut.asn1.x509.SubjectAltName=function(t){ut.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new ut.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},$t(ut.asn1.x509.SubjectAltName,ut.asn1.x509.Extension),ut.asn1.x509.IssuerAltName=function(t){ut.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new ut.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},$t(ut.asn1.x509.IssuerAltName,ut.asn1.x509.Extension),ut.asn1.x509.SubjectDirectoryAttributes=function(t){ut.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,t);var e=ut.asn1,i=e.DERSequence,n=e.ASN1Util.newObject,r=e.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var t=[],e=0;e<this.params.array.length;e++){var s=this.params.array[e],o={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if("dateOfBirth"==s.attr)o.seq[0].oid=r(s.attr),o.seq[1].set[0]={gentime:s.str};else if("placeOfBirth"==s.attr)o.seq[0].oid=r(s.attr),o.seq[1].set[0]={utf8str:s.str};else if("gender"==s.attr)o.seq[0].oid=r(s.attr),o.seq[1].set[0]={prnstr:s.str};else if("countryOfCitizenship"==s.attr)o.seq[0].oid=r(s.attr),o.seq[1].set[0]={prnstr:s.str};else{if("countryOfResidence"!=s.attr)throw new Error("unsupported attribute: "+s.attr);o.seq[0].oid=r(s.attr),o.seq[1].set[0]={prnstr:s.str}}t.push(new n(o))}var a=new i({array:t});return this.asn1ExtnValue=a,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",void 0!==t&&(this.params=t)},$t(ut.asn1.x509.SubjectDirectoryAttributes,ut.asn1.x509.Extension),ut.asn1.x509.PrivateExtension=function(t){ut.asn1.x509.PrivateExtension.superclass.constructor.call(this,t);var e=ut,i=e.lang.String.isHex,n=e.asn1,r=n.x509.OID.name2oid,s=n.ASN1Util.newObject;this.params=null,this.setByParam=function(t){this.oid=r(t.extname),this.params=t},this.getExtnValueHex=function(){if(null==this.params.extname||null==this.params.extn)throw new Error("extname or extnhex not specified");var t=this.params.extn;if("string"==typeof t&&i(t))return t;if("object"==typeof t)try{return s(t).tohex()}catch(t){}throw new Error("unsupported extn value")},null!=t&&this.setByParam(t)},$t(ut.asn1.x509.PrivateExtension,ut.asn1.x509.Extension),ut.asn1.x509.CRL=function(t){ut.asn1.x509.CRL.superclass.constructor.call(this);var e=ut.asn1,i=e.DERSequence,n=e.DERBitString,r=e.x509,s=r.AlgorithmIdentifier,o=r.TBSCertList;this.params=void 0,this.setByParam=function(t){this.params=t},this.sign=function(){var t=new o(this.params).tohex(),e=new ut.crypto.Signature({alg:this.params.sigalg});e.init(this.params.cakey),e.updateHex(t);var i=e.sign();this.params.sighex=i},this.getPEM=function(){return Ct(this.tohex(),"X509 CRL")},this.tohex=function(){var t=this.params;if(null==t.tbsobj&&(t.tbsobj=new o(t)),null==t.sighex&&null!=t.cakey&&this.sign(),null==t.sighex)throw new Error("sighex or cakey parameter not defined");var e=[];return e.push(t.tbsobj),e.push(new s({name:t.sigalg})),e.push(new n({hex:"00"+t.sighex})),new i({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&(this.params=t)},$t(ut.asn1.x509.CRL,ut.asn1.ASN1Object),ut.asn1.x509.TBSCertList=function(t){ut.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=ut.asn1,i=e.DERInteger,n=e.DERSequence,r=e.DERTaggedObject,s=(e.DERObjectIdentifier,e.x509),o=s.AlgorithmIdentifier,a=s.Time,u=s.Extensions,c=s.X500Name;this.params=null,this.setByParam=function(t){this.params=t},this.getRevCertSequence=function(){for(var t=[],e=this.params.revcert,r=0;r<e.length;r++){var s=[new i(e[r].sn),new a(e[r].date)];null!=e[r].ext&&s.push(new u(e[r].ext)),t.push(new n({array:s}))}return new n({array:t})},this.tohex=function(){var t=[],e=this.params;if(null!=e.version){var s=e.version-1,l=new i({int:s});t.push(l)}if(t.push(new o({name:e.sigalg})),t.push(new c(e.issuer)),t.push(new a(e.thisupdate)),null!=e.nextupdate&&t.push(new a(e.nextupdate)),null!=e.revcert&&t.push(this.getRevCertSequence()),null!=e.ext){var d=new u(e.ext);t.push(new r({tag:"a0",explicit:!0,obj:d}))}return new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.x509.TBSCertList,ut.asn1.ASN1Object),ut.asn1.x509.CRLEntry=function(t){ut.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=ut.asn1;this.setCertSerial=function(t){this.sn=new e.DERInteger(t)},this.setRevocationDate=function(t){this.time=new e.x509.Time(t)},this.tohex=function(){var t=new e.DERSequence({array:[this.sn,this.time]});return this.TLV=t.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},$t(ut.asn1.x509.CRLEntry,ut.asn1.ASN1Object),ut.asn1.x509.CRLNumber=function(t){ut.asn1.x509.CRLNumber.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new ut.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",null!=t&&(this.params=t)},$t(ut.asn1.x509.CRLNumber,ut.asn1.x509.Extension),ut.asn1.x509.CRLReason=function(t){ut.asn1.x509.CRLReason.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new ut.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",null!=t&&(this.params=t)},$t(ut.asn1.x509.CRLReason,ut.asn1.x509.Extension),ut.asn1.x509.OCSPNonce=function(t){ut.asn1.x509.OCSPNonce.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new ut.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",null!=t&&(this.params=t)},$t(ut.asn1.x509.OCSPNonce,ut.asn1.x509.Extension),ut.asn1.x509.OCSPNoCheck=function(t){ut.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new ut.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",null!=t&&(this.params=t)},$t(ut.asn1.x509.OCSPNoCheck,ut.asn1.x509.Extension),ut.asn1.x509.AdobeTimeStamp=function(t){ut.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,t);var e=ut.asn1,i=e.DERInteger,n=e.DERBoolean,r=e.DERSequence,s=e.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var t=this.params,e=[new i(1)];return e.push(new s({uri:t.uri})),null!=t.reqauth&&e.push(new n(t.reqauth)),this.asn1ExtnValue=new r({array:e}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",void 0!==t&&this.setByParam(t)},$t(ut.asn1.x509.AdobeTimeStamp,ut.asn1.x509.Extension),ut.asn1.x509.X500Name=function(t){ut.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=ut.asn1,i=e.x509,n=i.RDN;this.setByString=function(t,e){void 0!==e&&(this.sRule=e);var i=t.split("/");i.shift();for(var r=[],s=0;s<i.length;s++)if(i[s].match(/^[^=]+=.+$/))r.push(i[s]);else{var o=r.length-1;r[o]=r[o]+"/"+i[s]}for(s=0;s<r.length;s++)this.asn1Array.push(new n({str:r[s],rule:this.sRule}))},this.setByLdapString=function(t,e){void 0!==e&&(this.sRule=e);var n=i.X500Name.ldapToCompat(t);this.setByString(n,e)},this.setByObject=function(t,e){for(var i in void 0!==e&&(this.sRule=e),t)if(t.hasOwnProperty(i)){var r=new n({str:i+"="+t[i],rule:this.sRule});this.asn1Array?this.asn1Array.push(r):this.asn1Array=[r]}},this.setByParam=function(t){var e;(void 0!==t.rule&&(this.sRule=t.rule),void 0!==t.array)?this.paramArray=t.array:void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):void 0!==t.hex?this.hTLV=t.hex:void 0!==t.certissuer?((e=new ne).readCertPEM(t.certissuer),this.hTLV=e.getIssuerHex()):void 0!==t.certsubject?((e=new ne).readCertPEM(t.certsubject),this.hTLV=e.getSubjectHex()):"object"==typeof t&&void 0===t.certsubject&&void 0===t.certissuer&&this.setByObject(t)},this.tohex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(0==this.asn1Array.length&&this.paramArray.length>0)for(var t=0;t<this.paramArray.length;t++){var i={array:this.paramArray[t]};"utf8"!=this.sRule&&(i.rule=this.sRule);var r=new n(i);this.asn1Array.push(r)}var s=new e.DERSequence({array:this.asn1Array});return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.x509.X500Name,ut.asn1.ASN1Object),ut.asn1.x509.X500Name.compatToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),e=e.map((function(t){return t.replace(/,/,"\\,")})),e.join(",")},ut.asn1.x509.X500Name.onelineToLDAP=function(t){return ut.asn1.x509.X500Name.compatToLDAP(t)},ut.asn1.x509.X500Name.ldapToCompat=function(t){for(var e=t.split(","),i=!1,n=[],r=0;e.length>0;r++){var s=e.shift();if(!0===i){var o=(n.pop()+","+s).replace(/\\,/g,",");n.push(o),i=!1}else n.push(s);"\\"===s.substr(-1,1)&&(i=!0)}return n=n.map((function(t){return t.replace("/","\\/")})),n.reverse(),"/"+n.join("/")},ut.asn1.x509.X500Name.ldapToOneline=function(t){return ut.asn1.x509.X500Name.ldapToCompat(t)},ut.asn1.x509.RDN=function(t){ut.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=ut.asn1.x509.AttributeTypeAndValue;this.setByParam=function(t){void 0!==t.rule&&(this.sRule=t.rule),void 0!==t.str&&this.addByMultiValuedString(t.str),void 0!==t.array&&(this.paramArray=t.array)},this.addByString=function(t){this.asn1Array.push(new ut.asn1.x509.AttributeTypeAndValue({str:t,rule:this.sRule}))},this.addByMultiValuedString=function(t){for(var e=ut.asn1.x509.RDN.parseString(t),i=0;i<e.length;i++)this.addByString(e[i])},this.tohex=function(){if(0==this.asn1Array.length&&this.paramArray.length>0)for(var t=0;t<this.paramArray.length;t++){var i=this.paramArray[t];void 0!==i.rule&&"utf8"!=this.sRule&&(i.rule=this.sRule);var n=new e(i);this.asn1Array.push(n)}var r=new ut.asn1.DERSet({array:this.asn1Array});return this.TLV=r.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.x509.RDN,ut.asn1.ASN1Object),ut.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),i=!1,n=[],r=0;e.length>0;r++){var s=e.shift();if(!0===i){var o=(n.pop()+"+"+s).replace(/\\\+/g,"+");n.push(o),i=!1}else n.push(s);"\\"===s.substr(-1,1)&&(i=!0)}var a=!1,u=[];for(r=0;n.length>0;r++){s=n.shift();if(!0===a){var c=u.pop();if(s.match(/"$/)){o=(c+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");u.push(o),a=!1}else u.push(c+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(a=!0)}return u},ut.asn1.x509.AttributeTypeAndValue=function(t){ut.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var e=ut,i=e.asn1,n=i.DERSequence,r=i.DERUTF8String,s=i.DERPrintableString,o=i.DERTeletexString,a=i.DERIA5String,u=i.DERVisibleString,c=i.DERBMPString,l=e.lang.String.isMail,d=e.lang.String.isPrintable;this.setByParam=function(t){if(void 0!==t.rule&&(this.sRule=t.rule),void 0!==t.ds&&(this.dsType=t.ds),void 0===t.value&&void 0!==t.str){var e=t.str.match(/^([^=]+)=(.+)$/);if(!e)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=e[1],this.sValue=e[2]}else this.sType=t.type,this.sValue=t.value},this.setByString=function(t,e){void 0!==e&&(this.sRule=e);var i=t.match(/^([^=]+)=(.+)$/);if(!i)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(i[1],i[2])},this._getDsType=function(){var t=this.sType,e=this.sValue,i=this.sRule;return"prn"===i?"CN"==t&&l(e)?"ia5":d(e)?"prn":"utf8":"utf8"===i?"CN"==t&&l(e)?"ia5":"C"==t?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(t,e,i){void 0!==i&&(this.sRule=i),this.sType=t,this.sValue=e},this.getValueObj=function(t,e){if("utf8"==t)return new r({str:e});if("prn"==t)return new s({str:e});if("tel"==t)return new o({str:e});if("ia5"==t)return new a({str:e});if("vis"==t)return new u({str:e});if("bmp"==t)return new c({str:e});throw new Error("unsupported directory string type: type="+t+" value="+e)},this.tohex=function(){null==this.dsType&&(this.dsType=this._getDsType());var t=ut.asn1.x509.OID.atype2obj(this.sType),e=this.getValueObj(this.dsType,this.sValue),i=new n({array:[t,e]});return this.TLV=i.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.x509.AttributeTypeAndValue,ut.asn1.ASN1Object),ut.asn1.x509.SubjectPublicKeyInfo=function(t){ut.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=ut,i=e.asn1,n=i.DERInteger,r=i.DERBitString,s=i.DERObjectIdentifier,o=i.DERSequence,a=i.ASN1Util.newObject,u=i.x509.AlgorithmIdentifier,c=e.crypto;c.ECDSA,c.DSA;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new o({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.tohex=function(){var t=this.getASN1Object();return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(t){try{if(t instanceof it){var e=a({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).tohex();this.asn1AlgId=new u({name:"rsaEncryption"}),this.asn1SubjPKey=new r({hex:"00"+e})}}catch(t){}try{if(t instanceof ut.crypto.ECDSA){var i=new s({name:t.curveName});this.asn1AlgId=new u({name:"ecPublicKey",asn1params:i}),this.asn1SubjPKey=new r({hex:"00"+t.pubKeyHex})}}catch(t){}try{if(t instanceof ut.crypto.DSA){i=new a({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]});this.asn1AlgId=new u({name:"dsa",asn1params:i});var o=new n({bigint:t.y});this.asn1SubjPKey=new r({hex:"00"+o.tohex()})}}catch(t){}},void 0!==t&&this.setPubKey(t)},$t(ut.asn1.x509.SubjectPublicKeyInfo,ut.asn1.ASN1Object),ut.asn1.x509.Time=function(t){ut.asn1.x509.Time.superclass.constructor.call(this);var e=ut.asn1,i=e.DERUTCTime,n=e.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(t){this.timeParams=t},this.setByParam=function(t){this.params=t},this.getType=function(t){return t.match(/^[0-9]{12}Z$/)?"utc":t.match(/^[0-9]{14}Z$/)?"gen":t.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":t.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var t=this.params,e=null;if("string"==typeof t&&(t={str:t}),null==t||!t.str||null!=t.type&&null!=t.type||(t.type=this.getType(t.str)),null!=t&&t.str?("utc"==t.type&&(e=new i(t.str)),"gen"==t.type&&(e=new n(t.str))):e="gen"==this.type?new n:new i,null==e)throw new Error("wrong setting for Time");return this.TLV=e.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},ut.asn1.x509.Time_bak=function(t){ut.asn1.x509.Time_bak.superclass.constructor.call(this);var e=ut.asn1,i=e.DERUTCTime,n=e.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.tohex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new i(this.timeParams):new n(this.timeParams):"utc"==this.type?new i:new n,this.TLV=t.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},$t(ut.asn1.x509.Time,ut.asn1.ASN1Object),ut.asn1.x509.AlgorithmIdentifier=function(t){ut.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=ut.asn1,i=e.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var t=null;for(var n in i)n===this.nameAlg&&(t=i[n]);if(null!==t)return this.hTLV=t,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=e.x509.OID.name2obj(this.nameAlg));var r=[this.asn1Alg];null!==this.asn1Params&&r.push(this.asn1Params);var s=new e.DERSequence({array:r});return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){void 0!==this.nameAlg.name&&(this.nameAlg=this.nameAlg.name);var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new e.DERNull)}},$t(ut.asn1.x509.AlgorithmIdentifier,ut.asn1.ASN1Object),ut.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},ut.asn1.x509.GeneralName=function(t){ut.asn1.x509.GeneralName.superclass.constructor.call(this);var e=ut.asn1,i=e.x509,n=i.X500Name,r=i.OtherName,s=e.DERIA5String,o=(e.DERPrintableString,e.DEROctetString),a=e.DERTaggedObject,u=e.ASN1Object,c=Error;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t,e,i=this.params,l=!1;if(void 0!==i.other)t="a0",e=new r(i.other);else if(void 0!==i.rfc822)t="81",e=new s({str:i.rfc822});else if(void 0!==i.dns)t="82",e=new s({str:i.dns});else if(void 0!==i.dn)t="a4",l=!0,e="string"==typeof i.dn?new n({str:i.dn}):i.dn instanceof ut.asn1.x509.X500Name?i.dn:new n(i.dn);else if(void 0!==i.ldapdn)t="a4",l=!0,e=new n({ldapstr:i.ldapdn});else if(void 0!==i.certissuer||void 0!==i.certsubj){var d,h;t="a4",l=!0;var f=null;if(void 0!==i.certsubj?(d=!1,h=i.certsubj):(d=!0,h=i.certissuer),h.match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(f=kt(h)),null==f)throw new Error("certsubj/certissuer not cert");var g,p=new ne;p.hex=f,g=d?p.getIssuerHex():p.getSubjectHex(),(e=new u).hTLV=g}else if(void 0!==i.uri)t="86",e=new s({str:i.uri});else{if(void 0===i.ip)throw new c("improper params");var m;t="87";var v=i.ip;try{if(v.match(/^[0-9a-f]+$/)){var y=v.length;if(8!=y&&16!=y&&32!=y&&64!=y)throw"err";m=v}else m=jt(v)}catch(t){throw new c("malformed IP address: "+i.ip+":"+t.message)}e=new o({hex:m})}return new a({tag:t,explicit:l,obj:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.x509.GeneralName,ut.asn1.ASN1Object),ut.asn1.x509.GeneralNames=function(t){ut.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=ut.asn1;this.setByParamArray=function(t){for(var i=0;i<t.length;i++){var n=new e.x509.GeneralName(t[i]);this.asn1Array.push(n)}},this.tohex=function(){return new e.DERSequence({array:this.asn1Array}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},$t(ut.asn1.x509.GeneralNames,ut.asn1.ASN1Object),ut.asn1.x509.OtherName=function(t){ut.asn1.x509.OtherName.superclass.constructor.call(this);var e=ut.asn1,i=e.DERObjectIdentifier,n=e.DERSequence,r=e.ASN1Util.newObject;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params;if(null==t.oid||null==t.value)throw new Error("oid or value not specified");var e=new i({oid:t.oid}),s=r({tag:{tag:"a0",explicit:!0,obj:t.value}});return new n({array:[e,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.x509.OtherName,ut.asn1.ASN1Object),ut.asn1.x509.OID=new function(){var t=ut.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.name2oidList[e])throw"Name of ObjectIdentifier not defined: "+e;var i=this.name2oidList[e],n=new t({oid:i});return this.objCache[e]=n,n},this.atype2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];var i;if(e.match(/^\d+\.\d+\.[0-9.]+$/))i=e;else if(void 0!==this.atype2oidList[e])i=this.atype2oidList[e];else{if(void 0===this.name2oidList[e])throw new Error("AttributeType name undefined: "+e);i=this.name2oidList[e]}var n=new t({oid:i});return this.objCache[e]=n,n},this.registerOIDs=function(t){if(this.checkOIDs(t))for(var e in t)this.name2oidList[e]=t[e]},this.checkOIDs=function(t){try{var e=Object.keys(t);return 0!=e.length&&(e.map((function(t,e,i){if(!this[t].match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")}),t),!0)}catch(t){return!1}}},ut.asn1.x509.OID.oid2name=function(t){var e=ut.asn1.x509.OID.name2oidList;for(var i in e)if(e[i]==t)return i;return""},ut.asn1.x509.OID.oid2atype=function(t){var e=ut.asn1.x509.OID.atype2oidList;for(var i in e)if(e[i]==t)return i;return t},ut.asn1.x509.OID.name2oid=function(t){if(t.match(/^[0-9.]+$/))return t;var e=ut.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},ut.asn1.x509.X509Util={},ut.asn1.x509.X509Util.newCertPEM=function(t){var e=ut.asn1.x509;e.TBSCertificate;return new(0,e.Certificate)(t).getPEM()},void 0!==ut&&ut||(ut={}),void 0!==ut.asn1&&ut.asn1||(ut.asn1={}),void 0!==ut.asn1.cms&&ut.asn1.cms||(ut.asn1.cms={}),ut.asn1.cms.Attribute=function(t){var e=Error,i=ut.asn1,n=i.DERSequence,r=i.DERSet,s=i.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(t){this.params=t},this.getValueArray=function(){throw new e("not yet implemented abstract")},this.tohex=function(){var t=new s({oid:this.typeOid}),e=new r({array:this.getValueArray()});return new n({array:[t,e]}).tohex()},this.getEncodedHex=function(){return this.tohex()}},$t(ut.asn1.cms.Attribute,ut.asn1.ASN1Object),ut.asn1.cms.ContentType=function(t){var e=ut.asn1;e.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){return[new e.DERObjectIdentifier(this.params.type)]},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.ContentType,ut.asn1.cms.Attribute),ut.asn1.cms.MessageDigest=function(t){var e=ut.asn1,i=e.DEROctetString;e.cms.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){return[new i(this.params)]},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.MessageDigest,ut.asn1.cms.Attribute),ut.asn1.cms.SigningTime=function(t){var e=ut.asn1;e.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){return[new e.x509.Time(this.params)]},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.SigningTime,ut.asn1.cms.Attribute),ut.asn1.cms.SigningCertificate=function(t){var e=Error,i=ut,n=i.asn1,r=n.DERSequence,s=n.cms,o=s.ESSCertID;i.crypto;s.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new e("parameter 'array' not specified");for(var i=this.params.array,n=[],s=0;s<i.length;s++){var a=i[s];0!=t.hasis||"string"!=typeof a||-1==a.indexOf("-----BEGIN")&&!dt.isASN1HEX(a)||(a={cert:a}),0!=a.hasis&&0==t.hasis&&(a.hasis=!1),n.push(new o(a))}var u=new r({array:n});return[new r({array:[u]})]},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.SigningCertificate,ut.asn1.cms.Attribute),ut.asn1.cms.ESSCertID=function(t){ut.asn1.cms.ESSCertID.superclass.constructor.call(this);var e=Error,i=ut,n=i.asn1,r=n.DEROctetString,s=n.DERSequence,o=n.cms.IssuerSerial;this.params=null,this.getCertHash=function(t,n){if(null!=t.hash)return t.hash;if("string"==typeof t&&-1==t.indexOf("-----BEGIN")&&!dt.isASN1HEX(t))return t;var r,s,o;if("string"==typeof t)r=t;else{if(null==t.cert)throw new e("hash nor cert unspecified");r=t.cert}if(s=-1!=r.indexOf("-----BEGIN")?kt(r):r,"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?s=kt(t):dt.isASN1HEX(t)&&(s=t)),null!=t.alg)o=t.alg;else{if(null==n)throw new e("hash alg unspecified");o=n}return i.crypto.Util.hashHex(s,o)},this.tohex=function(){var t=this.params,e=this.getCertHash(t,"sha1"),i=[];return i.push(new r({hex:e})),("string"==typeof t&&-1!=t.indexOf("-----BEGIN")||null!=t.cert&&0!=t.hasis||null!=t.issuer&&null!=t.serial)&&i.push(new o(t)),new s({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.ESSCertID,ut.asn1.ASN1Object),ut.asn1.cms.SigningCertificateV2=function(t){var e=Error,i=ut,n=i.asn1,r=n.DERSequence,s=(n.x509,n.cms),o=s.ESSCertIDv2;i.crypto;s.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new e("parameter 'array' not specified");for(var i=this.params.array,n=[],s=0;s<i.length;s++){var a=i[s];null==t.alg&&0!=t.hasis||"string"!=typeof a||-1==a.indexOf("-----BEGIN")&&!dt.isASN1HEX(a)||(a={cert:a}),null==a.alg&&null!=t.alg&&(a.alg=t.alg),0!=a.hasis&&0==t.hasis&&(a.hasis=!1),n.push(new o(a))}var u=new r({array:n});return[new r({array:[u]})]},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.SigningCertificateV2,ut.asn1.cms.Attribute),ut.asn1.cms.ESSCertIDv2=function(t){ut.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);Error;var e=ut.asn1,i=e.DEROctetString,n=e.DERSequence,r=e.cms.IssuerSerial,s=e.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var t=this.params,e=this.getCertHash(t,"sha256"),o=[];return null!=t.alg&&"sha256"!=t.alg&&o.push(new s({name:t.alg})),o.push(new i({hex:e})),("string"==typeof t&&-1!=t.indexOf("-----BEGIN")||null!=t.cert&&0!=t.hasis||null!=t.issuer&&null!=t.serial)&&o.push(new r(t)),new n({array:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.ESSCertIDv2,ut.asn1.cms.ESSCertID),ut.asn1.cms.IssuerSerial=function(t){var e=Error,i=ut.asn1,n=i.DERInteger,r=i.DERSequence,s=i.cms,o=i.x509.GeneralNames,a=ne;s.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(t){this.params=t},this.tohex=function(){var t,i,s=this.params;if("string"==typeof s&&-1!=s.indexOf("-----BEGIN")||null!=s.cert){var u;u=null!=s.cert?s.cert:s;var c=new a;c.readCertPEM(u),t=c.getIssuer(),i={hex:c.getSerialNumberHex()}}else{if(null==s.issuer||!s.serial)throw new e("cert or issuer and serial parameter not specified");t=s.issuer,i=s.serial}var l=new o([{dn:t}]),d=new n(i);return new r({array:[l,d]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.IssuerSerial,ut.asn1.ASN1Object),ut.asn1.cms.SignerIdentifier=function(t){var e=ut.asn1,i=(e.DERInteger,e.DERSequence,e.cms),n=i.IssuerAndSerialNumber,r=i.SubjectKeyIdentifier;e.x509.X500Name,Error;i.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if("isssn"==t.type)return new n(t).tohex();if("skid"==t.type)return new r(t).tohex();throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.SignerIdentifier,ut.asn1.ASN1Object),ut.asn1.cms.IssuerAndSerialNumber=function(t){var e=ut.asn1,i=e.DERInteger,n=e.DERSequence,r=e.cms,s=e.x509.X500Name,o=ne,a=Error;r.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t,e,r=this.params;if("string"==typeof r&&-1!=r.indexOf("-----BEGIN")||null!=r.cert){var u;u=null!=r.cert?r.cert:r;var c=new o;c.readCertPEM(u),t=c.getIssuer(),e={hex:c.getSerialNumberHex()}}else{if(null==r.issuer||!r.serial)throw new a("cert or issuer and serial parameter not specified");t=r.issuer,e=r.serial}var l=new s(t),d=new i(e);return new n({array:[l,d]}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.IssuerAndSerialNumber,ut.asn1.ASN1Object),ut.asn1.cms.SubjectKeyIdentifier=function(t){var e=ut.asn1,i=(e.DERInteger,e.DERSequence,e.ASN1Util.newObject),n=e.cms,r=(n.IssuerAndSerialName,n.SubjectKeyIdentifier,e.x509.X500Name,ne),s=Error;n.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var t,e=this.params;if(null==e.cert&&null==e.skid)throw new s("property cert nor skid undefined");null!=e.cert?t=new r(e.cert).getExtSubjectKeyIdentifier().kid.hex:null!=e.skid&&(t=e.skid);return i({tag:{tage:"a0",obj:{octstr:{hex:t}}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.SubjectKeyIdentifier,ut.asn1.ASN1Object),ut.asn1.cms.AttributeList=function(t){var e=Error,i=ut.asn1,n=i.DERSet,r=i.cms;r.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params;if(null!=this.hTLV)return this.hTLV;var i=!0;null!=t.sortflag&&(i=t.sortflag);for(var s=t.array,o=[],a=0;a<s.length;a++){var u=s[a],c=u.attr;if("contentType"==c)o.push(new r.ContentType(u));else if("messageDigest"==c)o.push(new r.MessageDigest(u));else if("signingTime"==c)o.push(new r.SigningTime(u));else if("signingCertificate"==c)o.push(new r.SigningCertificate(u));else if("signingCertificateV2"==c)o.push(new r.SigningCertificateV2(u));else if("signaturePolicyIdentifier"==c)o.push(new ut.asn1.cades.SignaturePolicyIdentifier(u));else{if("signatureTimeStamp"!=c&&"timeStampToken"!=c)throw new e("unknown attr: "+c);o.push(new ut.asn1.cades.SignatureTimeStamp(u))}}var l=new n({array:o,sortflag:i});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.AttributeList,ut.asn1.ASN1Object),ut.asn1.cms.SignerInfo=function(t){var e=Error,i=ut,n=i.asn1,r=n.DERInteger,s=n.DEROctetString,o=n.DERSequence,a=n.DERTaggedObject,u=n.cms,c=u.SignerIdentifier,l=u.AttributeList,d=(u.ContentType,u.EncapsulatedContentInfo,u.MessageDigest,u.SignedData,n.x509.AlgorithmIdentifier),h=i.crypto,f=Qt;u.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var t=this.params,e=t.sigalg,i=new l(t.sattrs).tohex(),n=f.getKey(t.signkey),r=new h.Signature({alg:e});r.init(n),r.updateHex(i);var s=r.sign();t.sighex=s},this.tohex=function(){var t=this.params,i=[];if(i.push(new r({int:t.version})),i.push(new c(t.id)),i.push(new d({name:t.hashalg})),null!=t.sattrs){var n=new l(t.sattrs);try{i.push(new a({tag:"a0",explicit:!1,obj:n}))}catch(t){throw new e("si sattr error: "+t)}}if(null!=t.sigalgfield?i.push(new d({name:t.sigalgfield})):i.push(new d({name:t.sigalg})),null==t.sighex&&null!=t.signkey&&this.sign(),i.push(new s({hex:t.sighex})),null!=t.uattrs){n=new l(t.uattrs);try{i.push(new a({tag:"a1",explicit:!1,obj:n}))}catch(t){throw new e("si uattr error: "+t)}}return new o({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.SignerInfo,ut.asn1.ASN1Object),ut.asn1.cms.EncapsulatedContentInfo=function(t){var e=ut.asn1,i=e.DERTaggedObject,n=e.DERSequence,r=e.DERObjectIdentifier,s=e.DEROctetString;e.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];if(e.push(new r(t.type)),null!=t.content&&(null!=t.content.hex||null!=t.content.str)&&1!=t.isDetached){var o=new s(t.content),a=new i({tag:"a0",explicit:!0,obj:o});e.push(a)}return new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.EncapsulatedContentInfo,ut.asn1.ASN1Object),ut.asn1.cms.ContentInfo=function(t){var e=ut.asn1,i=e.DERTaggedObject,n=e.DERSequence,r=e.DERObjectIdentifier;e.x509.OID.name2obj;ut.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];e.push(new r(t.type));var s=new i({tag:"a0",explicit:!0,obj:t.obj});return e.push(s),new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.ContentInfo,ut.asn1.ASN1Object),ut.asn1.cms.SignedData=function(t){Error;var e=ut.asn1,i=(e.ASN1Object,e.DERInteger),n=e.DERSet,r=e.DERSequence,s=(e.DERTaggedObject,e.cms),o=s.EncapsulatedContentInfo,a=s.SignerInfo,u=s.ContentInfo,c=s.CertificateSet,l=s.RevocationInfoChoices,d=e.x509.AlgorithmIdentifier;ut.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var t=this.params;this._setDigestAlgs(t),this._setContentTypeByEContent(t),this._setMessageDigestByEContent(t),this._setSignerInfoVersion(t),this._setSignedDataVersion(t)},this._setDigestAlgs=function(t){for(var e={},i=t.sinfos,n=0;n<i.length;n++){e[i[n].hashalg]=1}t.hashalgs=Object.keys(e).sort()},this._setContentTypeByEContent=function(t){for(var e=t.econtent.type,i=t.sinfos,n=0;n<i.length;n++){var r=i[n];this._getAttrParamByName(r,"contentType").type=e}},this._setMessageDigestByEContent=function(t){var e=t.econtent,i=(t.econtent.type,e.content.hex);null==i&&"data"==e.type&&null!=e.content.str&&(i=_t(e.content.str));for(var n=t.sinfos,r=0;r<n.length;r++){var s=n[r],o=s.hashalg,a=this._getAttrParamByName(s,"messageDigest"),u=ut.crypto.Util.hashHex(i,o);a.hex=u}},this._getAttrParamByName=function(t,e){for(var i=t.sattrs.array,n=0;n<i.length;n++)if(i[n].attr==e)return i[n]},this._setSignerInfoVersion=function(t){for(var e=t.sinfos,i=0;i<e.length;i++){var n=e[i],r=1;"skid"==n.id.type&&(r=3),n.version=r}},this._setSignedDataVersion=function(t){var e=this._getSignedDataVersion(t);t.version=e},this._getSignedDataVersion=function(t){if(null!=t.revinfos)for(var e=t.revinfos,i=0;i<e.length;i++){if(null!=e[i].ocsp)return 5}var n=t.sinfos;for(i=0;i<n.length;i++){if(3==t.sinfos[i].version)return 3}return"data"!=t.econtent.type?3:1},this.tohex=function(){var t=this.params;null!=this.getEncodedHexPrepare&&this.getEncodedHexPrepare(),1!=t.fixed&&this.checkAndFixParam();var e=[];e.push(new i({int:t.version}));for(var s=[],u=0;u<t.hashalgs.length;u++){var h=t.hashalgs[u];s.push(new d({name:h}))}e.push(new n({array:s})),e.push(new o(t.econtent)),null!=t.certs&&e.push(new c(t.certs)),null!=t.revinfos&&e.push(new l(t.revinfos));var f=[];for(u=0;u<t.sinfos.length;u++){var g=t.sinfos[u];f.push(new a(g))}return e.push(new n({array:f})),new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){return new u({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.SignedData,ut.asn1.ASN1Object),ut.asn1.cms.CertificateSet=function(t){ut.asn1.cms.CertificateSet.superclass.constructor.call(this);var e=Error,i=ut.asn1,n=i.DERTaggedObject,r=i.DERSet,s=i.ASN1Object;this.params=null,this.tohex=function(){var t,i=this.params,o=[];if(i instanceof Array)t=i;else{if(null==i.array)throw new e("cert array not specified");t=i.array}for(var a=0;a<t.length;a++){var u=kt(t[a]),c=new s;c.hTLV=u,o.push(c)}var l={array:o};0==i.sortflag&&(l.sortflag=!1);var d=new r(l);return new n({tag:"a0",explicit:!1,obj:d}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.CertificateSet,ut.asn1.ASN1Object),ut.asn1.cms.RevocationInfoChoices=function(t){ut.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(!t instanceof Array)throw new Error("params is not array");for(var e=[],i=0;i<t.length;i++)e.push(new ut.asn1.cms.RevocationInfoChoice(t[i]));return ut.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:e}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.RevocationInfoChoices,ut.asn1.ASN1Object),ut.asn1.cms.RevocationInfoChoice=function(t){ut.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(null!=t.crl&&"string"==typeof t.crl){var e=t.crl;return-1!=t.crl.indexOf("-----BEGIN")&&(e=kt(t.crl)),e}if(null!=t.ocsp)return ut.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new ut.asn1.cms.OtherRevocationFormat(t)}}).tohex();throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.RevocationInfoChoice,ut.asn1.ASN1Object),ut.asn1.cms.OtherRevocationFormat=function(t){ut.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var e=Error,i=ut,n=i.asn1.ASN1Util.newObject,r=i.lang.String.isHex;this.params=null,this.tohex=function(){var t=this.params;if(null==t.ocsp)throw new e("property ocsp not specified");if(!r(t.ocsp)||!dt.isASN1HEX(t.ocsp))throw new e("ocsp value not ASN.1 hex string");return n({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:t.ocsp}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cms.OtherRevocationFormat,ut.asn1.ASN1Object),ut.asn1.cms.CMSUtil=new function(){},ut.asn1.cms.CMSUtil.newSignedData=function(t){return new ut.asn1.cms.SignedData(t)},ut.asn1.cms.CMSUtil.verifySignedData=function(t){var e=ut,i=e.asn1,n=i.cms,r=(n.SignerInfo,n.SignedData,n.SigningTime,n.SigningCertificate,n.SigningCertificateV2,i.cades.SignaturePolicyIdentifier,e.lang.String.isHex),s=dt,o=s.getVbyList,a=s.getTLVbyList,u=s.getIdxbyList,c=s.getChildIdx,l=s.getTLV,d=s.oidname,h=e.crypto.Util.hashHex;void 0===t.cms&&r(t.cms);var f=t.cms,g=function(t,e){var i=e.idx;e.signerid_issuer1=a(t,i,[1,0],"30"),e.signerid_serial1=o(t,i,[1,1],"02"),e.hashalg=d(o(t,i,[2,0],"06"));var n=u(t,i,[3],"a0");e.idxSignedAttrs=n,p(t,e,n);var r=c(t,i).length;if(r<6)throw"malformed SignerInfo";e.sigalg=d(o(t,i,[r-2,0],"06")),e.sigval=o(t,i,[r-1],"04")},p=function(t,e,i){var n=c(t,i);e.signedAttrIdxList=n;for(var r=0;r<n.length;r++){var s,a=n[r],u=o(t,a,[0],"06");"2a864886f70d010905"===u?(s=xt(o(t,a,[1,0])),e.saSigningTime=s):"2a864886f70d010904"===u&&(s=o(t,a,[1,0],"04"),e.saMessageDigest=s)}},m=function(t,e,i,n){i.verifyDetail={};var r=i.verifyDetail,s=e.parse.econtent,o=i.hashalg,a=i.saMessageDigest;r.validMessageDigest=!1,h(s,o)===a&&(r.validMessageDigest=!0),function(t,e,i,n){var r,s=e.parse.certsIdx;if(void 0===e.certs){r=[],e.certkeys=[];for(var o=c(t,s),a=0;a<o.length;a++){var u=l(t,o[a]),d=new ne;d.readCertHex(u),r[a]=d,e.certkeys[a]=d.getPublicKey()}e.certs=r}else r=e.certs;for(e.cccc=r.length,e.cccci=o.length,a=0;a<r.length;a++){var h=d.getIssuerHex(),f=d.getSerialNumberHex();i.signerid_issuer1===h&&i.signerid_serial1===f&&(i.certkey_idx=a)}}(t,e,i),r.validSignatureValue=!1;var u=i.sigalg,d="31"+l(t,i.idxSignedAttrs).substr(2);i.signedattrshex=d;var f=e.certs[i.certkey_idx].getPublicKey(),g=new ut.crypto.Signature({alg:u});g.init(f),g.updateHex(d);var p=g.verify(i.sigval);r.validSignatureValue_isValid=p,!0===p&&(r.validSignatureValue=!0),i.isValid=!1,r.validMessageDigest&&r.validSignatureValue&&(i.isValid=!0)},v={isValid:!1,parse:{}};return function(t,e){if("2a864886f70d010702"!==o(t,0,[0],"06"))return e;e.cmsType="signedData",e.econtent=o(t,0,[1,0,2,1,0]),function(t,e){for(var i,n=3;n<6;n++)if(void 0!==(i=u(t,0,[1,0,n]))){var r=t.substr(i,2);"a0"===r&&(e.certsIdx=i),"a1"===r&&(e.revinfosIdx=i),"31"===r&&(e.signerinfosIdx=i)}}(t,e),e.signerInfos=[],function(t,e){var i=e.signerinfosIdx;if(void 0!==i){var n=c(t,i);e.signerInfoIdxList=n;for(var r=0;r<n.length;r++){var s={idx:n[r]};g(t,s),e.signerInfos.push(s)}}}(t,e)}(f,v.parse),function(t,e){for(var i=e.parse.signerInfos,n=i.length,r=!0,s=0;s<n;s++){var o=i[s];m(t,e,o,s),o.isValid||(r=!1)}e.isValid=r}(f,v),v},ut.asn1.cms.CMSParser=function(){var t=Error,e=ne,i=new e,n=dt,r=n.getV,s=n.getTLV,o=(n.getIdxbyList,n.getTLVbyList),a=n.getTLVbyListEx,u=n.getVbyList,c=n.getVbyListEx,l=n.getChildIdx;this.getCMSSignedData=function(t){var e=o(t,0,[1,0]);return this.getSignedData(e)},this.getSignedData=function(t){var e=l(t,0),i={},n=r(t,e[0]),o=parseInt(n,16);i.version=o;var u=s(t,e[1]);i.hashalgs=this.getHashAlgArray(u);var c=s(t,e[2]);i.econtent=this.getEContent(c);var d=a(t,0,["[0]"]);null!=d&&(i.certs=this.getCertificateSet(d));a(t,0,["[1]"]);var h=a(t,0,[3]);return i.sinfos=this.getSignerInfos(h),i},this.getHashAlgArray=function(t){for(var i=l(t,0),n=new e,r=[],o=0;o<i.length;o++){var a=s(t,i[o]),u=n.getAlgorithmIdentifierName(a);r.push(u)}return r},this.getEContent=function(t){var e={},i=u(t,0,[0]),n=u(t,0,[1,0]);return e.type=ut.asn1.x509.OID.oid2name(dt.hextooidstr(i)),e.content={hex:n},e},this.getSignerInfos=function(t){for(var e=[],i=l(t,0),n=0;n<i.length;n++){var r=s(t,i[n]),o=this.getSignerInfo(r);e.push(o)}return e},this.getSignerInfo=function(t){var e={},r=l(t,0),o=n.getInt(t,r[0],-1);-1!=o&&(e.version=o);var u=s(t,r[1]),d=this.getIssuerAndSerialNumber(u);e.id=d;var h=s(t,r[2]),f=i.getAlgorithmIdentifierName(h);e.hashalg=f;var g=a(t,0,["[0]"]);if(null!=g){var p=this.getAttributeList(g);e.sattrs=p}var m=a(t,0,[3]),v=i.getAlgorithmIdentifierName(m);e.sigalg=v;var y=c(t,0,[4]);e.sighex=y;var b=a(t,0,["[1]"]);if(null!=b){var w=this.getAttributeList(b);e.uattrs=w}return e},this.getSignerIdentifier=function(t){if("30"==t.substr(0,2))return this.getIssuerAndSerialNumber(t);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(t){var e={type:"isssn"},n=l(t,0),o=s(t,n[0]);e.issuer=i.getX500Name(o);var a=r(t,n[1]);return e.serial={hex:a},e},this.getAttributeList=function(t){for(var e=[],i=l(t,0),n=0;n<i.length;n++){var r=s(t,i[n]),o=this.getAttribute(r);e.push(o)}return{array:e}},this.getAttribute=function(t){var e={},i=l(t,0),r=n.getOID(t,i[0]),o=ut.asn1.x509.OID.oid2name(r);e.attr=o;var a=s(t,i[1]),u=l(a,0);if(1==u.length)e.valhex=s(a,u[0]);else{for(var c=[],d=0;d<u.length;d++)c.push(s(a,u[d]));e.valhex=c}return"contentType"==o?this.setContentType(e):"messageDigest"==o?this.setMessageDigest(e):"signingTime"==o?this.setSigningTime(e):"signingCertificate"==o?this.setSigningCertificate(e):"signingCertificateV2"==o?this.setSigningCertificateV2(e):"signaturePolicyIdentifier"==o&&this.setSignaturePolicyIdentifier(e),e},this.setContentType=function(t){var e=n.getOIDName(t.valhex,0,null);null!=e&&(t.type=e,delete t.valhex)},this.setSigningTime=function(t){var e=xt(r(t.valhex,0));t.str=e,delete t.valhex},this.setMessageDigest=function(t){var e=r(t.valhex,0);t.hex=e,delete t.valhex},this.setSigningCertificate=function(t){var e=l(t.valhex,0);if(e.length>0){for(var i=s(t.valhex,e[0]),n=l(i,0),r=[],o=0;o<n.length;o++){var a=s(i,n[o]),u=this.getESSCertID(a);r.push(u)}t.array=r}if(e.length>1){var c=s(t.valhex,e[1]);t.polhex=c}delete t.valhex},this.setSignaturePolicyIdentifier=function(t){var i=l(t.valhex,0);if(i.length>0){var o=n.getOID(t.valhex,i[0]);t.oid=o}if(i.length>1){var a=new e,u=l(t.valhex,i[1]),c=s(t.valhex,u[0]),d=a.getAlgorithmIdentifierName(c);t.alg=d;var h=r(t.valhex,u[1]);t.hash=h}delete t.valhex},this.setSigningCertificateV2=function(t){var e=l(t.valhex,0);if(e.length>0){for(var i=s(t.valhex,e[0]),n=l(i,0),r=[],o=0;o<n.length;o++){var a=s(i,n[o]),u=this.getESSCertIDv2(a);r.push(u)}t.array=r}if(e.length>1){var c=s(t.valhex,e[1]);t.polhex=c}delete t.valhex},this.getESSCertID=function(t){var e={},i=l(t,0);if(i.length>0){var n=r(t,i[0]);e.hash=n}if(i.length>1){var o=s(t,i[1]),a=this.getIssuerSerial(o);null!=a.serial&&(e.serial=a.serial),null!=a.issuer&&(e.issuer=a.issuer)}return e},this.getESSCertIDv2=function(e){var n={},o=l(e,0);if(o.length<1||3<o.length)throw new t("wrong number of elements");var a=0;if("30"==e.substr(o[0],2)){var u=s(e,o[0]);n.alg=i.getAlgorithmIdentifierName(u),a++}else n.alg="sha256";var c=r(e,o[a]);if(n.hash=c,o.length>a+1){var d=s(e,o[a+1]),h=this.getIssuerSerial(d);n.issuer=h.issuer,n.serial=h.serial}return n},this.getIssuerSerial=function(t){var e={},n=l(t,0),o=s(t,n[0]),a=i.getGeneralNames(o)[0].dn;e.issuer=a;var u=r(t,n[1]);return e.serial={hex:u},e},this.getCertificateSet=function(t){for(var e=l(t,0),i=[],n=0;n<e.length;n++){var r=s(t,e[n]);if("30"==r.substr(0,2)){var o=Ct(r,"CERTIFICATE");i.push(o)}}return{array:i,sortflag:!1}}},void 0!==ut&&ut||(ut={}),void 0!==ut.asn1&&ut.asn1||(ut.asn1={}),void 0!==ut.asn1.tsp&&ut.asn1.tsp||(ut.asn1.tsp={}),ut.asn1.tsp.TimeStampToken=function(t){var e=ut.asn1.tsp;e.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var t=new e.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=t.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.tsp.TimeStampToken,ut.asn1.cms.SignedData),ut.asn1.tsp.TSTInfo=function(t){Error;var e=ut.asn1,i=e.DERSequence,n=e.DERInteger,r=e.DERBoolean,s=e.DERGeneralizedTime,o=e.DERObjectIdentifier,a=e.DERTaggedObject,u=e.tsp,c=u.MessageImprint,l=u.Accuracy,d=(e.x509.X500Name,e.x509.GeneralName);if(u.TSTInfo.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw new Error("policy shall be specified.");if(t.push(this.dPolicy),null==this.dMessageImprint)throw new Error("messageImprint shall be specified.");if(t.push(this.dMessageImprint),null==this.dSerial)throw new Error("serialNumber shall be specified.");if(t.push(this.dSerial),null==this.dGenTime)throw new Error("genTime shall be specified.");t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var e=new i({array:t});return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new c(t.messageImprint)),void 0!==t.serial&&(this.dSerial=new n(t.serial)),void 0!==t.genTime&&(this.dGenTime=new s(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new l(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new r),void 0!==t.nonce&&(this.dNonce=new n(t.nonce)),void 0!==t.tsa&&(this.dTsa=new a({tag:"a0",explicit:!0,obj:new d({dn:t.tsa})}))}},$t(ut.asn1.tsp.TSTInfo,ut.asn1.ASN1Object),ut.asn1.tsp.Accuracy=function(t){var e=ut.asn1,i=e.ASN1Util.newObject;e.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];return null!=t.seconds&&"number"==typeof t.seconds&&e.push({int:t.seconds}),null!=t.millis&&"number"==typeof t.millis&&e.push({tag:{tagi:"80",obj:{int:t.millis}}}),null!=t.micros&&"number"==typeof t.micros&&e.push({tag:{tagi:"81",obj:{int:t.micros}}}),i({seq:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.tsp.Accuracy,ut.asn1.ASN1Object),ut.asn1.tsp.MessageImprint=function(t){var e=ut.asn1,i=e.DERSequence,n=e.DEROctetString,r=e.x509.AlgorithmIdentifier;e.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=new r({name:t.alg}),s=new n({hex:t.hash});return new i({array:[e,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.tsp.MessageImprint,ut.asn1.ASN1Object),ut.asn1.tsp.TimeStampReq=function(t){var e=ut.asn1,i=e.DERSequence,n=e.DERInteger,r=e.DERBoolean,s=(e.ASN1Object,e.DERObjectIdentifier),o=e.tsp,a=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];return e.push(new n({int:1})),t.messageImprint instanceof ut.asn1.ASN1Object?e.push(t.messageImprint):e.push(new a(t.messageImprint)),null!=t.policy&&e.push(new s(t.policy)),null!=t.nonce&&e.push(new n(t.nonce)),1==t.certreq&&e.push(new r),new i({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.tsp.TimeStampReq,ut.asn1.ASN1Object),ut.asn1.tsp.TimeStampResp=function(t){var e=ut.asn1,i=e.DERSequence,n=(e.ASN1Object,e.tsp),r=n.PKIStatusInfo;n.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,s=[];if(null!=t.econtent||null!=t.tst)if(null!=t.statusinfo?s.push(new r(t.statusinfo)):s.push(new r("granted")),null!=t.econtent)s.push(new n.TimeStampToken(t).getContentInfo());else{if(!(t.tst instanceof e.ASN1Object))throw new Error("improper member tst value");s.push(t.tst)}else{if(null==t.statusinfo)throw new Error("parameter for token nor statusinfo not specified");s.push(new r(t.statusinfo))}return new i({array:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.tsp.TimeStampResp,ut.asn1.ASN1Object),ut.asn1.tsp.PKIStatusInfo=function(t){var e=Error,i=ut.asn1,n=i.DERSequence,r=i.tsp,s=r.PKIStatus,o=r.PKIFreeText,a=r.PKIFailureInfo;r.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,i=[];if("string"==typeof t)i.push(new s(t));else{if(null==t.status)throw new e("property 'status' unspecified");i.push(new s(t.status)),null!=t.statusstr&&i.push(new o(t.statusstr)),null!=t.failinfo&&i.push(new a(t.failinfo))}return new n({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.tsp.PKIStatusInfo,ut.asn1.ASN1Object),ut.asn1.tsp.PKIStatus=function(t){var e=Error,i=ut.asn1,n=i.DERInteger;i.tsp.PKIStatus.superclass.constructor.call(this);var r={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var t,i=this.params;if("string"==typeof i)try{t=r[i]}catch(t){throw new e("undefined name: "+i)}else{if("number"!=typeof i)throw new e("unsupported params");t=i}return new n({int:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.tsp.PKIStatus,ut.asn1.ASN1Object),ut.asn1.tsp.PKIFreeText=function(t){var e=Error,i=ut.asn1,n=i.DERSequence,r=i.DERUTF8String;i.tsp.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(!t instanceof Array)throw new e("wrong params: not array");for(var i=[],s=0;s<t.length;s++)i.push(new r({str:t[s]}));return new n({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.tsp.PKIFreeText,ut.asn1.ASN1Object),ut.asn1.tsp.PKIFailureInfo=function(t){var e=Error,i=ut.asn1,n=i.DERBitString,r=i.tsp.PKIFailureInfo,s={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};r.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var t=this.params,i=0;if("number"==typeof t&&0<=t&&t<=25){for(var n=(i|=1<<t).toString(2),r="",o=n.length-1;o>=0;o--)r+=n[o];return r}if("string"==typeof t&&null!=s[t])return Zt([t],s);if("object"==typeof t&&null!=t.length)return Zt(t,s);throw new e("wrong params")},this.tohex=function(){this.params;var t=this.getBinValue();return new n({bin:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.tsp.PKIFailureInfo,ut.asn1.ASN1Object),ut.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(t,e){throw"not implemented yet"}},ut.asn1.tsp.SimpleTSAAdapter=function(t){var e=ut,i=e.asn1.tsp,n=e.crypto.Util.hashHex;i.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,e){var r=n(t,e);this.params.econtent.content.messageImprint={alg:e,hash:r},this.params.econtent.content.serial={int:this.serial++};var s=Math.floor(1e9*Math.random());return this.params.econtent.content.nonce={int:s},new i.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},$t(ut.asn1.tsp.SimpleTSAAdapter,ut.asn1.tsp.AbstractTSAAdapter),ut.asn1.tsp.FixedTSAAdapter=function(t){var e=ut,i=e.asn1.tsp,n=e.crypto.Util.hashHex;i.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,e){var r=n(t,e);return this.params.econtent.content.messageImprint={alg:e,hash:r},new i.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},$t(ut.asn1.tsp.FixedTSAAdapter,ut.asn1.tsp.AbstractTSAAdapter),ut.asn1.tsp.TSPUtil=new function(){},ut.asn1.tsp.TSPUtil.newTimeStampToken=function(t){return new ut.asn1.tsp.TimeStampToken(t)},ut.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){return(new ut.asn1.tsp.TSPParser).getTimeStampReq(t)},ut.asn1.tsp.TSPUtil.parseMessageImprint=function(t){return(new ut.asn1.tsp.TSPParser).getMessageImprint(t)},ut.asn1.tsp.TSPParser=function(){Error;var t=new ne,e=dt,i=e.getV,n=e.getTLV,r=e.getIdxbyList,s=(e.getTLVbyListEx,e.getChildIdx),o=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],a={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(t){var e=s(t,0);if(1==e.length)return this.getPKIStatusInfo(n(t,e[0]));if(e.length>1){var i=this.getPKIStatusInfo(n(t,e[0])),r=n(t,e[1]),o=this.getToken(r);return o.statusinfo=i,o}},this.getToken=function(t){var e=(new ut.asn1.cms.CMSParser).getCMSSignedData(t);return this.setTSTInfo(e),e},this.setTSTInfo=function(t){var e=t.econtent;if("tstinfo"==e.type){var i=e.content.hex,n=this.getTSTInfo(i);e.content=n}},this.getTSTInfo=function(e){var r={},o=s(e,0),a=i(e,o[1]);r.policy=Gt(a);var u=n(e,o[2]);r.messageImprint=this.getMessageImprint(u);var c=i(e,o[3]);r.serial={hex:c};var l=i(e,o[4]);r.genTime={str:xt(l)};var d=0;if(o.length>5&&"30"==e.substr(o[5],2)){var h=n(e,o[5]);r.accuracy=this.getAccuracy(h),d++}o.length>5+d&&"01"==e.substr(o[5+d],2)&&("ff"==i(e,o[5+d])&&(r.ordering=!0),d++);if(o.length>5+d&&"02"==e.substr(o[5+d],2)){var f=i(e,o[5+d]);r.nonce={hex:f},d++}if(o.length>5+d&&"a0"==e.substr(o[5+d],2)){var g=n(e,o[5+d]);g="30"+g.substr(2),pGeneralNames=t.getGeneralNames(g);var p=pGeneralNames[0].dn;r.tsa=p,d++}if(o.length>5+d&&"a1"==e.substr(o[5+d],2)){var m=n(e,o[5+d]);m="30"+m.substr(2);var v=t.getExtParamArray(m);r.ext=v,d++}return r},this.getAccuracy=function(t){for(var e={},n=s(t,0),r=0;r<n.length;r++){var o=t.substr(n[r],2),a=i(t,n[r]),u=parseInt(a,16);"02"==o?e.seconds=u:"80"==o?e.millis=u:"81"==o&&(e.micros=u)}return e},this.getMessageImprint=function(t){if("30"!=t.substr(0,2))throw new Error("head of messageImprint hex shall be x30");var n={},o=(s(t,0),r(t,0,[0,0])),a=i(t,o),u=e.hextooidstr(a),c=ut.asn1.x509.OID.oid2name(u);if(""==c)throw new Error("hashAlg name undefined: "+u);var l=c,d=r(t,0,[1]);return n.alg=l,n.hash=i(t,d),n},this.getPKIStatusInfo=function(t){var e={},r=s(t,0),a=0;try{var u=i(t,r[0]),c=parseInt(u,16);e.status=o[c]}catch(t){}if(r.length>1&&"30"==t.substr(r[1],2)){var l=n(t,r[1]);e.statusstr=this.getPKIFreeText(l),a++}if(r.length>a&&"03"==t.substr(r[1+a],2)){var d=n(t,r[1+a]);e.failinfo=this.getPKIFailureInfo(d)}return e},this.getPKIFreeText=function(t){for(var i=[],n=s(t,0),r=0;r<n.length;r++)i.push(e.getString(t,n[r]));return i},this.getPKIFailureInfo=function(t){var i=e.getInt(t,0);return null!=a[i]?a[i]:i},this.getTimeStampReq=function(t){var r={certreq:!1},o=s(t,0);if(o.length<2)throw new Error("TimeStampReq must have at least 2 items");var a=n(t,o[1]);r.messageImprint=ut.asn1.tsp.TSPUtil.parseMessageImprint(a);for(var u=2;u<o.length;u++){var c=o[u],l=t.substr(c,2);if("06"==l){var d=i(t,c);r.policy=e.hextooidstr(d)}"02"==l&&(r.nonce=i(t,c)),"01"==l&&(r.certreq=!0)}return r}},void 0!==ut&&ut||(ut={}),void 0!==ut.asn1&&ut.asn1||(ut.asn1={}),void 0!==ut.asn1.cades&&ut.asn1.cades||(ut.asn1.cades={}),ut.asn1.cades.SignaturePolicyIdentifier=function(t){var e=ut.asn1.cades,i=e.SignaturePolicyId;e.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new i(this.params)]},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},$t(ut.asn1.cades.SignaturePolicyIdentifier,ut.asn1.cms.Attribute),ut.asn1.cades.SignaturePolicyId=function(t){var e=ut.asn1,i=e.DERSequence,n=e.DERObjectIdentifier,r=(e.x509.AlgorithmIdentifier,e.cades),s=r.SignaturePolicyId,o=r.OtherHashAlgAndValue;s.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];return e.push(new n(t.oid)),e.push(new o(t)),new i({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},$t(ut.asn1.cades.SignaturePolicyId,ut.asn1.ASN1Object),ut.asn1.cades.OtherHashAlgAndValue=function(t){var e=Error,i=ut.asn1,n=i.DERSequence,r=i.DEROctetString,s=i.x509.AlgorithmIdentifier;i.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(null==t.alg)throw new e("property 'alg' not specified");if(null==t.hash&&null==t.cert)throw new e("property 'hash' nor 'cert' not specified");var i=null;if(null!=t.hash)i=t.hash;else if(null!=t.cert){if("string"!=typeof t.cert)throw new e("cert not string");var o=t.cert;-1!=t.cert.indexOf("-----BEGIN")&&(o=kt(t.cert)),i=ut.crypto.Util.hashHex(o,t.alg)}var a=[];return a.push(new s({name:t.alg})),a.push(new r({hex:i})),new n({array:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cades.OtherHashAlgAndValue,ut.asn1.ASN1Object),ut.asn1.cades.OtherHashValue=function(t){ut.asn1.cades.OtherHashValue.superclass.constructor.call(this);var e=Error,i=ut,n=(i.lang.String.isHex,i.asn1.DEROctetString);i.crypto.Util.hashHex;this.params=null,this.tohex=function(){var t=this.params;if(null==t.hash&&null==t.cert)throw new e("hash or cert not specified");var i=null;if(null!=t.hash)i=t.hash;else if(null!=t.cert){if("string"!=typeof t.cert)throw new e("cert not string");var r=t.cert;-1!=t.cert.indexOf("-----BEGIN")&&(r=kt(t.cert)),i=ut.crypto.Util.hashHex(r,"sha1")}return new n({hex:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cades.OtherHashValue,ut.asn1.ASN1Object),ut.asn1.cades.SignatureTimeStamp=function(t){var e=Error,i=ut,n=i.lang.String.isHex,r=i.asn1,s=r.ASN1Object;r.x509;r.cades.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var t=this.params;if(null!=t.tst){if(n(t.tst))return(r=new s).hTLV=t.tst,[r];if(t.tst instanceof s)return[t.tst];throw new e("params.tst has wrong value")}if(null!=t.res){var i=t.res;if(i instanceof s&&(i=i.tohex()),"string"!=typeof i||!n(i))throw new e("params.res has wrong value");var r;dt.getTLVbyList(i,0,[1]);return(r=new s).hTLV=t.tst,[r]}},null!=t&&this.setByParam(t)},$t(ut.asn1.cades.SignatureTimeStamp,ut.asn1.cms.Attribute),ut.asn1.cades.CompleteCertificateRefs=function(t){var e=Error,i=ut,n=i.asn1,r=n.DERSequence,s=n.cades,o=s.OtherCertID,a=i.lang.String.isHex;s.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var t=this.params,i=[],n=0;n<t.array.length;n++){var s=t.array[n];if("string"==typeof s)if(-1!=s.indexOf("-----BEGIN"))s={cert:s};else{if(!a(s))throw new e("unsupported value: "+s);s={hash:s}}null!=t.alg&&null==s.alg&&(s.alg=t.alg),null!=t.hasis&&null==s.hasis&&(s.hasis=t.hasis);var u=new o(s);i.push(u)}return[new r({array:i})]},null!=t&&this.setByParam(t)},$t(ut.asn1.cades.CompleteCertificateRefs,ut.asn1.cms.Attribute),ut.asn1.cades.OtherCertID=function(t){var e=ut.asn1,i=e.DERSequence,n=e.cms.IssuerSerial,r=e.cades,s=r.OtherHashValue,o=r.OtherHashAlgAndValue;r.OtherCertID.superclass.constructor.call(this),this.params=t,this.tohex=function(){var t=this.params;"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?t={cert:t}:_isHex(t)&&(t={hash:t}));var e=[],r=null;if(r=null!=t.alg?new o(t):new s(t),e.push(r),null!=t.cert&&1==t.hasis||null!=t.issuer&&null!=t.serial){var a=new n(t);e.push(a)}return new i({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cades.OtherCertID,ut.asn1.ASN1Object),ut.asn1.cades.OtherHash=function(t){Error;var e=ut,i=e.asn1,n=(i.cms,i.cades),r=n.OtherHashAlgAndValue,s=n.OtherHashValue,o=(e.crypto.Util.hashHex,e.lang.String.isHex);n.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?t={cert:t}:o(t)&&(t={hash:t}));return(null!=t.alg?new r(t):new s(t)).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.cades.OtherHash,ut.asn1.ASN1Object),ut.asn1.cades.CAdESUtil=new function(){},ut.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){return(new ut.asn1.cms.CMSParser).getCMSSignedData(t)},ut.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,i){var n=dt,r=n.getChildIdx,s=n.getTLV,o=n.getV,a=ut.asn1,u=a.ASN1Object,c=a.cms,l=c.AttributeList,d=c.SignerInfo,h={},f=r(t,e);if(6!=f.length)throw"not supported items for SignerInfo (!=6)";var g=f.shift();h.version=s(t,g);var p=f.shift();h.si=s(t,p);var m=f.shift();h.digalg=s(t,m);var v=f.shift();h.sattrs=s(t,v);var y=f.shift();h.sigalg=s(t,y);var b=f.shift();h.sig=s(t,b),h.sigval=o(t,b);var w=null;return h.obj=new d,(w=new u).hTLV=h.version,h.obj.dCMSVersion=w,(w=new u).hTLV=h.si,h.obj.dSignerIdentifier=w,(w=new u).hTLV=h.digalg,h.obj.dDigestAlgorithm=w,(w=new u).hTLV=h.sattrs,h.obj.dSignedAttrs=w,(w=new u).hTLV=h.sigalg,h.obj.dSigAlg=w,(w=new u).hTLV=h.sig,h.obj.dSig=w,h.obj.dUnsignedAttrs=new l,h},void 0!==ut.asn1.csr&&ut.asn1.csr||(ut.asn1.csr={}),ut.asn1.csr.CertificationRequest=function(t){var e=ut.asn1,i=e.DERBitString,n=e.DERSequence,r=e.csr,s=(e.x509,r.CertificationRequestInfo);r.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(t){this.params=t},this.sign=function(){var t=new s(this.params).tohex(),e=new ut.crypto.Signature({alg:this.params.sigalg});e.init(this.params.sbjprvkey),e.updateHex(t);var i=e.sign();this.params.sighex=i},this.getPEM=function(){return Ct(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var t=this.params,e=new ut.asn1.csr.CertificationRequestInfo(this.params),r=new ut.asn1.x509.AlgorithmIdentifier({name:t.sigalg});if(null==t.sighex&&null!=t.sbjprvkey&&this.sign(),null==t.sighex)throw new Error("sighex or sbjprvkey parameter not defined");var s=new i({hex:"00"+t.sighex});return new n({array:[e,r,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.csr.CertificationRequest,ut.asn1.ASN1Object),ut.asn1.csr.CertificationRequestInfo=function(t){var e=ut.asn1,i=(e.DERBitString,e.DERSequence),n=e.DERInteger,r=e.DERUTF8String,s=e.DERTaggedObject,o=e.ASN1Util.newObject,a=e.csr,u=e.x509,c=u.X500Name,l=u.Extensions,d=u.SubjectPublicKeyInfo;a.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(t){null!=t&&(this.params=t)},this.tohex=function(){var t=this.params,e=[];if(e.push(new n({int:0})),e.push(new c(t.subject)),e.push(new d(Qt.getKey(t.sbjpubkey))),null!=t.extreq){var a=new l(t.extreq),u=o({tag:{tag:"a0",explict:!0,obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[a]}]}}});e.push(u)}else e.push(new s({tag:"a0",explicit:!1,obj:new r({str:""})}));return new i({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},$t(ut.asn1.csr.CertificationRequestInfo,ut.asn1.ASN1Object),ut.asn1.csr.CSRUtil=new function(){},ut.asn1.csr.CSRUtil.newCSRPEM=function(t){return new ut.asn1.csr.CertificationRequest(t).getPEM()},ut.asn1.csr.CSRUtil.getParam=function(t){var e=dt,i=e.getV,n=e.getIdxbyList,r=e.getTLVbyList,s=e.getTLVbyListEx,o=e.getVbyListEx,a={};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw new Error("argument is not PEM file");var u=kt(t,"CERTIFICATE REQUEST");try{var c=s(u,0,[0,1]);if("3000"==c)a.subject={};else{var l=new ne;a.subject=l.getX500Name(c)}}catch(t){}var d=s(u,0,[0,2]),h=Qt.getKey(d,null,"pkcs8pub");a.sbjpubkey=Qt.getPEM(h,"PKCS8PUB");var f=function(t){var e=n(t,0,[0,3,0,0],"06");return"2a864886f70d01090e"!=i(t,e)?null:r(t,0,[0,3,0,1,0],"30")}(u);l=new ne;null!=f&&(a.extreq=l.getExtParamArray(f));try{var g=s(u,0,[1],"30");l=new ne;a.sigalg=l.getAlgorithmIdentifierName(g)}catch(t){}try{var p=o(u,0,[2]);a.sighex=p}catch(t){}return a},void 0!==ut&&ut||(ut={}),void 0!==ut.asn1&&ut.asn1||(ut.asn1={}),void 0!==ut.asn1.ocsp&&ut.asn1.ocsp||(ut.asn1.ocsp={}),ut.asn1.ocsp.DEFAULT_HASH="sha1",ut.asn1.ocsp.OCSPResponse=function(t){ut.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);ut.asn1.DEREnumerated;var e=ut.asn1.ASN1Util.newObject,i=ut.asn1.ocsp.ResponseBytes,n=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var t=this.params.resstatus;return"number"==typeof t?t:"string"!=typeof t?-1:n.indexOf(t)},this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params,n=this._getStatusCode();if(-1==n)throw new Error("responseStatus not supported: "+t.resstatus);if(0!=n)return e({seq:[{enum:{int:n}}]}).tohex();var r=new i(t);return e({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:r}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.ocsp.OCSPResponse,ut.asn1.ASN1Object),ut.asn1.ocsp.ResponseBytes=function(t){ut.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var e=ut.asn1,i=e.DERSequence,n=e.DERObjectIdentifier,r=e.DEROctetString,s=e.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params;if("ocspBasic"!=t.restype)throw new Error("not supported responseType: "+t.restype);var e=new s(t),o=[];return o.push(new n({name:"ocspBasic"})),o.push(new r({hex:e.tohex()})),new i({array:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.ocsp.ResponseBytes,ut.asn1.ASN1Object),ut.asn1.ocsp.BasicOCSPResponse=function(t){ut.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var e=Error,i=ut.asn1,n=i.ASN1Object,r=i.DERSequence,s=(i.DERGeneralizedTime,i.DERTaggedObject),o=i.DERBitString,a=(i.x509.Extensions,i.x509.AlgorithmIdentifier),u=i.ocsp;u.ResponderID;_SingleResponseList=u.SingleResponseList,_ResponseData=u.ResponseData,this.params=null,this.setByParam=function(t){this.params=t},this.sign=function(){var t=this.params,e=t.tbsresp.tohex(),i=new ut.crypto.Signature({alg:t.sigalg});i.init(t.reskey),i.updateHex(e),t.sighex=i.sign()},this.tohex=function(){var t=this.params;null==t.tbsresp&&(t.tbsresp=new _ResponseData(t)),null==t.sighex&&null!=t.reskey&&this.sign();var i=[];if(i.push(t.tbsresp),i.push(new a({name:t.sigalg})),i.push(new o({hex:"00"+t.sighex})),null!=t.certs&&null!=t.certs.length){for(var u=[],c=0;c<t.certs.length;c++){var l=t.certs[c],d=null;if(dt.isASN1HEX(l))d=l;else{if(!l.match(/-----BEGIN/))throw new e("certs["+c+"] not hex or PEM");d=kt(l)}u.push(new n({tlv:d}))}var h=new r({array:u});i.push(new s({tag:"a0",explicit:!0,obj:h}))}return new r({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.ocsp.BasicOCSPResponse,ut.asn1.ASN1Object),ut.asn1.ocsp.ResponseData=function(t){ut.asn1.ocsp.ResponseData.superclass.constructor.call(this);var e=Error,i=ut.asn1,n=i.DERSequence,r=i.DERGeneralizedTime,s=i.DERTaggedObject,o=i.x509.Extensions,a=i.ocsp,u=a.ResponderID;_SingleResponseList=a.SingleResponseList,this.params=null,this.tohex=function(){var t=this.params;null!=t.respid&&new e("respid not specified"),null!=t.prodat&&new e("prodat not specified"),null!=t.array&&new e("array not specified");var i=[];if(i.push(new u(t.respid)),i.push(new r(t.prodat)),i.push(new _SingleResponseList(t.array)),null!=t.ext){var a=new o(t.ext);i.push(new s({tag:"a1",explicit:!0,obj:a}))}return new n({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},$t(ut.asn1.ocsp.ResponseData,ut.asn1.ASN1Object),ut.asn1.ocsp.ResponderID=function(t){ut.asn1.ocsp.ResponderID.superclass.constructor.call(this);var e=ut,i=e.asn1,n=i.ASN1Util.newObject,r=i.x509.X500Name,s=e.lang.String.isHex,o=Error;this.params=null,this.tohex=function(){var t=this.params;if(null!=t.key){var e,i=null;if("string"==typeof t.key){if(s(t.key)&&(i=t.key),t.key.match(/-----BEGIN CERTIFICATE/))null!=(e=new ne(t.key).getExtSubjectKeyIdentifier())&&(i=e.kid.hex)}else if(t.key instanceof ne)null!=(e=t.key.getExtSubjectKeyIdentifier())&&(i=e.kid.hex);if(null==i)throw new o("wrong key member value");return n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:i}}}}).tohex()}if(null!=t.name){var a=null;if("string"==typeof t.name&&t.name.match(/-----BEGIN CERTIFICATE/))a=new ne(t.name).getSubject();else t.name instanceof ne?a=t.name.getSubject():"object"!=typeof t.name||null==t.name.array&&null==t.name.str||(a=t.name);if(null==a)throw new o("wrong name member value");return n({tag:{tag:"a1",explicit:!0,obj:new r(a)}}).tohex()}throw new o("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},$t(ut.asn1.ocsp.ResponderID,ut.asn1.ASN1Object),ut.asn1.ocsp.SingleResponseList=function(t){ut.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var e=ut.asn1,i=e.DERSequence,n=e.ocsp.SingleResponse;this.params=null,this.tohex=function(){var t=this.params;if("object"!=typeof t||null==t.length)throw new Error("params not specified properly");for(var e=[],r=0;r<t.length;r++)e.push(new n(t[r]));return new i({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},$t(ut.asn1.ocsp.SingleResponseList,ut.asn1.ASN1Object),ut.asn1.ocsp.SingleResponse=function(t){var e=Error,i=ut.asn1,n=i.DERSequence,r=i.DERGeneralizedTime,s=i.DERTaggedObject,o=i.ocsp,a=o.CertID,u=o.CertStatus,c=i.x509.Extensions;o.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,i=[];if(null==t.certid)throw new e("certid unspecified");if(null==t.status)throw new e("status unspecified");if(null==t.thisupdate)throw new e("thisupdate unspecified");if(i.push(new a(t.certid)),i.push(new u(t.status)),i.push(new r(t.thisupdate)),null!=t.nextupdate){var o=new r(t.nextupdate);i.push(new s({tag:"a0",explicit:!0,obj:o}))}if(null!=t.ext){var l=new c(t.ext);i.push(new s({tag:"a1",explicit:!0,obj:l}))}return new n({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},$t(ut.asn1.ocsp.SingleResponse,ut.asn1.ASN1Object),ut.asn1.ocsp.CertID=function(t){var e=ut,i=e.asn1,n=i.DEROctetString,r=i.DERInteger,s=i.DERSequence,o=i.x509.AlgorithmIdentifier,a=i.ocsp,u=(a.DEFAULT_HASH,e.crypto.Util.hashHex),c=ne,l=dt.getVbyList;a.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(t,e,i,n){null==n&&(n=this.DEFAULT_HASH),this.params={alg:n,issname:t,isskey:e,sbjsn:i}},this.setByCert=function(t,e,i){null==i&&(i=this.DEFAULT_HASH),this.params={alg:i,issuerCert:t,subjectCert:e}},this.getParamByCerts=function(t,e,i){null==i&&(i=this.DEFAULT_HASH);var n=new c(t),r=new c(e),s=u(n.getSubjectHex(),i),o=n.getPublicKeyHex();return{alg:i,issname:s,isskey:u(l(o,0,[1],"03",!0),i),sbjsn:r.getSerialNumberHex()}},this.tohex=function(){if("object"!=typeof this.params)throw new Error("params not set");var t,e,i,a,u=this.params;if(a=null==u.alg?this.DEFAULT_HASH:u.alg,null!=u.issuerCert&&null!=u.subjectCert){var c=this.getParamByCerts(u.issuerCert,u.subjectCert,a);t=c.issname,e=c.isskey,i=c.sbjsn}else{if(null==u.issname||null==u.isskey||null==u.sbjsn)throw new Error("required param members not defined");t=u.issname,e=u.isskey,i=u.sbjsn}var l=new o({name:a}),d=new n({hex:t}),h=new n({hex:e}),f=new r({hex:i}),g=new s({array:[l,d,h,f]});return this.hTLV=g.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},$t(ut.asn1.ocsp.CertID,ut.asn1.ASN1Object),ut.asn1.ocsp.CertStatus=function(t){ut.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if("good"==t.status)return"8000";if("unknown"==t.status)return"8200";if("revoked"==t.status){var e=[{gentime:{str:t.time}}];null!=t.reason&&e.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:t.reason}}}});var i={tag:"a1",explicit:!1,obj:{seq:e}};return ut.asn1.ASN1Util.newObject({tag:i}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},$t(ut.asn1.ocsp.CertStatus,ut.asn1.ASN1Object),ut.asn1.ocsp.Request=function(t){var e=ut.asn1,i=e.DERSequence,n=e.ocsp;if(n.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new i({array:t});return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t){var r=new n.CertID(t);this.dReqCert=r}},$t(ut.asn1.ocsp.Request,ut.asn1.ASN1Object),ut.asn1.ocsp.TBSRequest=function(t){var e=ut.asn1,i=e.DERSequence,n=e.ocsp;n.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],i=0;i<t.length;i++){var r=new n.Request(t[0]);e.push(r)}this.dRequestList=e},this.tohex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new i({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var n=new i({array:t});return this.hTLV=n.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},$t(ut.asn1.ocsp.TBSRequest,ut.asn1.ASN1Object),ut.asn1.ocsp.OCSPRequest=function(t){var e=ut.asn1,i=e.DERSequence,n=e.ocsp;if(n.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new i({array:t});return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&void 0!==t.reqList){var r=new n.TBSRequest(t);this.dTbsRequest=r}},$t(ut.asn1.ocsp.OCSPRequest,ut.asn1.ASN1Object),ut.asn1.ocsp.OCSPUtil={},ut.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,i){var n=ut.asn1.ocsp;void 0===i&&(i=n.DEFAULT_HASH);var r={alg:i,issuerCert:t,subjectCert:e};return new n.OCSPRequest({reqList:[r]}).tohex()},ut.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=dt,i=e.getVbyList,n=e.getVbyListEx,r=e.getIdxbyList,s=(e.getIdxbyListEx,e.getV),o={};try{var a=n(t,0,[0],"0a");o.responseStatus=parseInt(a,16)}catch(t){}if(0!==o.responseStatus)return o;try{var u=r(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(u,2)?o.certStatus="good":"a1"===t.substr(u,2)?(o.certStatus="revoked",o.revocationTime=xt(i(t,u,[0]))):"82"===t.substr(u,2)&&(o.certStatus="unknown")}catch(t){}try{var c=r(t,0,[1,0,1,0,0,2,0,2]);o.thisUpdate=xt(s(t,c))}catch(t){}try{var l=r(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(l,2)&&(o.nextUpdate=xt(i(t,l,[0])))}catch(t){}return o},ut.asn1.ocsp.OCSPParser=function(){var t=Error,e=ne,i=new e,n=dt,r=n.getV,s=n.getTLV,o=n.getIdxbyList,a=n.getVbyList,u=n.getTLVbyList,c=n.getVbyListEx,l=n.getTLVbyListEx,d=n.getChildIdx;this.getOCSPRequest=function(e){var i=d(e,0);if(1!=i.length&&2!=i.length)throw new t("wrong number elements: "+i.length);return this.getTBSRequest(s(e,i[0]))},this.getTBSRequest=function(t){var e={},n=l(t,0,[0],"30");e.array=this.getRequestList(n);var r=l(t,0,["[2]",0],"30");return null!=r&&(e.ext=i.getExtParamArray(r)),e},this.getRequestList=function(t){for(var e=[],i=d(t,0),n=0;n<i.length;n++){t=s(t,i[n]);e.push(this.getRequest(t))}return e},this.getRequest=function(e){var n=d(e,0);if(1!=n.length&&2!=n.length)throw new t("wrong number elements: "+n.length);var r=this.getCertID(s(e,n[0]));if(2==n.length){var a=o(e,0,[1,0]);r.ext=i.getExtParamArray(s(e,a))}return r},this.getCertID=function(i){var n=d(i,0);if(4!=n.length)throw new t("wrong number elements: "+n.length);var o=new e,a={};return a.alg=o.getAlgorithmIdentifierName(s(i,n[0])),a.issname=r(i,n[1]),a.isskey=r(i,n[2]),a.sbjsn=r(i,n[3]),a},this.getOCSPResponse=function(t){var e,i=d(t,0),n=r(t,i[0]),s=parseInt(n);if(1==i.length)return{resstatus:s};var o=u(t,0,[1,0]);return(e=this.getResponseBytes(o)).resstatus=s,e},this.getResponseBytes=function(t){var e,i=d(t,0),n=u(t,0,[1,0]);e=this.getBasicOCSPResponse(n);var s=r(t,i[0]);return e.restype=ut.asn1.x509.OID.oid2name(Gt(s)),e},this.getBasicOCSPResponse=function(t){var e,i=d(t,0);e=this.getResponseData(s(t,i[0]));var n=new ne;e.alg=n.getAlgorithmIdentifierName(s(t,i[1]));var o=r(t,i[2]);e.sighex=o.substr(2);var a=c(t,0,["[0]"]);if(null!=a){for(var u=d(a,0),l=[],h=0;h<u.length;h++){var f=s(a,u[h]);l.push(f)}e.certs=l}return e},this.getResponseData=function(t){var e=d(t,0),i=e.length,n={},o=0;"a0"==t.substr(e[0],2)&&o++,n.respid=this.getResponderID(s(t,e[o++]));var a=r(t,e[o++]);if(n.prodat=xt(a),n.array=this.getSingleResponseList(s(t,e[o++])),"a1"==t.substr(e[i-1],2)){var c=u(t,e[i-1],[0]),l=new ne;n.ext=l.getExtParamArray(c)}return n},this.getResponderID=function(t){var e={};if("a2"==t.substr(0,2)){var i=a(t,0,[0]);e.key=i}if("a1"==t.substr(0,2)){var n=u(t,0,[0]),r=new ne;e.name=r.getX500Name(n)}return e},this.getSingleResponseList=function(t){for(var e=d(t,0),i=[],n=0;n<e.length;n++){var r=this.getSingleResponse(s(t,e[n]));i.push(r)}return i},this.getSingleResponse=function(t){var e=d(t,0),i={},n=this.getCertID(s(t,e[0]));i.certid=n;var o=this.getCertStatus(s(t,e[1]));if(i.status=o,"18"==t.substr(e[2],2)){var c=r(t,e[2]);i.thisupdate=xt(c)}for(var l=3;l<e.length;l++){if("a0"==t.substr(e[l],2)){var h=a(t,e[l],[0],"18");i.nextupdate=xt(h)}if("a1"==t.substr(e[l],2)){var f=new ne,g=u(t,0,[l,0]);i.ext=f.getExtParamArray(g)}}return i},this.getCertStatus=function(t){var e={};if("8000"==t)return{status:"good"};if("8200"==t)return{status:"unknown"};if("a1"==t.substr(0,2)){e.status="revoked";var i=xt(a(t,0,[0]));e.time=i}return e}},void 0!==ut&&ut||(ut={}),void 0!==ut.lang&&ut.lang||(ut.lang={}),ut.lang.String=function(){},"function"==typeof t?(ct=function(e){return mt(t.from(e,"utf8").toString("base64"))},lt=function(e){return t.from(vt(e),"base64").toString("utf8")}):(ct=function(t){return yt(Ot(Lt(t)))},lt=function(t){return decodeURIComponent(Rt(bt(t)))}),ut.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},ut.lang.String.isHex=function(t){return Vt(t)},ut.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},ut.lang.String.isBase64URL=function(t){return!t.match(/[+/=]/)&&(t=vt(t),ut.lang.String.isBase64(t))},ut.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},ut.lang.String.isPrintable=function(t){return null!==t.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},ut.lang.String.isIA5=function(t){return null!==t.match(/^[\x20-\x21\x23-\x7f]*$/)},ut.lang.String.isMail=function(t){return null!==t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};function Kt(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},i=function(t){var i="",n=parseInt(t,10).toString(2),r=7-n.length%7;7==r&&(r=0);for(var s="",o=0;o<r;o++)s+="0";n=s+n;for(o=0;o<n.length-1;o+=7){var a=n.substr(o,7);o!=n.length-7&&(a="1"+a),i+=e(parseInt(a,2))}return i};try{if(!t.match(/^[0-9.]+$/))return null;var n="",r=t.split("."),s=40*parseInt(r[0],10)+parseInt(r[1],10);n+=e(s),r.splice(0,2);for(var o=0;o<r.length;o++)n+=i(r[o]);return n}catch(t){return null}}function Gt(t){if(!Vt(t))return null;try{var e=[],i=t.substr(0,2),n=parseInt(i,16);e[0]=new String(Math.floor(n/40)),e[1]=new String(n%40);for(var r=t.substr(2),s=[],o=0;o<r.length/2;o++)s.push(parseInt(r.substr(2*o,2),16));var a=[],u="";for(o=0;o<s.length;o++)128&s[o]?u+=Wt((127&s[o]).toString(2),7):(u+=Wt((127&s[o]).toString(2),7),a.push(new String(parseInt(u,2))),u="");var c=e.join(".");return a.length>0&&(c=c+"."+a.join(".")),c}catch(t){return null}}var Wt=function(t,e,i){return null==i&&(i="0"),t.length>=e?t:new Array(e-t.length+1).join(i)+t};function Jt(t){if(t.length%2!=0)return-1;if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return-1;try{var e=t.substr(0,2);if("00"==e)return parseInt(t.substr(2),16);var i=parseInt(e,16);if(i>7)return-1;var n=t.substr(2),r=parseInt(n,16).toString(2);"0"==r&&(r="00000000"),r=r.slice(0,0-i);var s=parseInt(r,2);return NaN==s?-1:s}catch(t){return-1}}function Yt(t){if("number"!=typeof t)return null;if(t<0)return null;var e=Number(t).toString(2),i=8-e.length%8;8==i&&(i=0),e+=Wt("",i,"0");var n=parseInt(e,2).toString(16);return n.length%2==1&&(n="0"+n),"0"+i+n}function Xt(t){if("string"!=typeof t)return null;if(t.length%2!=0)return null;if(!t.match(/^[0-9a-f]+$/))return null;try{var e=parseInt(t.substr(0,2),16);if(e<0||7<e)return null;for(var i=t.substr(2),n="",r=0;r<i.length;r+=2){var s=i.substr(r,2),o=parseInt(s,16).toString(2);n+=o=("0000000"+o).slice(-8)}return n.substr(0,n.length-e)}catch(t){return null}}function Zt(t,e){for(var i=0,n=0;n<t.length;n++)i|=1<<e[t[n]];var r=i.toString(2),s="";for(n=r.length-1;n>=0;n--)s+=r[n];return s}function $t(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)}void 0!==ut&&ut||(ut={}),void 0!==ut.crypto&&ut.crypto||(ut.crypto={}),ut.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:p.algo.MD5,sha1:p.algo.SHA1,sha224:p.algo.SHA224,sha256:p.algo.SHA256,sha384:p.algo.SHA384,sha512:p.algo.SHA512,ripemd160:p.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,i){var n=this.getDigestInfoHex(t,e),r=i/4;if(n.length+22>r)throw"key is too short for SigAlg: keylen="+i+","+e;for(var s="0001",o="00"+n,a="",u=r-s.length-o.length,c=0;c<u;c+=2)a+="ff";return s+a+o},this.hashString=function(t,e){return new ut.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new ut.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return this.hashString(t,"sha1")},this.sha256=function(t){return this.hashString(t,"sha256")},this.sha256Hex=function(t){return this.hashHex(t,"sha256")},this.sha512=function(t){return this.hashString(t,"sha512")},this.sha512Hex=function(t){return this.hashHex(t,"sha512")},this.isKey=function(t){return t instanceof it||t instanceof ut.crypto.DSA||t instanceof ut.crypto.ECDSA}},ut.crypto.Util.md5=function(t){return new ut.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},ut.crypto.Util.ripemd160=function(t){return new ut.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},ut.crypto.Util.SECURERANDOMGEN=new Q,ut.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return ut.crypto.Util.SECURERANDOMGEN.nextBytes(e),gt(e)},ut.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new x(ut.crypto.Util.getRandomHexOfNbytes(t),16)},ut.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,i=new Array((t-e)/8+1);return ut.crypto.Util.SECURERANDOMGEN.nextBytes(i),i[0]=(255<<e&255^255)&i[0],gt(i)},ut.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new x(ut.crypto.Util.getRandomHexOfNbits(t),16)},ut.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var i=ut.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(i))return i}},ut.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var i=t.compareTo(e);if(1==i)throw"biMin is greater than biMax";if(0==i)return t;var n=e.subtract(t);return ut.crypto.Util.getRandomBigIntegerZeroToMax(n).add(t)},ut.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=ut.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=ut.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=ut.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=p.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(p.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=ut.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ut.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},ut.crypto.MessageDigest.getHashLength=function(t){var e=ut.crypto.MessageDigest,i=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[i])throw"not supported algorithm: "+t;return e.HASHLENGTH[i]},ut.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ut.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=ut.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var i=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(i)&&"cryptojs"==e){try{var n=ut.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[i];this.mac=p.algo.HMAC.create(n,this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+i+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=p.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(p.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=_t(t)),void(this.pass=p.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;e=null;if(void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=wt(t.utf8)),void 0!==t.rstr&&(e=_t(t.rstr)),void 0!==t.b64&&(e=b(t.b64)),void 0!==t.b64u&&(e=bt(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=p.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=ut.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ut.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(t,e){for(var i="",n=e/4-t.length,r=0;r<n;r++)i+="0";return i+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw new Error("provider not supported: "+e);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ut.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t)}this.init=function(t,e){var i=null;try{i=void 0===e?Qt.getKey(t):Qt.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===i.isPrivate)this.prvKey=i,this.state="SIGN";else{if(!0!==i.isPublic)throw"init failed.:"+i;this.pubKey=i,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==ut.crypto.ECDSA&&(this.prvKey=new ut.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof it&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof it&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ut.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ut.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==ut.crypto.ECDSA&&(this.pubKey=new ut.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof it&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof it&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==ut.crypto.ECDSA&&this.pubKey instanceof ut.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==ut.crypto.DSA&&this.pubKey instanceof ut.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov?this.provName=ut.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=Qt.getKey(t.prvkeypem);this.init(e)}catch(t){throw"fatal error to load pem private key: "+t}}},ut.crypto.Cipher=function(t){},ut.crypto.Cipher.encrypt=function(t,e,i){if(e instanceof it&&e.isPublic){var n=ut.crypto.Cipher.getAlgByKeyAndName(e,i);if("RSA"===n)return e.encrypt(t);if("RSAOAEP"===n)return e.encryptOAEP(t,"sha1");var r=n.match(/^RSAOAEP(\d+)$/);if(null!==r)return e.encryptOAEP(t,"sha"+r[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+i}throw"Cipher.encrypt: unsupported key or algorithm"},ut.crypto.Cipher.decrypt=function(t,e,i){if(e instanceof it&&e.isPrivate){var n=ut.crypto.Cipher.getAlgByKeyAndName(e,i);if("RSA"===n)return e.decrypt(t);if("RSAOAEP"===n)return e.decryptOAEP(t,"sha1");var r=n.match(/^RSAOAEP(\d+)$/);if(null!==r)return e.decryptOAEP(t,"sha"+r[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+i}throw"Cipher.decrypt: unsupported key or algorithm"},ut.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof it){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},ut.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ut&&ut||(ut={}),void 0!==ut.crypto&&ut.crypto||(ut.crypto={}),ut.crypto.ECDSA=function(t){var e=Error,i=x,n=st,r=ut.crypto.ECDSA,s=ut.crypto.ECParameterDB,o=r.getName,a=dt,u=a.getVbyListEx,c=a.isASN1HEX,l=new Q;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new i(t.bitLength(),l).mod(t.subtract(i.ONE)).add(i.ONE)},this.setNamedCurve=function(t){this.ecparams=s.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keycharlen;if(t.length!==2+2*e)throw"malformed public key hex length";var i={};return i.x=t.substr(2,e),i.y=t.substr(2+e),i},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":"secp521r1"===t||"NIST P-521"===t||"P-521"===t?"P-521":null},this.generateKeyPairHex=function(){var t=this.ecparams.n,e=this.getBigRandom(t),i=this.ecparams.keycharlen,n=("0000000000"+e.toString(16)).slice(-i);return this.setPrivateKeyHex(n),{ecprvhex:n,ecpubhex:this.generatePublicKeyHex()}},this.generatePublicKeyHex=function(){var t=new i(this.prvKeyHex,16),e=this.ecparams.G.multiply(t),n=e.getX().toBigInteger(),r=e.getY().toBigInteger(),s=this.ecparams.keycharlen,o="04"+("0000000000"+n.toString(16)).slice(-s)+("0000000000"+r.toString(16)).slice(-s);return this.setPublicKeyHex(o),o},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new i(e,16),s=this.ecparams.n,o=new i(t.substring(0,this.ecparams.keycharlen),16);do{var a=this.getBigRandom(s),u=this.ecparams.G.multiply(a).getX().toBigInteger().mod(s)}while(u.compareTo(i.ZERO)<=0);var c=a.modInverse(s).multiply(o.add(n.multiply(u))).mod(s);return r.biRSSigToASN1Sig(u,c)},this.sign=function(t,e){var n=e,r=this.ecparams.n,s=i.fromByteArrayUnsigned(t);do{var o=this.getBigRandom(r),a=this.ecparams.G.multiply(o).getX().toBigInteger().mod(r)}while(a.compareTo(x.ZERO)<=0);var u=o.modInverse(r).multiply(s.add(n.multiply(a))).mod(r);return this.serializeSig(a,u)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,s){try{var o,a,u=r.parseSigHex(e);o=u.r,a=u.s;var c=n.decodeFromHex(this.ecparams.curve,s),l=new i(t.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(l,o,a,c)}catch(t){return!1}},this.verify=function(t,e,r){var s,o,a;if(Bitcoin.Util.isArray(e)){var u=this.parseSig(e);s=u.r,o=u.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";s=e.r,o=e.s}if(r instanceof st)a=r;else{if(!Bitcoin.Util.isArray(r))throw"Invalid format for pubkey value, must be byte array or ECPointFp";a=n.decodeFrom(this.ecparams.curve,r)}var c=i.fromByteArrayUnsigned(t);return this.verifyRaw(c,s,o,a)},this.verifyRaw=function(t,e,n,r){var s=this.ecparams.n,o=this.ecparams.G;if(e.compareTo(i.ONE)<0||e.compareTo(s)>=0)return!1;if(n.compareTo(i.ONE)<0||n.compareTo(s)>=0)return!1;var a=n.modInverse(s),u=t.multiply(a).mod(s),c=e.multiply(a).mod(s);return o.multiply(u).add(r.multiply(c)).getX().toBigInteger().mod(s).equals(e)},this.serializeSig=function(t,e){var i=t.toByteArraySigned(),n=e.toByteArraySigned(),r=[];return r.push(2),r.push(i.length),(r=r.concat(i)).push(2),r.push(n.length),(r=r.concat(n)).unshift(r.length),r.unshift(48),r},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:i.fromByteArrayUnsigned(n),s:i.fromByteArrayUnsigned(r)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:i.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:i.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},this.readPKCS5PrvKeyHex=function(t){if(!1===c(t))throw new Error("not ASN.1 hex string");var e,i,n;try{e=u(t,0,["[0]",0],"06"),i=u(t,0,[1],"04");try{n=u(t,0,["[1]",0],"03")}catch(t){}}catch(t){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=o(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(i),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){if(!1===c(t))throw new e("not ASN.1 hex string");var i,n,r;try{u(t,0,[1,0],"06"),i=u(t,0,[1,1],"06"),n=u(t,0,[2,0,1],"04");try{r=u(t,0,[2,0,"[1]",0],"03")}catch(t){}}catch(t){throw new e("malformed PKCS#8 plain ECC private key")}if(this.curveName=o(i),void 0===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){if(!1===c(t))throw new e("not ASN.1 hex string");var i,n;try{u(t,0,[0,0],"06"),i=u(t,0,[0,1],"06"),n=u(t,0,[1],"03")}catch(t){throw new e("malformed PKCS#8 ECC public key")}if(this.curveName=o(i),null===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(t,i){if(!1===c(t))throw new e("not ASN.1 hex string");var n,r;try{n=u(t,0,[0,5,0,1],"06"),r=u(t,0,[0,5,1],"03")}catch(t){throw new e("malformed X.509 certificate ECC public key")}if(this.curveName=o(n),null===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},ut.crypto.ECDSA.parseSigHex=function(t){var e=ut.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new x(e.r,16),s:new x(e.s,16)}},ut.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=dt,i=e.getChildIdx,n=e.getV;if(e.checkStrictDER(t,0),"30"!=t.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var r=i(t,0);if(2!=r.length)throw new Error("signature shall have two elements");var s=r[0],o=r[1];if("02"!=t.substr(s,2))throw new Error("1st item not ASN.1 integer");if("02"!=t.substr(o,2))throw new Error("2nd item not ASN.1 integer");return{r:n(t,s),s:n(t,o)}},ut.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=ut.crypto.ECDSA.parseSigHexInHexRS(t),i=e.r,n=e.s;if(i.length>=130&&i.length<=134){if(i.length%2!=0)throw Error("unknown ECDSA sig r length error");if(n.length%2!=0)throw Error("unknown ECDSA sig s length error");"00"==i.substr(0,2)&&(i=i.substr(2)),"00"==n.substr(0,2)&&(n=n.substr(2));var r=Math.max(i.length,n.length);return(i=("000000"+i).slice(-r))+(n=("000000"+n).slice(-r))}if("00"==i.substr(0,2)&&i.length%32==2&&(i=i.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),i.length%32==30&&(i="00"+i),n.length%32==30&&(n="00"+n),i.length%32!=0)throw Error("unknown ECDSA sig r length error");if(n.length%32!=0)throw Error("unknown ECDSA sig s length error");return i+n},ut.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var e=t.substr(0,t.length/2),i=t.substr(t.length/2);return ut.crypto.ECDSA.hexRSSigToASN1Sig(e,i)},ut.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var i=new x(t,16),n=new x(e,16);return ut.crypto.ECDSA.biRSSigToASN1Sig(i,n)},ut.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var i=ut.asn1,n=new i.DERInteger({bigint:t}),r=new i.DERInteger({bigint:e});return new i.DERSequence({array:[n,r]}).tohex()},ut.crypto.ECDSA.getName=function(t){return"2b8104001f"===t?"secp192k1":"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040021"===t?"secp224r1":"2b81040022"===t?"secp384r1":"2b81040023"===t?"secp521r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(t)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":-1!=="|secp521r1|NIST P-521|P-521|".indexOf(t)?"secp521r1":null},void 0!==ut&&ut||(ut={}),void 0!==ut.crypto&&ut.crypto||(ut.crypto={}),ut.crypto.ECParameterDB=new function(){var t={},e={};function i(t){return new x(t,16)}this.getByName=function(i){var n=i;if(void 0!==e[n]&&(n=e[i]),void 0!==t[n])return t[n];throw"unregistered EC curve name: "+n},this.regist=function(n,r,s,o,a,u,c,l,d,h,f,g){t[n]={};var p=i(s),m=i(o),v=i(a),y=i(u),b=i(c),w=new ot(p,m,v),x=w.decodePointHex("04"+l+d);t[n].name=n,t[n].keylen=r,t[n].keycharlen=2*Math.ceil(r/8),t[n].curve=w,t[n].G=x,t[n].n=y,t[n].h=b,t[n].oid=f,t[n].info=g;for(var S=0;S<h.length;S++)e[h[S]]=n}},ut.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ut.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ut.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ut.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ut.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ut.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ut.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ut.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ut.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ut.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==ut&&ut||(ut={}),void 0!==ut.crypto&&ut.crypto||(ut.crypto={}),ut.crypto.DSA=function(){var t=dt,e=(t.getVbyList,t.getVbyListEx),i=t.isASN1HEX,n=x;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,e,i,n,r){this.isPrivate=!0,this.p=t,this.q=e,this.g=i,this.y=n,this.x=r},this.setPrivateHex=function(t,e,i,n,r){var s,o,a,u,c;s=new x(t,16),o=new x(e,16),a=new x(i,16),u="string"==typeof n&&n.length>1?new x(n,16):null,c=new x(r,16),this.setPrivate(s,o,a,u,c)},this.setPublic=function(t,e,i,n){this.isPublic=!0,this.p=t,this.q=e,this.g=i,this.y=n,this.x=null},this.setPublicHex=function(t,e,i,n){var r,s,o,a;r=new x(t,16),s=new x(e,16),o=new x(i,16),a=new x(n,16),this.setPublic(r,s,o,a)},this.signWithMessageHash=function(t){var e=this.p,i=this.q,n=this.g,r=(this.y,this.x),s=ut.crypto.Util.getRandomBigIntegerMinToMax(x.ONE.add(x.ONE),i.subtract(x.ONE)),o=new x(t.substr(0,i.bitLength()/4),16),a=n.modPow(s,e).mod(i),u=s.modInverse(i).multiply(o.add(r.multiply(a))).mod(i);return ut.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:u}}]})},this.verifyWithMessageHash=function(t,e){var i=this.p,n=this.q,r=this.g,s=this.y,o=this.parseASN1Signature(e),a=o[0],u=o[1],c=new x(t.substr(0,n.bitLength()/4),16);if(x.ZERO.compareTo(a)>0||a.compareTo(n)>0)throw"invalid DSA signature";if(x.ZERO.compareTo(u)>=0||u.compareTo(n)>0)throw"invalid DSA signature";var l=u.modInverse(n),d=c.multiply(l).mod(n),h=a.multiply(l).mod(n);return 0==r.modPow(d,i).multiply(s.modPow(h,i)).mod(i).mod(n).compareTo(a)},this.parseASN1Signature=function(t){try{return[new n(e(t,0,[0],"02"),16),new n(e(t,0,[1],"02"),16)]}catch(t){throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(t){var n,r,s,o,a;if(!1===i(t))throw new Error("not ASN.1 hex string");try{n=e(t,0,[1],"02"),r=e(t,0,[2],"02"),s=e(t,0,[3],"02"),o=e(t,0,[4],"02"),a=e(t,0,[5],"02")}catch(t){throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(n,r,s,o,a)},this.readPKCS8PrvKeyHex=function(t){var n,r,s,o;if(!1===i(t))throw new Error("not ASN.1 hex string");try{n=e(t,0,[1,1,0],"02"),r=e(t,0,[1,1,1],"02"),s=e(t,0,[1,1,2],"02"),o=e(t,0,[2,0],"02")}catch(t){throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(n,r,s,null,o)},this.readPKCS8PubKeyHex=function(t){var n,r,s,o;if(!1===i(t))throw new Error("not ASN.1 hex string");try{n=e(t,0,[0,1,0],"02"),r=e(t,0,[0,1,1],"02"),s=e(t,0,[0,1,2],"02"),o=e(t,0,[1,0],"02")}catch(t){throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(n,r,s,o)},this.readCertPubKeyHex=function(t,n){var r,s,o,a;if(!1===i(t))throw new Error("not ASN.1 hex string");try{r=e(t,0,[0,5,0,1,0],"02"),s=e(t,0,[0,5,0,1,1],"02"),o=e(t,0,[0,5,0,1,2],"02"),a=e(t,0,[0,5,1,0],"02")}catch(t){throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(r,s,o,a)}};var Qt=function(){var t=function(t,i,n){return e(p.AES,t,i,n)},e=function(t,e,i,n){var r=p.enc.Hex.parse(e),s=p.enc.Hex.parse(i),o=p.enc.Hex.parse(n),a={};a.key=s,a.iv=o,a.ciphertext=r;var u=t.decrypt(a,s,{iv:o});return p.enc.Hex.stringify(u)},i=function(t,e,i){return n(p.AES,t,e,i)},n=function(t,e,i,n){var r=p.enc.Hex.parse(e),s=p.enc.Hex.parse(i),o=p.enc.Hex.parse(n),a=t.encrypt(r,s,{iv:o}),u=p.enc.Hex.parse(a.toString());return p.enc.Base64.stringify(u)},r={"AES-256-CBC":{proc:t,eproc:i,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:i,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:i,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,i,n){return e(p.TripleDES,t,i,n)},eproc:function(t,e,i){return n(p.TripleDES,t,e,i)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,i,n){return e(p.DES,t,i,n)},eproc:function(t,e,i){return n(p.DES,t,e,i)},keylen:8,ivlen:8}},s=function(t){var e={},i=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));i&&(e.cipher=i[1],e.ivsalt=i[2]);var n=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(e.type=n[1]);var r=-1,s=0;-1!=t.indexOf("\r\n\r\n")&&(r=t.indexOf("\r\n\r\n"),s=2),-1!=t.indexOf("\n\n")&&(r=t.indexOf("\n\n"),s=1);var o=t.indexOf("-----END");if(-1!=r&&-1!=o){var a=t.substring(r+2*s,o-s);a=a.replace(/\s+/g,""),e.data=a}return e},o=function(t,e,i){for(var n=i.substring(0,16),s=p.enc.Hex.parse(n),o=p.enc.Utf8.parse(e),a=r[t].keylen+r[t].ivlen,u="",c=null;;){var l=p.algo.MD5.create();if(null!=c&&l.update(c),l.update(o),l.update(s),c=l.finalize(),(u+=p.enc.Hex.stringify(c)).length>=2*a)break}var d={};return d.keyhex=u.substr(0,2*r[t].keylen),d.ivhex=u.substr(2*r[t].keylen,2*r[t].ivlen),d},a=function(t,e,i,n){var s=p.enc.Base64.parse(t),o=p.enc.Hex.stringify(s);return(0,r[e].proc)(o,i,n)};return{version:"1.0.0",parsePKCS5PEM:function(t){return s(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,i){return o(t,e,i)},decryptKeyB64:function(t,e,i,n){return a(t,e,i,n)},getDecryptedKeyHex:function(t,e){var i=s(t),n=(i.type,i.cipher),r=i.ivsalt,u=i.data,c=o(n,e,r).keyhex;return a(u,n,c,r)},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,i,n,s){var a="";if(void 0!==n&&null!=n||(n="AES-256-CBC"),void 0===r[n])throw new Error("KEYUTIL unsupported algorithm: "+n);if(void 0===s||null==s){var u=function(t){var e=p.lib.WordArray.random(t);return p.enc.Hex.stringify(e)}(r[n].ivlen);s=u.toUpperCase()}var c=function(t,e,i,n){return(0,r[e].eproc)(t,i,n)}(e,n,o(n,i,s).keyhex,s);a="-----BEGIN "+t+" PRIVATE KEY-----\r\n";return a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+n+","+s+"\r\n",a+="\r\n",a+=c.replace(/(.{64})/g,"$1\r\n"),a+="\r\n-----END "+t+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var e=dt,i=e.getChildIdx,n=e.getV,r={},s=i(t,0);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+s.length);r.ciphertext=n(t,s[1]);var o=i(t,s[0]);if(2!=o.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+o.length);if("2a864886f70d01050d"!=n(t,o[0]))throw new Error("this only supports pkcs5PBES2");var a=i(t,o[1]);if(2!=o.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+a.length);var u=i(t,a[1]);if(2!=u.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+u.length);if("2a864886f70d0307"!=n(t,u[0]))throw"this only supports TripleDES";r.encryptionSchemeAlg="TripleDES",r.encryptionSchemeIV=n(t,u[1]);var c=i(t,a[0]);if(2!=c.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+c.length);if("2a864886f70d01050c"!=n(t,c[0]))throw new Error("this only supports pkcs5PBKDF2");var l=i(t,c[1]);if(l.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length);r.pbkdf2Salt=n(t,l[0]);var d=n(t,l[1]);try{r.pbkdf2Iter=parseInt(d,16)}catch(t){throw new Error("malformed format pbkdf2Iter: "+d)}return r},getPBKDF2KeyHexFromParam:function(t,e){var i=p.enc.Hex.parse(t.pbkdf2Salt),n=t.pbkdf2Iter,r=p.PBKDF2(e,i,{keySize:6,iterations:n});return p.enc.Hex.stringify(r)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var i=kt(t,"ENCRYPTED PRIVATE KEY"),n=this.parseHexOfEncryptedPKCS8(i),r=Qt.getPBKDF2KeyHexFromParam(n,e),s={};s.ciphertext=p.enc.Hex.parse(n.ciphertext);var o=p.enc.Hex.parse(r),a=p.enc.Hex.parse(n.encryptionSchemeIV),u=p.TripleDES.decrypt(s,o,{iv:a});return p.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(t,e){var i=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(i)},parsePlainPrivatePKCS8Hex:function(t){var e=dt,i=e.getChildIdx,n=e.getV,r={algparam:null};if("30"!=t.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var s=i(t,0);if(s.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=t.substr(s[1],2))throw new Error("malformed PKCS8 private key(code:003)");var o=i(t,s[1]);if(2!=o.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=t.substr(o[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(r.algoid=n(t,o[0]),"06"==t.substr(o[1],2)&&(r.algparam=n(t,o[1])),"04"!=t.substr(s[2],2))throw new Error("malformed PKCS8 private key(code:006)");return r.keyidx=e.getVidx(t,s[2]),r},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=kt(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e,i=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==i.algoid)e=new it;else if("2a8648ce380401"==i.algoid)e=new ut.crypto.DSA;else{if("2a8648ce3d0201"!=i.algoid)throw new Error("unsupported private key algorithm");e=new ut.crypto.ECDSA}return e.readPKCS8PrvKeyHex(t),e},_getKeyFromPublicPKCS8Hex:function(t){var e,i=dt.getVbyList(t,0,[0,0],"06");if("2a864886f70d010101"===i)e=new it;else if("2a8648ce380401"===i)e=new ut.crypto.DSA;else{if("2a8648ce3d0201"!==i)throw new Error("unsupported PKCS#8 public key hex");e=new ut.crypto.ECDSA}return e.readPKCS8PubKeyHex(t),e},parsePublicRawRSAKeyHex:function(t){var e=dt,i=e.getChildIdx,n=e.getV,r={};if("30"!=t.substr(0,2))throw new Error("malformed RSA key(code:001)");var s=i(t,0);if(2!=s.length)throw new Error("malformed RSA key(code:002)");if("02"!=t.substr(s[0],2))throw new Error("malformed RSA key(code:003)");if(r.n=n(t,s[0]),"02"!=t.substr(s[1],2))throw new Error("malformed RSA key(code:004)");return r.e=n(t,s[1]),r},parsePublicPKCS8Hex:function(t){var e=dt,i=e.getChildIdx,n=e.getV,r={algparam:null},s=i(t,0);if(2!=s.length)throw new Error("outer DERSequence shall have 2 elements: "+s.length);var o=s[0];if("30"!=t.substr(o,2))throw new Error("malformed PKCS8 public key(code:001)");var a=i(t,o);if(2!=a.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=t.substr(a[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(r.algoid=n(t,a[0]),"06"==t.substr(a[1],2)?r.algparam=n(t,a[1]):"30"==t.substr(a[1],2)&&(r.algparam={},r.algparam.p=e.getVbyList(t,a[1],[0],"02"),r.algparam.q=e.getVbyList(t,a[1],[1],"02"),r.algparam.g=e.getVbyList(t,a[1],[2],"02")),"03"!=t.substr(s[1],2))throw new Error("malformed PKCS8 public key(code:004)");return r.key=n(t,s[1]).substr(2),r}}}();Qt.getKey=function(t,e,i){var n=(m=dt).getChildIdx,r=(m.getV,m.getVbyList),s=ut.crypto,o=s.ECDSA,a=s.DSA,u=it,c=kt,l=Qt;if(void 0!==u&&t instanceof u)return t;if(void 0!==o&&t instanceof o)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new o({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new o({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(C=new u).setPublic(t.n,t.e),C;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(C=new u).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),C;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(C=new u).setPrivate(t.n,t.e,t.d),C;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(C=new a).setPublic(t.p,t.q,t.g,t.y),C;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(C=new a).setPrivate(t.p,t.q,t.g,t.y,t.x),C;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(C=new u).setPublic(bt(t.n),bt(t.e)),C;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(C=new u).setPrivateEx(bt(t.n),bt(t.e),bt(t.d),bt(t.p),bt(t.q),bt(t.dp),bt(t.dq),bt(t.qi)),C;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(C=new u).setPrivate(bt(t.n),bt(t.e),bt(t.d)),C;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var d=(I=new o({curve:t.crv})).ecparams.keycharlen,h="04"+("0000000000"+bt(t.x)).slice(-d)+("0000000000"+bt(t.y)).slice(-d);return I.setPublicKeyHex(h),I}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){d=(I=new o({curve:t.crv})).ecparams.keycharlen,h="04"+("0000000000"+bt(t.x)).slice(-d)+("0000000000"+bt(t.y)).slice(-d);var f=("0000000000"+bt(t.d)).slice(-d);return I.setPublicKeyHex(h),I.setPrivateKeyHex(f),I}if("pkcs5prv"===i){var g,p=t,m=dt;if(9===(g=n(p,0)).length)(C=new u).readPKCS5PrvKeyHex(p);else if(6===g.length)(C=new a).readPKCS5PrvKeyHex(p);else{if(!(g.length>2&&"04"===p.substr(g[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(C=new o).readPKCS5PrvKeyHex(p)}return C}if("pkcs8prv"===i)return C=l.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===i)return l._getKeyFromPublicPKCS8Hex(t);if("x509pub"===i)return ne.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return ne.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var v=kt(t,"PUBLIC KEY");return l._getKeyFromPublicPKCS8Hex(v)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var y=c(t,"RSA PRIVATE KEY");return l.getKey(y,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var b=r(T=c(t,"DSA PRIVATE KEY"),0,[1],"02"),w=r(T,0,[2],"02"),S=r(T,0,[3],"02"),E=r(T,0,[4],"02"),_=r(T,0,[5],"02");return(C=new a).setPrivate(new x(b,16),new x(w,16),new x(S,16),new x(E,16),new x(_,16)),C}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){y=c(t,"EC PRIVATE KEY");return l.getKey(y,null,"pkcs5prv")}if(-1!=t.indexOf("-END PRIVATE KEY-"))return l.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var A=l.getDecryptedKeyHex(t,e),F=new it;return F.readPKCS5PrvKeyHex(A),F}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var I,C=r(T=l.getDecryptedKeyHex(t,e),0,[1],"04"),k=r(T,0,[2,0],"06"),P=r(T,0,[3,0],"03").substr(2);if(void 0===ut.crypto.OID.oidhex2name[k])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+k);return(I=new o({curve:ut.crypto.OID.oidhex2name[k]})).setPublicKeyHex(P),I.setPrivateKeyHex(C),I.isPublic=!1,I}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var T;b=r(T=l.getDecryptedKeyHex(t,e),0,[1],"02"),w=r(T,0,[2],"02"),S=r(T,0,[3],"02"),E=r(T,0,[4],"02"),_=r(T,0,[5],"02");return(C=new a).setPrivate(new x(b,16),new x(w,16),new x(S,16),new x(E,16),new x(_,16)),C}if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return l.getKeyFromEncryptedPKCS8PEM(t,e);throw new Error("not supported argument")},Qt.generateKeypair=function(t,e){if("RSA"==t){var i=e;(o=new it).generate(i,"10001"),o.isPrivate=!0,o.isPublic=!0;var n=new it,r=o.n.toString(16),s=o.e.toString(16);return n.setPublic(r,s),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=n,a}if("EC"==t){var o,a,u=e,c=new ut.crypto.ECDSA({curve:u}).generateKeyPairHex();return(o=new ut.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),o.setPrivateKeyHex(c.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(n=new ut.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=n,a}throw new Error("unknown algorithm: "+t)},Qt.getPEM=function(t,e,i,n,r,s){var o=ut,a=o.asn1,u=a.DERObjectIdentifier,c=a.DERInteger,l=a.ASN1Util.newObject,d=a.x509.SubjectPublicKeyInfo,h=o.crypto,f=h.DSA,g=h.ECDSA,m=it;function v(t){return l({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function y(t){return l({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function b(t){return l({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==m&&t instanceof m||void 0!==f&&t instanceof f||void 0!==g&&t instanceof g)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return Ct(E=new d(t).tohex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==m&&t instanceof m&&(void 0===i||null==i)&&1==t.isPrivate)return Ct(E=v(t).tohex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==g&&t instanceof g&&(void 0===i||null==i)&&1==t.isPrivate){var w=new u({name:t.curveName}).tohex(),x=y(t).tohex(),S="";return S+=Ct(w,"EC PARAMETERS"),S+=Ct(x,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==f&&t instanceof f&&(void 0===i||null==i)&&1==t.isPrivate)return Ct(E=b(t).tohex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==m&&t instanceof m&&void 0!==i&&null!=i&&1==t.isPrivate){var E=v(t).tohex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",E,i,n,s)}if("PKCS5PRV"==e&&void 0!==g&&t instanceof g&&void 0!==i&&null!=i&&1==t.isPrivate){E=y(t).tohex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",E,i,n,s)}if("PKCS5PRV"==e&&void 0!==f&&t instanceof f&&void 0!==i&&null!=i&&1==t.isPrivate){E=b(t).tohex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",E,i,n,s)}var _=function(t,e){var i=A(t,e);return new l({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:i.pbkdf2Salt}},{int:i.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:i.encryptionSchemeIV}}]}]}]},{octstr:{hex:i.ciphertext}}]}).tohex()},A=function(t,e){var i=p.lib.WordArray.random(8),n=p.lib.WordArray.random(8),r=p.PBKDF2(e,i,{keySize:6,iterations:100}),s=p.enc.Hex.parse(t),o=p.TripleDES.encrypt(s,r,{iv:n})+"",a={};return a.ciphertext=o,a.pbkdf2Salt=p.enc.Hex.stringify(i),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=p.enc.Hex.stringify(n),a};if("PKCS8PRV"==e&&null!=m&&t instanceof m&&1==t.isPrivate){var F=v(t).tohex();E=l({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:F}}]}).tohex();return void 0===i||null==i?Ct(E,"PRIVATE KEY"):Ct(x=_(E,i),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==g&&t instanceof g&&1==t.isPrivate){var I={seq:[{int:1},{octstr:{hex:t.prvKeyHex}}]};"string"==typeof t.pubKeyHex&&I.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]});F=new l(I).tohex(),E=l({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:F}}]}).tohex();return void 0===i||null==i?Ct(E,"PRIVATE KEY"):Ct(x=_(E,i),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==f&&t instanceof f&&1==t.isPrivate){F=new c({bigint:t.x}).tohex(),E=l({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:F}}]}).tohex();return void 0===i||null==i?Ct(E,"PRIVATE KEY"):Ct(x=_(E,i),"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")},Qt.getKeyFromCSRPEM=function(t){var e=kt(t,"CERTIFICATE REQUEST");return Qt.getKeyFromCSRHex(e)},Qt.getKeyFromCSRHex=function(t){var e=Qt.parseCSRHex(t);return Qt.getKey(e.p8pubkeyhex,null,"pkcs8pub")},Qt.parseCSRHex=function(t){var e=dt,i=e.getChildIdx,n=e.getTLV,r={},s=t;if("30"!=s.substr(0,2))throw new Error("malformed CSR(code:001)");var o=i(s,0);if(o.length<1)throw new Error("malformed CSR(code:002)");if("30"!=s.substr(o[0],2))throw new Error("malformed CSR(code:003)");var a=i(s,o[0]);if(a.length<3)throw new Error("malformed CSR(code:004)");return r.p8pubkeyhex=n(s,a[2]),r},Qt.getKeyID=function(t){var e=Qt,i=dt;"string"==typeof t&&-1!=t.indexOf("BEGIN ")&&(t=e.getKey(t));var n=kt(e.getPEM(t)),r=i.getIdxbyList(n,0,[1]),s=i.getV(n,r).substring(2);return ut.crypto.Util.hashHex(s,"sha1")},Qt.getJWK=function(t,e,i,n,r){var s,o,a={},u=ut.crypto.Util.hashHex;if("string"==typeof t)s=Qt.getKey(t),-1!=t.indexOf("CERTIFICATE")&&(o=kt(t));else{if("object"!=typeof t)throw new Error("unsupported keyinfo type");t instanceof ne?(s=t.getPublicKey(),o=t.hex):s=t}if(s instanceof it&&s.isPrivate)a.kty="RSA",a.n=yt(s.n.toString(16)),a.e=yt(s.e.toString(16)),a.d=yt(s.d.toString(16)),a.p=yt(s.p.toString(16)),a.q=yt(s.q.toString(16)),a.dp=yt(s.dmp1.toString(16)),a.dq=yt(s.dmq1.toString(16)),a.qi=yt(s.coeff.toString(16));else if(s instanceof it&&s.isPublic)a.kty="RSA",a.n=yt(s.n.toString(16)),a.e=yt(s.e.toString(16));else if(s instanceof ut.crypto.ECDSA&&s.isPrivate){if("P-256"!==(l=s.getShortNISTPCurveName())&&"P-384"!==l&&"P-521"!==l)throw new Error("unsupported curve name for JWT: "+l);var c=s.getPublicKeyXYHex();a.kty="EC",a.crv=l,a.x=yt(c.x),a.y=yt(c.y),a.d=yt(s.prvKeyHex)}else if(s instanceof ut.crypto.ECDSA&&s.isPublic){var l;if("P-256"!==(l=s.getShortNISTPCurveName())&&"P-384"!==l&&"P-521"!==l)throw new Error("unsupported curve name for JWT: "+l);c=s.getPublicKeyXYHex();a.kty="EC",a.crv=l,a.x=yt(c.x),a.y=yt(c.y)}if(null==a.kty)throw new Error("unsupported keyinfo");return s.isPrivate||1==e||(a.kid=ut.jws.JWS.getJWKthumbprint(a)),null!=o&&1!=i&&(a.x5c=[y(o)]),null!=o&&1!=n&&(a.x5t=mt(y(u(o,"sha1")))),null!=o&&1!=r&&(a["x5t#S256"]=mt(y(u(o,"sha256")))),a},Qt.getJWKFromKey=function(t){return Qt.getJWK(t,!0,!0,!0,!0)},it.getPosArrayOfChildrenFromHex=function(t){return dt.getChildIdx(t,0)},it.getHexValueArrayOfChildrenFromHex=function(t){var e,i=dt.getV,n=i(t,(e=it.getPosArrayOfChildrenFromHex(t))[0]),r=i(t,e[1]),s=i(t,e[2]),o=i(t,e[3]),a=i(t,e[4]),u=i(t,e[5]),c=i(t,e[6]),l=i(t,e[7]),d=i(t,e[8]);return(e=new Array).push(n,r,s,o,a,u,c,l,d),e},it.prototype.readPrivateKeyFromPEMString=function(t){var e=kt(t),i=it.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8])},it.prototype.readPKCS5PrvKeyHex=function(t){var e=it.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},it.prototype.readPKCS8PrvKeyHex=function(t){var e,i,n,r,s,o,a,u,c=dt,l=c.getVbyListEx;if(!1===c.isASN1HEX(t))throw new Error("not ASN.1 hex string");try{e=l(t,0,[2,0,1],"02"),i=l(t,0,[2,0,2],"02"),n=l(t,0,[2,0,3],"02"),r=l(t,0,[2,0,4],"02"),s=l(t,0,[2,0,5],"02"),o=l(t,0,[2,0,6],"02"),a=l(t,0,[2,0,7],"02"),u=l(t,0,[2,0,8],"02")}catch(t){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(e,i,n,r,s,o,a,u)},it.prototype.readPKCS5PubKeyHex=function(t){var e=dt,i=e.getV;if(!1===e.isASN1HEX(t))throw new Error("keyHex is not ASN.1 hex string");var n=e.getChildIdx(t,0);if(2!==n.length||"02"!==t.substr(n[0],2)||"02"!==t.substr(n[1],2))throw new Error("wrong hex for PKCS#5 public key");var r=i(t,n[0]),s=i(t,n[1]);this.setPublic(r,s)},it.prototype.readPKCS8PubKeyHex=function(t){var e=dt;if(!1===e.isASN1HEX(t))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==e.getTLVbyListEx(t,0,[0,0]))throw new Error("not PKCS8 RSA public key");var i=e.getTLVbyListEx(t,0,[1,0]);this.readPKCS5PubKeyHex(i)},it.prototype.readCertPubKeyHex=function(t,e){var i,n;(i=new ne).readCertHex(t),n=i.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};new RegExp("[^0-9a-f]","gi");function te(t,e){for(var i="",n=e/4-t.length,r=0;r<n;r++)i+="0";return i+t}function ee(t,e,i){for(var n="",r=0;n.length<e;)n+=Et(i(_t(t+String.fromCharCode.apply(String,[(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r])))),r+=1;return n}function ie(t){for(var e in ut.crypto.Util.DIGESTINFOHEAD){var i=ut.crypto.Util.DIGESTINFOHEAD[e],n=i.length;if(t.substring(0,n)==i)return[e,t.substring(n)]}return[]}function ne(t){var e,i=dt,n=i.getChildIdx,r=i.getV,s=(i.dump,i.parse),o=i.getTLV,a=i.getVbyList,u=i.getVbyListEx,c=i.getTLVbyList,l=i.getTLVbyListEx,d=i.getIdxbyList,h=i.getIdxbyListEx,f=i.getVidx,g=i.getInt,p=i.oidname,m=i.hextooidstr,v=kt;try{e=ut.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(t){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var t=c(this.hex,0,[0,0]);if("a0"==t.substr(0,2)){var e=c(t,0,[0]),i=g(e,0);if(i<0||2<i)throw new Error("malformed version field");return this.version=i+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return u(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var t=l(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(t)},this.getAlgorithmIdentifierName=function(t){for(var i in e)if(t===e[i])return i;return p(u(t,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return c(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return c(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var t=a(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getNotAfter=function(){var t=a(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return c(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var t=this.getSPKI();return null==t?null:a(t,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return d(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return d(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return Qt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var t=c(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(t)},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmField(),i=this.getSignatureValueHex(),n=c(this.hex,0,[0],"30"),r=new ut.crypto.Signature({alg:e});return r.init(t),r.updateHex(n),r.verify(i)},this.parseExt=function(t){var e,s,o;if(void 0===t){if(o=this.hex,3!==this.version)return-1;e=d(o,0,[0,7,0],"30"),s=n(o,e)}else{o=kt(t);var u=d(o,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=r(o,u))return void(this.aExtInfo=new Array);e=d(o,0,[0,3,0,1,0],"30"),s=n(o,e),this.hex=o}this.aExtInfo=new Array;for(var c=0;c<s.length;c++){var l={critical:!1},h=0;3===n(o,s[c]).length&&(l.critical=!0,h=1),l.oid=i.hextooidstr(a(o,s[c],[0],"06"));var g=d(o,s[c],[1+h]);l.vidx=f(o,g),this.aExtInfo.push(l)}},this.getExtInfo=function(t){var e=this.aExtInfo,i=t;if(t.match(/^[0-9.]+$/)||(i=ut.asn1.x509.OID.name2oid(t)),""!==i)for(var n=0;n<e.length;n++)if(e[n].oid===i)return e[n]},this.getExtBasicConstraints=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("basicConstraints");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var n={extname:"basicConstraints"};if(e&&(n.critical=!0),"3000"===t)return n;if("30030101ff"===t)return n.cA=!0,n;if("30060101ff02"===t.substr(0,12)){var s=r(t,10),a=parseInt(s,16);return n.cA=!0,n.pathLen=a,n}throw new Error("hExtV parse error: "+t)},this.getExtNameConstraints=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("nameConstraints");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var r={extname:"nameConstraints"};e&&(r.critical=!0);for(var s=n(t,0),a=0;a<s.length;a++){for(var u=[],c=n(t,s[a]),l=0;l<c.length;l++){var d=o(t,c[l]),h=this.getGeneralSubtree(d);u.push(h)}var f=t.substr(s[a],2);"a0"==f?r.permit=u:"a1"==f&&(r.exclude=u)}return r},this.getGeneralSubtree=function(t){var e=n(t,0),i=e.length;if(i<1||2<i)throw new Error("wrong num elements");for(var s=this.getGeneralName(o(t,e[0])),a=1;a<i;a++){var u=t.substr(e[a],2),c=r(t,e[a]),l=parseInt(c,16);"80"==u&&(s.min=l),"81"==u&&(s.max=l)}return s},this.getExtKeyUsage=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("keyUsage");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var n={extname:"keyUsage"};return e&&(n.critical=!0),n.names=this.getExtKeyUsageString(t).split(","),n},this.getExtKeyUsageBin=function(t){if(void 0===t){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";t=o(this.hex,e.vidx)}if(8!=t.length&&10!=t.length)throw new Error("malformed key usage value: "+t);var i="000000000000000"+parseInt(t.substr(6),16).toString(2);return 8==t.length&&(i=i.slice(-8)),10==t.length&&(i=i.slice(-16)),""==(i=i.replace(/0+$/,""))&&(i="0"),i},this.getExtKeyUsageString=function(t){for(var e=this.getExtKeyUsageBin(t),i=new Array,n=0;n<e.length;n++)"1"==e.substr(n,1)&&i.push(ne.KEYUSAGE_NAME[n]);return i.join(",")},this.getExtSubjectKeyIdentifier=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("subjectKeyIdentifier");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var n={extname:"subjectKeyIdentifier"};e&&(n.critical=!0);var s=r(t,0);return n.kid={hex:s},n},this.getExtAuthorityKeyIdentifier=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("authorityKeyIdentifier");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var s={extname:"authorityKeyIdentifier"};e&&(s.critical=!0);for(var a=n(t,0),u=0;u<a.length;u++){var c=t.substr(a[u],2);if("80"===c&&(s.kid={hex:r(t,a[u])}),"a1"===c){var l=o(t,a[u]),d=this.getGeneralNames(l);s.issuer=d[0].dn}"82"===c&&(s.sn={hex:r(t,a[u])})}return s},this.getExtExtKeyUsage=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("extKeyUsage");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var s={extname:"extKeyUsage",array:[]};e&&(s.critical=!0);for(var a=n(t,0),u=0;u<a.length;u++)s.array.push(p(r(t,a[u])));return s},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var e=new Array,i=o(this.hex,t.vidx);if(""===i)return e;for(var s=n(i,0),a=0;a<s.length;a++)e.push(p(r(i,s[a])));return e},this.getExtSubjectAltName=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("subjectAltName");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var n={extname:"subjectAltName",array:[]};return e&&(n.critical=!0),n.array=this.getGeneralNames(t),n},this.getExtIssuerAltName=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("issuerAltName");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var n={extname:"issuerAltName",array:[]};return e&&(n.critical=!0),n.array=this.getGeneralNames(t),n},this.getGeneralNames=function(t){for(var e=n(t,0),i=[],r=0;r<e.length;r++){var s=this.getGeneralName(o(t,e[r]));void 0!==s&&i.push(s)}return i},this.getGeneralName=function(t){var e=t.substr(0,2),i=r(t,0),n=Et(i);return"81"==e?{rfc822:n}:"82"==e?{dns:n}:"86"==e?{uri:n}:"87"==e?{ip:Nt(i)}:"a4"==e?{dn:this.getX500Name(i)}:"a0"==e?{other:this.getOtherName(t)}:void 0},this.getExtSubjectAltName2=function(){var t,e,i,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=new Array,u=o(this.hex,s.vidx),c=n(u,0),l=0;l<c.length;l++)i=u.substr(c[l],2),t=r(u,c[l]),"81"===i&&(e=xt(t),a.push(["MAIL",e])),"82"===i&&(e=xt(t),a.push(["DNS",e])),"84"===i&&(e=ne.hex2dn(t,0),a.push(["DN",e])),"86"===i&&(e=xt(t),a.push(["URI",e])),"87"===i&&(e=Nt(t),a.push(["IP",e]));return a},this.getExtCRLDistributionPoints=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("cRLDistributionPoints");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var r={extname:"cRLDistributionPoints",array:[]};e&&(r.critical=!0);for(var s=n(t,0),a=0;a<s.length;a++){var u=o(t,s[a]);r.array.push(this.getDistributionPoint(u))}return r},this.getDistributionPoint=function(t){for(var e={},i=n(t,0),r=0;r<i.length;r++){var s=t.substr(i[r],2),a=o(t,i[r]);"a0"==s&&(e.dpname=this.getDistributionPointName(a))}return e},this.getDistributionPointName=function(t){for(var e={},i=n(t,0),r=0;r<i.length;r++){var s=t.substr(i[r],2),a=o(t,i[r]);"a0"==s&&(e.full=this.getGeneralNames(a))}return e},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtCRLDistributionPoints();if(null==t)return t;for(var e=t.array,i=[],n=0;n<e.length;n++)try{null!=e[n].dpname.full[0].uri&&i.push(e[n].dpname.full[0].uri)}catch(t){}return i},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var e={ocsp:[],caissuer:[]},i=n(this.hex,t.vidx),r=0;r<i.length;r++){var s=a(this.hex,i[r],[0],"06"),o=a(this.hex,i[r],[1],"86");"2b06010505073001"===s&&e.ocsp.push(xt(o)),"2b06010505073002"===s&&e.caissuer.push(xt(o))}return e},this.getExtAuthorityInfoAccess=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("authorityInfoAccess");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var r={extname:"authorityInfoAccess",array:[]};e&&(r.critical=!0);for(var s=n(t,0),c=0;c<s.length;c++){var l=u(t,s[c],[0],"06"),d=xt(a(t,s[c],[1],"86"));if("2b06010505073001"==l)r.array.push({ocsp:d});else{if("2b06010505073002"!=l)throw new Error("unknown method: "+l);r.array.push({caissuer:d})}}return r},this.getExtCertificatePolicies=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("certificatePolicies");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var r={extname:"certificatePolicies",array:[]};e&&(r.critical=!0);for(var s=n(t,0),a=0;a<s.length;a++){var u=o(t,s[a]),c=this.getPolicyInformation(u);r.array.push(c)}return r},this.getPolicyInformation=function(t){var e={},i=a(t,0,[0],"06");e.policyoid=p(i);var r=h(t,0,[1],"30");if(-1!=r){e.array=[];for(var s=n(t,r),u=0;u<s.length;u++){var c=o(t,s[u]),l=this.getPolicyQualifierInfo(c);e.array.push(l)}}return e},this.getOtherName=function(t){var e={},i=n(t,0),r=a(t,i[0],[],"06"),o=a(t,i[1],[]);return e.oid=ut.asn1.ASN1Util.oidHexToInt(r),e.obj=s(o),e},this.getPolicyQualifierInfo=function(t){var e={},i=a(t,0,[0],"06");if("2b06010505070201"===i){var n=u(t,0,[1],"16");e.cps=Et(n)}else if("2b06010505070202"===i){var r=c(t,0,[1],"30");e.unotice=this.getUserNotice(r)}return e},this.getUserNotice=function(t){for(var e={},i=n(t,0),r=0;r<i.length;r++){var s=o(t,i[r]);"30"!=s.substr(0,2)&&(e.exptext=this.getDisplayText(s))}return e},this.getDisplayText=function(t){var e={};return e.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[t.substr(0,2)],e.str=Et(r(t,0)),e},this.getExtCRLNumber=function(t,e){var i={extname:"cRLNumber"};if(e&&(i.critical=!0),"02"==t.substr(0,2))return i.num={hex:r(t,0)},i;throw new Error("hExtV parse error: "+t)},this.getExtCRLReason=function(t,e){var i={extname:"cRLReason"};if(e&&(i.critical=!0),"0a"==t.substr(0,2))return i.code=parseInt(r(t,0),16),i;throw new Error("hExtV parse error: "+t)},this.getExtOcspNonce=function(t,e){var i={extname:"ocspNonce"};e&&(i.critical=!0);var n=r(t,0);return i.hex=n,i},this.getExtOcspNoCheck=function(t,e){var i={extname:"ocspNoCheck"};return e&&(i.critical=!0),i},this.getExtAdobeTimeStamp=function(t,e){if(void 0===t&&void 0===e){var i=this.getExtInfo("adobeTimeStamp");if(void 0===i)return;t=o(this.hex,i.vidx),e=i.critical}var r={extname:"adobeTimeStamp"};e&&(r.critical=!0);var s=n(t,0);if(s.length>1){var a=o(t,s[1]),u=this.getGeneralName(a);null!=u.uri&&(r.uri=u.uri)}if(s.length>2){var c=o(t,s[2]);"0101ff"==c&&(r.reqauth=!0),"010100"==c&&(r.reqauth=!1)}return r};var y=function(t){var e={};try{var i=t.seq[0].oid,n=ut.asn1.x509.OID.name2oid(i);e.type=ut.asn1.x509.OID.oid2atype(n);var r=t.seq[1];if(null!=r.utf8str)e.ds="utf8",e.value=r.utf8str.str;else if(null!=r.numstr)e.ds="num",e.value=r.numstr.str;else if(null!=r.telstr)e.ds="tel",e.value=r.telstr.str;else if(null!=r.prnstr)e.ds="prn",e.value=r.prnstr.str;else if(null!=r.ia5str)e.ds="ia5",e.value=r.ia5str.str;else if(null!=r.visstr)e.ds="vis",e.value=r.visstr.str;else{if(null==r.bmpstr)throw"error";e.ds="bmp",e.value=r.bmpstr.str}return e}catch(t){throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},b=function(t){try{return t.set.map((function(t){return y(t)}))}catch(t){throw new Error("improper ASN.1 parsed RDN: "+t)}};this.getX500NameRule=function(t){for(var e=null,i=[],n=0;n<t.length;n++)for(var r=t[n],s=0;s<r.length;s++)i.push(r[s]);for(n=0;n<i.length;n++){var o=i[n],a=o.ds,u=o.value,c=o.type;if(":"+a,"prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=c)return"mixed";if(ut.lang.String.isMail(u))continue;return"mixed"}if("C"==c){if("prn"==a)continue;return"mixed"}if(":"+a,null==e)e=a;else if(e!==a)return"mixed"}return null==e?"prn":e},this.getAttrTypeAndValue=function(t){var e=s(t);return y(e)},this.getRDN=function(t){var e=s(t);return b(e)},this.getX500NameArray=function(t){return function(t){try{return t.seq.map((function(t){return b(t)}))}catch(t){throw new Error("improper ASN.1 parsed X500Name: "+t)}}(s(t))},this.getX500Name=function(t){var e=this.getX500NameArray(t);return{array:e,str:this.dnarraytostr(e)}},this.readCertPEM=function(t){this.readCertHex(v(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{d(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getParam=function(t){var e={};return e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(),e.sbjpubkey=Ct(this.getPublicKeyHex(),"PUBLIC KEY"),null!=this.aExtInfo&&this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),"object"==typeof t&&(1==t.tbshex&&(e.tbshex=c(this.hex,0,[0])),1==t.nodnarray&&(delete e.issuer.array,delete e.subject.array)),e},this.getExtParamArray=function(t){null==t&&(-1!=h(this.hex,0,[0,"[3]"])&&(t=l(this.hex,0,[0,"[3]",0],"30")));for(var e=[],i=n(t,0),r=0;r<i.length;r++){var s=o(t,i[r]),a=this.getExtParam(s);null!=a&&e.push(a)}return e},this.getExtParam=function(t){var e=n(t,0).length;if(2!=e&&3!=e)throw new Error("wrong number elements in Extension: "+e+" "+t);var i=m(a(t,0,[0],"06")),r=!1;3==e&&"0101ff"==c(t,0,[1])&&(r=!0);var s=c(t,0,[e-1,0]),o=void 0;if("2.5.29.14"==i?o=this.getExtSubjectKeyIdentifier(s,r):"2.5.29.15"==i?o=this.getExtKeyUsage(s,r):"2.5.29.17"==i?o=this.getExtSubjectAltName(s,r):"2.5.29.18"==i?o=this.getExtIssuerAltName(s,r):"2.5.29.19"==i?o=this.getExtBasicConstraints(s,r):"2.5.29.30"==i?o=this.getExtNameConstraints(s,r):"2.5.29.31"==i?o=this.getExtCRLDistributionPoints(s,r):"2.5.29.32"==i?o=this.getExtCertificatePolicies(s,r):"2.5.29.35"==i?o=this.getExtAuthorityKeyIdentifier(s,r):"2.5.29.37"==i?o=this.getExtExtKeyUsage(s,r):"1.3.6.1.5.5.7.1.1"==i?o=this.getExtAuthorityInfoAccess(s,r):"2.5.29.20"==i?o=this.getExtCRLNumber(s,r):"2.5.29.21"==i?o=this.getExtCRLReason(s,r):"1.3.6.1.5.5.7.48.1.2"==i?o=this.getExtOcspNonce(s,r):"1.3.6.1.5.5.7.48.1.5"==i?o=this.getExtOcspNoCheck(s,r):"1.2.840.113583.1.1.9.1"==i&&(o=this.getExtAdobeTimeStamp(s,r)),null!=o)return o;var u={extname:i,extn:s};return r&&(u.critical=!0),u},this.findExt=function(t,e){for(var i=0;i<t.length;i++)if(t[i].extname==e)return t[i];return null},this.updateExtCDPFullURI=function(t,e){var i=this.findExt(t,"cRLDistributionPoints");if(null!=i&&null!=i.array)for(var n=i.array,r=0;r<n.length;r++)if(null!=n[r].dpname&&null!=n[r].dpname.full)for(var s=n[r].dpname.full,o=0;o<s.length;o++){var a=s[r];null!=a.uri&&(a.uri=e)}},this.updateExtAIAOCSP=function(t,e){var i=this.findExt(t,"authorityInfoAccess");if(null!=i&&null!=i.array)for(var n=i.array,r=0;r<n.length;r++)null!=n[r].ocsp&&(n[r].ocsp=e)},this.updateExtAIACAIssuer=function(t,e){var i=this.findExt(t,"authorityInfoAccess");if(null!=i&&null!=i.array)for(var n=i.array,r=0;r<n.length;r++)null!=n[r].caissuer&&(n[r].caissuer=e)},this.dnarraytostr=function(t){return"/"+t.map((function(t){return function(t){return t.map((function(t){return function(t){return t.type+"="+t.value}(t).replace(/\+/,"\\+")})).join("+")}(t).replace(/\//,"\\/")})).join("/")},this.getInfo=function(){var t,e,i,n,r=function(t){for(var e="",i=t.array,n=0;n<i.length;n++){var r=i[n];if(e+="    policy oid: "+r.policyoid+"\n",void 0!==r.array)for(var s=0;s<r.array.length;s++){var o=r.array[s];void 0!==o.cps&&(e+="    cps: "+o.cps+"\n")}}return e},s=function(t){for(var e="",i=t.array,n=0;n<i.length;n++){var r=i[n];try{void 0!==r.dpname.full[0].uri&&(e+="    "+r.dpname.full[0].uri+"\n")}catch(t){}try{void 0!==r.dname.full[0].dn.hex&&(e+="    "+ne.hex2dn(r.dpname.full[0].dn.hex)+"\n")}catch(t){}}return e},o=function(t){for(var e="",i=t.array,n=0;n<i.length;n++){var r=i[n];void 0!==r.caissuer&&(e+="    caissuer: "+r.caissuer+"\n"),void 0!==r.ocsp&&(e+="    ocsp: "+r.ocsp+"\n")}return e};if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+qt(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+qt(e.e.toString(16))+"\n"),null!=(i=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var a=0;a<i.length;a++){var u=i[a],c=ut.asn1.x509.OID.oid2name(u.oid);""===c&&(c=u.oid);var l="";if(!0===u.critical&&(l="CRITICAL"),t+="  "+c+" "+l+":\n","basicConstraints"===c){var d=this.getExtBasicConstraints();void 0===d.cA?t+="    {}\n":(t+="    cA=true",void 0!==d.pathLen&&(t+=", pathLen="+d.pathLen),t+="\n")}else if("keyUsage"===c)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===c)t+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===c){var h=this.getExtAuthorityKeyIdentifier();void 0!==h.kid&&(t+="    kid="+h.kid.hex+"\n")}else{if("extKeyUsage"===c)t+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n";else if("subjectAltName"===c)t+="    "+(n=this.getExtSubjectAltName(),JSON.stringify(n.array).replace(/[\[\]\{\}\"]/g,""))+"\n";else if("cRLDistributionPoints"===c)t+=s(this.getExtCRLDistributionPoints());else if("authorityInfoAccess"===c)t+=o(this.getExtAuthorityInfoAccess());else"certificatePolicies"===c&&(t+=r(this.getExtCertificatePolicies()))}}}return t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",t+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?this.readCertPEM(t):ut.lang.String.isHex(t)&&this.readCertHex(t))}it.prototype.sign=function(t,e){var i=function(t){return ut.crypto.Util.hashString(t,e)}(t);return this.signWithMessageHash(i,e)},it.prototype.signWithMessageHash=function(t,e){var i=tt(ut.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return te(this.doPrivate(i).toString(16),this.n.bitLength())},it.prototype.signPSS=function(t,e,i){var n,r=(n=_t(t),ut.crypto.Util.hashHex(n,e));return void 0===i&&(i=-1),this.signWithMessageHashPSS(r,e,i)},it.prototype.signWithMessageHashPSS=function(t,e,i){var n,r=Et(t),s=r.length,o=this.n.bitLength()-1,a=Math.ceil(o/8),u=function(t){return ut.crypto.Util.hashHex(t,e)};if(-1===i||void 0===i)i=s;else if(-2===i)i=a-s-2;else if(i<-2)throw new Error("invalid salt length");if(a<s+i+2)throw new Error("data too long");var c="";i>0&&(c=new Array(i),(new Q).nextBytes(c),c=String.fromCharCode.apply(String,c));var l=Et(u(_t("\0\0\0\0\0\0\0\0"+r+c))),d=[];for(n=0;n<a-i-s-2;n+=1)d[n]=0;var h=String.fromCharCode.apply(String,d)+""+c,f=ee(l,h.length,u),g=[];for(n=0;n<h.length;n+=1)g[n]=h.charCodeAt(n)^f.charCodeAt(n);var p=65280>>8*a-o&255;for(g[0]&=~p,n=0;n<s;n++)g.push(l.charCodeAt(n));return g.push(188),te(this.doPrivate(new x(g)).toString(16),this.n.bitLength())},it.prototype.verify=function(t,e){if(null==(e=e.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var i=tt(e,16),n=this.n.bitLength();if(i.bitLength()>n)return!1;var r=this.doPublic(i).toString(16);if(r.length+3!=n/4)return!1;var s=ie(r.replace(/^1f+00/,""));if(0==s.length)return!1;var o=s[0],a=s[1],u=function(t){return ut.crypto.Util.hashString(t,o)}(t);return a==u},it.prototype.verifyWithMessageHash=function(t,e){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var i=tt(e,16);if(i.bitLength()>this.n.bitLength())return 0;var n=ie(this.doPublic(i).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;n[0];return n[1]==t},it.prototype.verifyPSS=function(t,e,i,n){var r,s=(r=_t(t),ut.crypto.Util.hashHex(r,i));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(s,e,i,n)},it.prototype.verifyWithMessageHashPSS=function(t,e,i,n){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var r,s=new x(e,16),o=function(t){return ut.crypto.Util.hashHex(t,i)},a=Et(t),u=a.length,c=this.n.bitLength()-1,l=Math.ceil(c/8);if(-1===n||void 0===n)n=u;else if(-2===n)n=l-u-2;else if(n<-2)throw new Error("invalid salt length");if(l<u+n+2)throw new Error("data too long");var d=this.doPublic(s).toByteArray();for(r=0;r<d.length;r+=1)d[r]&=255;for(;d.length<l;)d.unshift(0);if(188!==d[l-1])throw new Error("encoded message does not end in 0xbc");var h=(d=String.fromCharCode.apply(String,d)).substr(0,l-u-1),f=d.substr(h.length,u),g=65280>>8*l-c&255;if(0!=(h.charCodeAt(0)&g))throw new Error("bits beyond keysize not zero");var p=ee(f,h.length,o),m=[];for(r=0;r<h.length;r+=1)m[r]=h.charCodeAt(r)^p.charCodeAt(r);m[0]&=~g;var v=l-u-n-2;for(r=0;r<v;r+=1)if(0!==m[r])throw new Error("leftmost octets not zero");if(1!==m[v])throw new Error("0x01 marker not found");return f===Et(o(_t("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,m.slice(-n)))))},it.SALT_LEN_HLEN=-1,it.SALT_LEN_MAX=-2,it.SALT_LEN_RECOVER=-2,ne.hex2dn=function(t,e){void 0===e&&(e=0);var i=new ne;dt.getTLV(t,e);return i.getX500Name(t).str},ne.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw new Error("malformed RDN");for(var i=new Array,n=dt.getChildIdx(t,e),r=0;r<n.length;r++)i.push(ne.hex2attrTypeValue(t,n[r]));return i=i.map((function(t){return t.replace("+","\\+")})),i.join("+")},ne.hex2attrTypeValue=function(t,e){var i=dt,n=i.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw new Error("malformed attribute type and value");var r=i.getChildIdx(t,e);2!==r.length||t.substr(r[0],2);var s=n(t,r[0]),o=ut.asn1.ASN1Util.oidHexToInt(s);return ut.asn1.x509.OID.oid2atype(o)+"="+Et(n(t,r[1]))},ne.getPublicKeyFromCertHex=function(t){var e=new ne;return e.readCertHex(t),e.getPublicKey()},ne.getPublicKeyFromCertPEM=function(t){var e=new ne;return e.readCertPEM(t),e.getPublicKey()},ne.getPublicKeyInfoPropOfCertPEM=function(t){var e,i,n=dt.getVbyList,r={};return r.algparam=null,(e=new ne).readCertPEM(t),i=e.getPublicKeyHex(),r.keyhex=n(i,0,[1],"03").substr(2),r.algoid=n(i,0,[0,0],"06"),"2a8648ce3d0201"===r.algoid&&(r.algparam=n(i,0,[0,1],"06")),r},ne.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];void 0!==ut&&ut||(ut={}),void 0!==ut.jws&&ut.jws||(ut.jws={}),ut.jws.JWS=function(){var t=ut.jws.JWS.isSafeJSONString;this.parseJWS=function(e,i){if(void 0===this.parsedJWS||!i&&void 0===this.parsedJWS.sigvalH){var n=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==n)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var r=n[1],s=n[2],o=n[3],a=r+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=r,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=a,!i){var u=bt(o),c=tt(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var l=lt(r),d=lt(s);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=d,!t(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},ut.jws.JWS.sign=function(t,e,i,n,r){var s,o,a,u=ut,c=u.jws.JWS,l=c.readSafeJSONString,d=c.isSafeJSONString,h=u.crypto,f=(h.ECDSA,h.Mac),g=h.Signature,p=JSON;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(o=e,s=p.stringify(o)),"string"==typeof e){if(!d(s=e))throw"JWS Head is not safe JSON string: "+s;o=l(s)}if(a=i,"object"==typeof i&&(a=p.stringify(i)),""!=t&&null!=t||void 0===o.alg||(t=o.alg),""!=t&&null!=t&&void 0===o.alg&&(o.alg=t,s=p.stringify(o)),t!==o.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+o.alg;var m=null;if(void 0===c.jwsalg2sigalg[t])throw"unsupported alg name: "+t;m=c.jwsalg2sigalg[t];var v=ct(s)+"."+ct(a),y="";if("Hmac"==m.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var b=new f({alg:m,prov:"cryptojs",pass:n});b.updateString(v),y=b.doFinal()}else if(-1!=m.indexOf("withECDSA")){(x=new g({alg:m})).init(n,r),x.updateString(v);var w=x.sign();y=ut.crypto.ECDSA.asn1SigToConcatSig(w)}else{var x;if("none"!=m)(x=new g({alg:m})).init(n,r),x.updateString(v),y=x.sign()}return v+"."+yt(y)},ut.jws.JWS.verify=function(t,e,i){var n,r=ut,s=r.jws.JWS,o=s.readSafeJSONString,a=r.crypto,u=a.ECDSA,c=a.Mac,l=a.Signature;if(n=it,!Ut(t))return!1;var d=t.split(".");if(3!==d.length)return!1;var h=d[0]+"."+d[1],f=bt(d[2]),g=o(lt(d[0])),p=null,m=null;if(void 0===g.alg)throw"algorithm not specified in header";if((m=(p=g.alg).substr(0,2),null!=i&&"[object Array]"===Object.prototype.toString.call(i)&&i.length>0)&&-1==(":"+i.join(":")+":").indexOf(":"+p+":"))throw"algorithm '"+p+"' not accepted in the list";if("none"!=p&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=Qt.getKey(e)),!("RS"!=m&&"PS"!=m||e instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==m&&!(e instanceof u))throw"key shall be a ECDSA obj for ES* algs";var v=null;if(void 0===s.jwsalg2sigalg[g.alg])throw"unsupported alg name: "+p;if("none"==(v=s.jwsalg2sigalg[p]))throw"not supported";if("Hmac"==v.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var y=new c({alg:v,pass:e});return y.updateString(h),f==y.doFinal()}if(-1!=v.indexOf("withECDSA")){var b,w=null;try{w=u.concatSigToASN1Sig(f)}catch(t){return!1}return(b=new l({alg:v})).init(e),b.updateString(h),b.verify(w)}return(b=new l({alg:v})).init(e),b.updateString(h),b.verify(f)},ut.jws.JWS.parse=function(t){var e,i,n,r=t.split("."),s={};if(2!=r.length&&3!=r.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=r[0],i=r[1],3==r.length&&(n=r[2]),s.headerObj=ut.jws.JWS.readSafeJSONString(lt(e)),s.payloadObj=ut.jws.JWS.readSafeJSONString(lt(i)),s.headerPP=JSON.stringify(s.headerObj,null,"  "),null==s.payloadObj?s.payloadPP=lt(i):s.payloadPP=JSON.stringify(s.payloadObj,null,"  "),void 0!==n&&(s.sigHex=bt(n)),s},ut.jws.JWS.verifyJWT=function(t,e,i){var n=ut.jws,r=n.JWS,s=r.readSafeJSONString,o=r.inArray,a=r.includedArray;if(!Ut(t))return!1;var u=t.split(".");if(3!=u.length)return!1;var c=u[0],l=u[1],d=(bt(u[2]),s(lt(c))),h=s(lt(l));if(void 0===d.alg)return!1;if(void 0===i.alg)throw"acceptField.alg shall be specified";if(!o(d.alg,i.alg))return!1;if(void 0!==h.iss&&"object"==typeof i.iss&&!o(h.iss,i.iss))return!1;if(void 0!==h.sub&&"object"==typeof i.sub&&!o(h.sub,i.sub))return!1;if(void 0!==h.aud&&"object"==typeof i.aud)if("string"==typeof h.aud){if(!o(h.aud,i.aud))return!1}else if("object"==typeof h.aud&&!a(h.aud,i.aud))return!1;var f=n.IntDate.getNow();return void 0!==i.verifyAt&&"number"==typeof i.verifyAt&&(f=i.verifyAt),void 0!==i.gracePeriod&&"number"==typeof i.gracePeriod||(i.gracePeriod=0),!(void 0!==h.exp&&"number"==typeof h.exp&&h.exp+i.gracePeriod<f)&&(!(void 0!==h.nbf&&"number"==typeof h.nbf&&f<h.nbf-i.gracePeriod)&&(!(void 0!==h.iat&&"number"==typeof h.iat&&f<h.iat-i.gracePeriod)&&((void 0===h.jti||void 0===i.jti||h.jti===i.jti)&&!!r.verify(t,e,i.alg))))},ut.jws.JWS.includedArray=function(t,e){var i=ut.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(!i(t[n],e))return!1;return!0},ut.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1},ut.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ut.jws.JWS.isSafeJSONString=function(t,e,i){var n=null;try{return"object"!=typeof(n=at(t))||n.constructor===Array?0:(e&&(e[i]=n),1)}catch(t){return 0}},ut.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=at(t))||e.constructor===Array?null:e}catch(t){return null}},ut.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},ut.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var i=_t(e);return yt(ut.crypto.Util.hashHex(i,"sha256"))},ut.jws.IntDate={},ut.jws.IntDate.get=function(t){var e=ut.jws.IntDate,i=e.getNow,n=e.getZulu;if("now"==t)return i();if("now + 1hour"==t)return i()+3600;if("now + 1day"==t)return i()+86400;if("now + 1month"==t)return i()+2592e3;if("now + 1year"==t)return i()+31536e3;if(t.match(/Z$/))return n(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},ut.jws.IntDate.getZulu=function(t){return Tt(t)},ut.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ut.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},ut.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},void 0!==ut&&ut||(ut={}),void 0!==ut.jws&&ut.jws||(ut.jws={}),ut.jws.JWSJS=function(){var t=ut.jws.JWS,e=t.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,i,n){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var r=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=ut.jws.JWS.sign(t,e,this.sPayload,i,n).split(".");s[0],s[2];this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(t){throw this.aHeader.length>r&&this.aHeader.pop(),this.aSignature.length>r&&this.aSignature.pop(),"addSignature failed: "+t}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var i=t[e];if(2!==i.length)return!1;if(!1===this.verifyNth(e,i[0],i[1]))return!1}return!0},this.verifyNth=function(e,i,n){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var r=this.aHeader[e],s=this.aSignature[e],o=r+"."+this.sPayload+"."+s,a=!1;try{a=t.verify(o,i,n)}catch(t){return!1}return a},this.readJWSJS=function(t){if("string"==typeof t){var i=e(t);if(null==i)throw"argument is not safe JSON object string";this.aHeader=i.headers,this.sPayload=i.payload,this.aSignature=i.signatures}else try{if(!(t.headers.length>0))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(t.signatures.length>0))throw"malformed signatures";this.aSignature=t.signatures}catch(t){throw"malformed JWS-JS JSON object: "+t}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},e.SecureRandom=Q,e.rng_seed_time=W,e.BigInteger=x,e.RSAKey=it,e.ECDSA=ut.crypto.ECDSA,e.DSA=ut.crypto.DSA,e.Signature=ut.crypto.Signature,e.MessageDigest=ut.crypto.MessageDigest,e.Mac=ut.crypto.Mac,e.Cipher=ut.crypto.Cipher,e.KEYUTIL=Qt,e.ASN1HEX=dt,e.X509=ne,e.X509CRL=function(t){var e=ut.lang.String.isHex,i=dt,n=i.getV,r=i.getTLV,s=i.getVbyList,o=i.getTLVbyList,a=i.getTLVbyListEx,u=i.getIdxbyList,c=i.getIdxbyListEx,l=i.getChildIdx,d=new ne;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var t=u(this.hex,0,[0,0]),e=this.hex.substr(t,2);if("02"==e)this.posSigAlg=1;else{if("30"!=e)throw new Error("malformed 1st item of TBSCertList: "+e);this.posSigAlg=0}var i,n=u(this.hex,0,[0,this.posSigAlg+3]),r=this.hex.substr(n,2);if("17"==r||"18"==r)i=u(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,-1!=i&&"30"==this.hex.substr(i,2)&&(this.posRevCert=this.posSigAlg+4);else if("30"==r)this.posRevCert=this.posSigAlg+3;else{if("a0"!=r)throw new Error("malformed nextUpdate or revCert tag: "+r);this.posRevCert=null}},this.getVersion=function(){return 0==this.posSigAlg?null:parseInt(s(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var t=o(this.hex,0,[0,this.posSigAlg],"30");return d.getAlgorithmIdentifierName(t)},this.getIssuer=function(){return d.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return o(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var t=s(this.hex,0,[0,this.posSigAlg+2]);return result=Et(t)},this.getNextUpdate=function(){var t=u(this.hex,0,[0,this.posSigAlg+3]),e=this.hex.substr(t,2);return"17"!=e&&"18"!=e?null:Et(n(this.hex,t))},this.getRevCertArray=function(){if(null==this.posRevCert)return null;for(var t=[],e=u(this.hex,0,[0,this.posRevCert]),i=l(this.hex,e),n=0;n<i.length;n++){var s=r(this.hex,i[n]);t.push(this.getRevCert(s))}return t},this.getRevCert=function(t){var e={},i=l(t,0);return e.sn={hex:s(t,0,[0],"02")},e.date=Et(s(t,0,[1])),3==i.length&&(e.ext=d.getExtParamArray(o(t,0,[2]))),e},this.findRevCert=function(t){var e=new ne(t).getSerialNumberHex();return this.findRevCertBySN(e)},this.findRevCertBySN=function(t){if(null==this.parsed&&this.getParam(),null==this.parsed.revcert)return null;for(var e=this.parsed.revcert,i=0;i<e.length;i++)if(t==e[i].sn.hex)return e[i];return null},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmField(),i=this.getSignatureValueHex(),n=o(this.hex,0,[0],"30"),r=new ut.crypto.Signature({alg:e});return r.init(t),r.updateHex(n),r.verify(i)},this.getParam=function(t){var e={},i=this.getVersion();null!=i&&(e.version=i),e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.thisupdate=this.getThisUpdate();var n=this.getNextUpdate();null!=n&&(e.nextupdate=n);var r=this.getRevCertArray();if(null!=r&&(e.revcert=r),-1!=c(this.hex,0,[0,"[0]"])){var s=a(this.hex,0,[0,"[0]",0]);e.ext=d.getExtParamArray(s)}return e.sighex=this.getSignatureValueHex(),this.parsed=e,"object"==typeof t&&(1==t.tbshex&&(e.tbshex=o(this.hex,0,[0])),1==t.nodnarray&&delete e.issuer.array),e},"string"==typeof t&&(e(t)?this.hex=t:t.match(/-----BEGIN X509 CRL/)&&(this.hex=kt(t)),this._setPos())},e.CryptoJS=p,e.b64tohex=b,e.b64toBA=w,e.ECFieldElementFp=rt,e.ECPointFp=st,e.ECCurveFp=ot,e.stoBA=ht,e.BAtos=ft,e.BAtohex=gt,e.stohex=pt,e.stob64=function(t){return y(pt(t))},e.stob64u=function(t){return mt(y(pt(t)))},e.b64utos=function(t){return ft(w(vt(t)))},e.b64tob64u=mt,e.b64utob64=vt,e.hex2b64=y,e.hextob64u=yt,e.b64utohex=bt,e.utf8tob64u=ct,e.b64utoutf8=lt,e.utf8tob64=function(t){return y(Ot(Lt(t)))},e.b64toutf8=function(t){return decodeURIComponent(Rt(b(t)))},e.utf8tohex=wt,e.hextoutf8=xt,e.hextorstr=Et,e.rstrtohex=_t,e.hextob64=At,e.hextob64nl=Ft,e.b64nltohex=It,e.hextopem=Ct,e.pemtohex=kt,e.hextoArrayBuffer=function(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),i=new DataView(e),n=0;n<t.length/2;n++)i.setUint8(n,parseInt(t.substr(2*n,2),16));return e},e.ArrayBuffertohex=function(t){for(var e="",i=new DataView(t),n=0;n<t.byteLength;n++)e+=("00"+i.getUint8(n).toString(16)).slice(-2);return e},e.zulutomsec=Pt,e.zulutosec=Tt,e.zulutodate=function(t){return new Date(Pt(t))},e.datetozulu=function(t,e,i){var n,r=t.getUTCFullYear();if(e){if(r<1950||2049<r)throw"not proper year for UTCTime: "+r;n=(""+r).slice(-2)}else n=("000"+r).slice(-4);if(n+=("0"+(t.getUTCMonth()+1)).slice(-2),n+=("0"+t.getUTCDate()).slice(-2),n+=("0"+t.getUTCHours()).slice(-2),n+=("0"+t.getUTCMinutes()).slice(-2),n+=("0"+t.getUTCSeconds()).slice(-2),i){var s=t.getUTCMilliseconds();0!==s&&(n+="."+(s=(s=("00"+s).slice(-3)).replace(/0+$/g,"")))}return n+="Z"},e.uricmptohex=Ot,e.hextouricmp=Rt,e.ipv6tohex=Dt,e.hextoipv6=Bt,e.hextoip=Nt,e.iptohex=jt,e.ucs2hextoutf8=Ht,e.encodeURIComponentAll=Lt,e.newline_toUnix=function(t){return t=t.replace(/\r\n/gm,"\n")},e.newline_toDos=function(t){return t=(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},e.hextoposhex=qt,e.intarystrtohex=function(t){t=(t=(t=t.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return t.split(/,/).map((function(t,e,i){var n=parseInt(t);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)})).join("")}catch(t){throw"malformed integer array string: "+t}},e.strdiffidx=function(t,e){var i=t.length;t.length>e.length&&(i=e.length);for(var n=0;n<i;n++)if(t.charCodeAt(n)!=e.charCodeAt(n))return n;return t.length!=e.length?i:-1},e.oidtohex=Kt,e.hextooid=Gt,e.strpad=Wt,e.bitstrtoint=Jt,e.inttobitstr=Yt,e.bitstrtobinstr=Xt,e.binstrtobitstr=function(t){if("string"!=typeof t)return null;if(null==t.match(/^[01]+$/))return null;try{return Yt(parseInt(t,2))}catch(t){return null}},e.isBase64URLDot=Ut,e.namearraytobinstr=Zt,e.extendClass=$t,e.KJUR=ut,e.crypto=ut.crypto,e.asn1=ut.asn1,e.jws=ut.jws,e.lang=ut.lang}).call(this,i(72).Buffer)},function(t,e,i){"use strict";(function(t){var n=i(74),r=i(75),s=i(76);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,i){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return c(this,t,e,i)}function c(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!u.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(e,i),r=(t=a(t,n)).write(e,i);r!==n&&(t=t.slice(0,r));return t}(t,e,i):function(t,e){if(u.isBuffer(e)){var i=0|f(e.length);return 0===(t=a(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):h(t,e);if("Buffer"===e.type&&s(e.data))return h(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(l(e),t=a(t,e<0?0:0|f(e)),!u.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function h(t,e){var i=e.length<0?0:0|f(e.length);t=a(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function g(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return L(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return V(t).length;default:if(n)return L(t).length;e=(""+e).toLowerCase(),n=!0}}function p(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,i);case"utf8":case"utf-8":return F(this,e,i);case"ascii":return C(this,e,i);case"latin1":case"binary":return k(this,e,i);case"base64":return A(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function v(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:y(t,e,i,n,r);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,n,r){var s,o=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,u/=2,i/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r){var l=-1;for(s=i;s<a;s++)if(c(t,s)===c(e,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(i+u>a&&(i=a-u),s=i;s>=0;s--){for(var d=!0,h=0;h<u;h++)if(c(t,s+h)!==c(e,h)){d=!1;break}if(d)return s}return-1}function b(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[i+o]=a}return o}function w(t,e,i,n){return U(L(e,t.length-i),t,i,n)}function x(t,e,i,n){return U(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function S(t,e,i,n){return x(t,e,i,n)}function E(t,e,i,n){return U(V(e),t,i,n)}function _(t,e,i,n){return U(function(t,e){for(var i,n,r,s=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(i=t.charCodeAt(o))>>8,r=i%256,s.push(r),s.push(n);return s}(e,t.length-i),t,i,n)}function A(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function F(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var s,o,a,u,c=t[r],l=null,d=c>239?4:c>223?3:c>191?2:1;if(r+d<=i)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(s=t[r+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=t[r+1],o=t[r+2],128==(192&s)&&128==(192&o)&&(u=(15&c)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=t[r+1],o=t[r+2],a=t[r+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),r+=d}return function(t){var e=t.length;if(e<=I)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=I));return i}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,i){return c(null,t,e,i)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,i){return function(t,e,i,n){return l(e),e<=0?a(t,e):void 0!==i?"string"==typeof n?a(t,e).fill(i,n):a(t,e).fill(i):a(t,e)}(null,t,e,i)},u.allocUnsafe=function(t){return d(null,t)},u.allocUnsafeSlow=function(t){return d(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,s=Math.min(i,n);r<s;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=u.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var o=t[i];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?F(this,0,t):p.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,i,n,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(n>>>=0),o=(i>>>=0)-(e>>>=0),a=Math.min(s,o),c=this.slice(n,r),l=t.slice(e,i),d=0;d<a;++d)if(c[d]!==l[d]){s=c[d],o=l[d];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},u.prototype.indexOf=function(t,e,i){return v(this,t,e,i,!0)},u.prototype.lastIndexOf=function(t,e,i){return v(this,t,e,i,!1)},u.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return b(this,t,e,i);case"utf8":case"utf-8":return w(this,t,e,i);case"ascii":return x(this,t,e,i);case"latin1":case"binary":return S(this,t,e,i);case"base64":return E(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function C(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function k(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function P(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",s=e;s<i;++s)r+=H(t[s]);return r}function T(t,e,i){for(var n=t.slice(e,i),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function O(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,i,n,r,s){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function D(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-i,2);r<s;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function B(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-i,4);r<s;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function N(t,e,i,n,r,s){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function M(t,e,i,n,s){return s||N(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function j(t,e,i,n,s){return s||N(t,0,i,8),r.write(t,e,i,n,52,8),i+8}u.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;i=new u(r,void 0);for(var s=0;s<r;++s)i[s]=this[s+t]}return i},u.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||O(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return n},u.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||O(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},u.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||O(t,e,this.length);for(var n=this[t],r=1,s=0;++s<e&&(r*=256);)n+=this[t+s]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||O(t,e,this.length);for(var n=e,r=1,s=this[t+--n];n>0&&(r*=256);)s+=this[t+--n]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},u.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),r.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||R(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,s=0;for(this[e]=255&t;++s<i&&(r*=256);)this[e+s]=t/r&255;return e+i},u.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||R(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+i},u.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);R(this,t,e,i,r-1,-r)}var s=0,o=1,a=0;for(this[e]=255&t;++s<i&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+i},u.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);R(this,t,e,i,r-1,-r)}var s=i-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+i},u.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,i){return M(this,t,e,!0,i)},u.prototype.writeFloatBE=function(t,e,i){return M(this,t,e,!1,i)},u.prototype.writeDoubleLE=function(t,e,i){return j(this,t,e,!0,i)},u.prototype.writeDoubleBE=function(t,e,i){return j(this,t,e,!1,i)},u.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,s=n-i;if(this===t&&i<e&&e<n)for(r=s-1;r>=0;--r)t[r+e]=this[r+i];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),e);return s},u.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var s;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(s=e;s<i;++s)this[s]=t;else{var o=u.isBuffer(t)?t:L(new u(t,n).toString()),a=o.length;for(s=0;s<i-e;++s)this[s+e]=o[s%a]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function L(t,e){var i;e=e||1/0;for(var n=t.length,r=null,s=[],o=0;o<n;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function V(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(this,i(73))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";e.byteLength=function(t){var e=c(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){var e,i,n=c(t),o=n[0],a=n[1],u=new s(function(t,e,i){return 3*(e+i)/4-i}(0,o,a)),l=0,d=a>0?o-4:o;for(i=0;i<d;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===a&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,u[l++]=255&e);1===a&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,s=[],o=16383,a=0,u=i-r;a<u;a+=o)s.push(l(t,a,a+o>u?u:a+o));1===r?(e=t[i-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return s.join("")};for(var n=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function l(t,e,i){for(var r,s,o=[],a=e;a<i;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(n[(s=r)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,n,r){var s,o,a=8*r-n-1,u=(1<<a)-1,c=u>>1,l=-7,d=i?r-1:0,h=i?-1:1,f=t[e+d];for(d+=h,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+t[e+d],d+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+t[e+d],d+=h,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=c}return(f?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,i,n,r,s){var o,a,u,c=8*s-r-1,l=(1<<c)-1,d=l>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,g=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+d>=1?h/u:h*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*u-1)*Math.pow(2,r),o+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;t[i+f]=255&a,f+=g,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;t[i+f]=255&o,f+=g,o/=256,c-=8);t[i+f-g]|=128*p}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){var n=i(3),r=i(4);t.exports=function(){var t=r(n.mark((function t(e,r,s){var o,a,u,c,l,d,h,f,g,p,m,v,y,b,w,x,S,E,_,A,F,I,C,k,P,T,O,R,D,B,N,M,j,z,H,L,V,U,q,K,G,W,J,Y,X,Z,$,Q,tt,et,it,nt,rt,st,ot,at,ut,ct,lt,dt,ht,ft,gt,pt,mt,vt;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H=s.hasOwnProperty("use_window_top")?s.use_window_top?window.top:window:window.top,null!==(o=s.services)&&void 0!==o&&null!==(a=o.reaper)&&void 0!==a&&a.active&&(L=i(32),new L(r,s).run()),null!==(u=s.services)&&void 0!==u&&u.gpt.active&&i(22)(s),t.next=5,e(r).then((function(t){return H.OCM.pageType=t,t}));case 5:return t.sent,r.ocmChromeExt(s),null!==(c=s.services)&&void 0!==c&&c.blockthrough.active&&i(78)(s),t.next=10,r.isAdBlocked();case 10:if(null===(l=s.services)||void 0===l||!l.geolocation.active){t.next=13;break}return t.next=13,r.geolocation();case 13:if(null!==(d=s.services)&&void 0!==d&&d.fizz.active&&(V=i(38),r.contentLoaded().then((function(){new V(r,s).run()}))),null!==(h=s.services)&&void 0!==h&&h.mwi.active&&i(79)(s,r),null!==(f=s.services)&&void 0!==f&&f.injected_tags.active&&(U=i(80),new U(r,s,null).run()),null===(g=s.services)||void 0===g||!g.lazyload.active||!r.allowPageType(null===(p=s.services)||void 0===p?void 0:p.lazyload.page_types)){t.next=21;break}return q=i(39),K=new q(r,s),t.next=21,K.run();case 21:if(null!==(m=s.services)&&void 0!==m&&m.lazyload.active||null===(v=s.services)||void 0===v||!v.uam.active||null===(y=s.services)||void 0===y||!y.uam.hasOwnProperty("page_types")||!r.allowPageType(null===(b=s.services)||void 0===b?void 0:b.uam.page_types)){t.next=27;break}return G=i(15),(W=new G(r,s)).init(),t.next=27,W.fetch([]);case 27:if(null!==(w=s.services)&&void 0!==w&&w.lazyload.active||null===(x=s.services)||void 0===x||!x.header_bidding.active||null===(S=s.services)||void 0===S||!S.header_bidding.hasOwnProperty("page_types")||!r.allowPageType(null===(E=s.services)||void 0===E?void 0:E.header_bidding.page_types)){t.next=32;break}return J=i(14),Y=new J(r,s),t.next=32,Y.prepare(!1);case 32:if(null===(_=s.services)||void 0===_||!_.sticky.active){t.next=37;break}return X=i(40),Z=new X(r,s),t.next=37,Z.run();case 37:null!==(A=s.services)&&void 0!==A&&A.mobile_inread_sticky.active&&r.is_mobile&&($=i(81),r.contentLoaded().then((function(){new $(r,s).run()}))),null!==(F=s.services)&&void 0!==F&&F.engageya.active&&(et=r.is_mobile?null===(Q=s.services)||void 0===Q?void 0:Q.engageya.mobile.conditions.page_types:null===(tt=s.services)||void 0===tt?void 0:tt.engageya.desktop.conditions.page_types,r.allowPageType(et)&&(it=i(82),nt=new it(r,s),r.contentLoaded().then((function(){nt.run()})))),r.getParameterByName("vast_url")&&(rt=i(83),r.waitFor("teads",(function(){setTimeout((function(){new rt(s,r).runDemoInread(r)}),1e3)}))),null!==(I=s.services)&&void 0!==I&&I.story_teller.active&&(st=i(41),r.contentLoaded().then((function(){new st(r,s).run()}))),null!==(C=s.services)&&void 0!==C&&C.instream_hb.active&&(ot=i(42),r.contentLoaded().then((function(){new ot(r,s).run()}))),null!==(k=s.services)&&void 0!==k&&k.instream.active&&(at=i(43),r.contentLoaded().then((function(){new at(r,s).run()}))),null!==(P=s.services)&&void 0!==P&&P.vi.active&&(lt=r.is_mobile?null===(ut=s.services)||void 0===ut?void 0:ut.vi.mobile.conditions.page_types:null===(ct=s.services)||void 0===ct?void 0:ct.vi.desktop.conditions.page_types,r.allowPageType(lt)&&(dt=i(84),r.contentLoaded().then((function(){new dt(r,s).run()})))),null!==(T=s.services)&&void 0!==T&&T.primis.active&&(gt=r.is_mobile?null===(ht=s.services)||void 0===ht?void 0:ht.primis.mobile.conditions.page_types:null===(ft=s.services)||void 0===ft?void 0:ft.primis.desktop.conditions.page_types,r.allowPageType(gt)&&(pt=i(85),r.contentLoaded().then((function(){new pt(r,s).run()})))),null!==(O=s.services)&&void 0!==O&&null!==(R=O.in_image)&&void 0!==R&&R.active&&(mt=i(86),new mt(r,s).run()),null!==(D=s.services)&&void 0!==D&&null!==(B=D.adlightning)&&void 0!==B&&B.active&&i(44)(s),null!==(N=s.services)&&void 0!==N&&null!==(M=N.teads_analytics)&&void 0!==M&&M.active&&i(87)(s),null!==(j=s.services)&&void 0!==j&&null!==(z=j.aniview)&&void 0!==z&&z.active&&(vt=i(88),new vt(r,s).run());case 49:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}()},function(t,e){t.exports=function(t){var e=document.createElement("script");e.src="https://cdn.unblockia.com/h.js",document.head.appendChild(e),(t.debug||t.services.blockthrough.debug)&&console.info("[OCM][Ads behind Adblock] Loaded")}},function(t,e){t.exports=function(t,e){if(t.services.mwi.hasOwnProperty("code")){if((t.debug||t.services.mwi.debug)&&console.log("[OCM][MWI] Running..."),!e.allowPageType(t.services.mwi.page_types))return void((t.debug||t.services.mwi.debug)&&console.warn("[OCM][MWI] Terminating due to page type"));if(!t.services.mwi.safari&&e.browser.isSafari)return void((t.debug||t.services.mwi.debug)&&console.warn("[OCM][MWI] Terminating due to Safari browser"));if(!t.services.mwi.mobile&&e.is_mobile)return void((t.debug||t.services.mwi.debug)&&console.warn("[OCM][MWI] Terminating due to mobile device"));if(!t.services.mwi.desktop&&!e.is_mobile)return void((t.debug||t.services.mwi.debug)&&console.warn("[OCM][MWI] Terminating due to desktop device"));var i;e.window.googletag.cmd.push((function(){(i=googletag.defineOutOfPageSlot(t.services.mwi.code,googletag.enums.OutOfPageFormat.INTERSTITIAL))&&(e.loadStyle("ins[data-vignette-loaded] { position:fixed !important; z-index: 2147483647 !important }"),(t.debug||t.services.mwi.debug)&&console.log("[OCM][MWI] Slot created"),i.addService(googletag.pubads()),(e.config.services.header_bidding.active||e.config.services.lazyload.active)&&((t.debug||t.services.mwi.debug)&&console.log("[OCM][MWI] disableInitialLoad is on, refreshing"),googletag.pubads().refresh([i])))}))}else t.services.mwi.hasOwnProperty("code")||!t.debug&&!t.services.mwi.debug||console.error("[OCM][MWI] Ad unit code missing from config")}},function(t,e,i){var n=i(0),r=i(1),s=i(2);function o(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){u=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(u)throw s}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var u="[OCM][Injected Tags] ";t.exports=function(){"use strict";function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t),s(this,"utils",void 0),s(this,"config",void 0),s(this,"it_config",void 0),s(this,"parent_el",void 0),this.parent_el=r,this.utils=e,this.config=i,this.it_config=i.services.injected_tags}return r(t,[{key:"run",value:function(){var t,e=o(this.it_config.tags);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.active&&(this.utils.allowPageType(i.conditions.page_types)&&this.createTag(i))}}catch(t){e.e(t)}finally{e.f()}}},{key:"createTag",value:function(t){var e=this;this.utils.contentLoaded().then((function(){e.inject(t)}))}},{key:"inject",value:function(t){if((this.config.debug||this.it_config.debug)&&console.log(u+"injecting "+t.path),void 0!==t.device_category){if(!1===t.device_category.mobile&&this.utils.is_mobile)return void((this.config.debug||this.it_config.debug)&&console.info(u+"injected tag: "+t.path+" has been disabled on mobile"));if(!1===t.device_category.desktop&&!this.utils.is_mobile)return void((this.config.debug||this.it_config.debug)&&console.info(u+"injected tag: "+t.path+" has been disabled on desktop"))}this.parent_el&&(t.conditions.selector=this.parent_el+" "+t.conditions.selector);var e=this.utils.determineInjectionTarget(t.conditions.selector,t.conditions.position,t.conditions.count_gt,t.conditions.word_count,t.conditions.words_gt);if(e){(this.config.debug||this.it_config.debug)&&console.info(u+"node found: ",e);var i=document.createElement("div"),n=document.createElement("div"),r=document.createElement("script"),s=!!t.hasOwnProperty("multiplex")&&t.multiplex,o=!(!t.hasOwnProperty("mobile_inread_sticky")||!this.utils.is_mobile)&&t.mobile_inread_sticky;if(s){var a=parseInt(this.utils.window.getComputedStyle(e.parentNode,null).getPropertyValue("padding-left").replace("px",""))+parseInt(this.utils.window.getComputedStyle(e.parentNode,null).getPropertyValue("padding-right").replace("px","")),c=e.parentNode.offsetWidth-a;i.id=t.div_id+"-parent",null!==t.style?i.setAttribute("style","width:"+c+"px; "+t.style):n.setAttribute("style","margin: 0 auto; width:"+c+"px;"),n.id=t.div_id}else{if(o){i.classList.add("ocm-mis");var l=document.createElement("div");l.classList.add("ocm-mis-expand");var d=document.createElement("div");d.classList.add("ocm-mis-wrapper"),n.id=t.div_id,n.setAttribute("data-ocm-mis","true"),d.append(n),l.append(d),i.append(l)}else i.id=t.div_id;""!==t.style&&(i.style=t.style),t.classes&&void 0!==t.classes&&""!==t.classes&&i.setAttribute("class",t.classes)}t.hasOwnProperty("size_mapping")&&null!==t.size_mapping&&t.size_mapping.hasOwnProperty("code")&&t.size_mapping.hasOwnProperty("name")&&null!==t.size_mapping.code&&null!==t.size_mapping.name?r.text="googletag.cmd.push(function() {  "+t.size_mapping.code.replace(/g\n/,"")+' googletag.defineSlot("'+t.path+'", '+t.sizes+', "'+t.div_id+'").defineSizeMapping('+t.size_mapping.name+').addService(googletag.pubads());  googletag.display("'+t.div_id+'")});':r.text='googletag.cmd.push(function() { googletag.defineSlot("'+t.path+'", '+t.sizes+', "'+t.div_id+'").addService(googletag.pubads());  googletag.display("'+t.div_id+'") })',t.conditions.hasOwnProperty("place")&&t.conditions.place&&this.utils.injectTag(e,i,t.conditions.place)&&(s?(i.append(n),n.append(r)):o?(n.append(r),this.utils.clipHiddenOverflows(i)):i.append(r))}else(this.config.debug||this.it_config.debug)&&console.info(u+"node NOT found, stopping process",e)}}]),t}()},function(t,e,i){var n=i(0),r=i(1),s=i(2);function o(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){u=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(u)throw s}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}t.exports=function(){"use strict";function t(e,i){n(this,t),s(this,"utils",void 0),s(this,"config",void 0),s(this,"mis_config",void 0),s(this,"pairs",void 0),this.utils=e,this.config=i,this.mis_config=i.services.mobile_inread_sticky}return r(t,[{key:"run",value:function(){var t=this;this.utils.loadStyle(".ocm-mis-adv{font-size:10px; margin:0 auto 5px 0} .ocm-mis{position:relative;text-align:center} .ocm-mis-expand{height:650px; min-width:300px; max-width:336px; background-color:transparent; margin:0 auto;} .ocm-mis-wrapper{position:sticky; top:"+this.mis_config.top+"px !important}"),this.gptMisEvent(),this.utils.contentLoaded().then((function(){t.init()}))}},{key:"init",value:function(){(this.config.debug||this.mis_config.debug)&&console.log("[OCM][MIS] Looking up configured MIS divs...");var t,e=o(this.mis_config.pairs);try{for(e.s();!(t=e.n()).done;){var i=t.value;if(this.utils.allowPageType(i.page_types)){var n=this.utils.window.document.querySelector('[id*="'+i.selector+'"]:not([data-ocm-mis="true"])');if(n){if((this.config.debug||this.mis_config.debug)&&console.log("[OCM][MIS] Div found ("+i.selector+")"),n.querySelector('div[id^="google_ads_iframe_"] > iframe'))return void((this.config.debug||this.mis_config.debug)&&console.log("[OCM][MIS] Ad already loaded. Don't mess with it. Aborting DOM manipulation."));(this.config.debug||this.mis_config.debug)&&console.log("[OCM][MIS] Transforming to mobile inread sticky ("+i.selector+")");var r=document.createElement("div");r.classList.add("ocm-mis");var s=document.createElement("div");s.classList.add("ocm-mis-expand");var a=document.createElement("div");a.classList.add("ocm-mis-wrapper"),n.parentNode.insertBefore(r,n),r.append(s),s.append(a),a.appendChild(n),n.setAttribute("data-ocm-mis","true"),this.utils.clipHiddenOverflows(r),(this.config.debug||this.mis_config.debug)&&console.log("[OCM][MIS] Transformation done ("+i.selector+")")}}else(this.config.debug||this.mis_config.debug)&&console.log("[OCM][MIS] ##"+i.selector+"## not allowed in page type")}}catch(t){e.e(t)}finally{e.f()}}},{key:"gptMisEvent",value:function(){var t=this;this.utils.window.googletag.cmd.push((function(){googletag.pubads().addEventListener("slotRenderEnded",(function(e){if(!e.isEmpty&&t.utils.is_mobile){(t.config.debug||t.mis_config.debug)&&console.log("[OCM][MIS] Am in mobile device, time to check for position + z-index properties");var i=document.getElementById(e.slot.getSlotElementId());if((t.config.debug||t.mis_config.debug)&&console.log("[OCM][MIS] Found non empty mis slot:",i,i.classList.contains("ocm-mis")),i.classList.contains("ocm-mis")){var n=20;!function e(){(t.config.debug||t.mis_config.debug)&&console.log("[OCM][MIS] Looking for position style property in #"+i.id),i.style.getPropertyValue("position")&&n>0?((t.config.debug||t.mis_config.debug)&&console.log("[OCM][MIS] Found position style property in #"+i.id),i.style.removeProperty&&((t.config.debug||t.mis_config.debug)&&console.log("[OCM][MIS] Removing position style property in #"+i.id),i.style.removeProperty("position"))):((t.config.debug||t.mis_config.debug)&&console.log("[OCM][MIS] Did not find position style property in #"+i.id+", retrying"),n>0&&(n--,setTimeout(e,100)))}()}}}))}))}}]),t}()},function(t,e,i){var n=i(0),r=i(1),s=i(2),o="[OCM][Engageya] ";t.exports=function(){"use strict";function t(e,i){n(this,t),s(this,"utils",void 0),s(this,"config",void 0),s(this,"engageya_config",void 0),this.utils=e,this.config=i,this.engageya_config=this.utils.is_mobile?i.services.engageya.mobile:i.services.engageya.desktop}return r(t,[{key:"run",value:function(){(this.config.debug||this.config.services.engageya.debug)&&console.log(o+"Running...");var t=this.utils.determineInjectionTarget(this.engageya_config.conditions.selector,this.engageya_config.conditions.position,this.engageya_config.conditions.count_gt,this.engageya_config.conditions.word_count,this.engageya_config.conditions.words_gt);if(t){var e=document.createElement("div");e.id="OCM_CR_WIDGET_"+this.engageya_config.wid;var i=document.createElement("script");i.text="(function(E,n,G,A,g,Y,a){E['EngageyaObject']=g;E[g]=E[g]||function(){ (E[g].q=E[g].q||[]).push(arguments)},E[g].l=1*new Date();Y=n.createElement(G), a=n.getElementsByTagName(G)[0];Y.async=1;Y.src=A;a.parentNode.insertBefore(Y,a)})\n(window,document,'script','//widget.engageya.com/engageya_loader.js','__engWidget')\n__engWidget('createWidget',{wwei:'"+e.id+"',pubid:"+this.engageya_config.pubid+",webid:"+this.engageya_config.webid+",wid:"+this.engageya_config.wid+"});",this.utils.injectTag(t,e,this.engageya_config.conditions.place)&&e.appendChild(i),e.appendChild(i)}else(this.config.debug||this.config.services.engageya.debug)&&console.log(o+"Could not find defined selector: "+this.engageya_config.selector)}}]),t}()},function(t,e,i){var n=i(0),r=i(1),s=i(2);function o(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){u=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(u)throw s}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}t.exports=function(){"use strict";function t(e,i){n(this,t),s(this,"config",void 0),s(this,"outstream_config",void 0),s(this,"utils",void 0),this.config=e,this.outstream_config=e.services.outstream,this.utils=i}return r(t,[{key:"run",value:function(){this.outstream_config.hasOwnProperty("rules")&&this.ruleActions();for(var t=this.outstream_config.exclude_urls,e=t.length,i=0;i<e.length;i++)if(this.utils.window.location.href.indexOf(t[i].url)>-1)return;this.outstream_config.hasOwnProperty("article_identifier")&&(null===this.outstream_config.article_identifier&&this.utils.loadScript("//a.window.teads.Tv/page/"+this.outstream_config.page_id+"/tag","text/javascript",1,"teads"),null!==this.utils.window.document.querySelector(this.outstream_config.article_identifier)&&this.utils.loadScript("//a.window.teads.Tv/page/"+this.outstream_config.page_id+"/tag","text/javascript",1,"teads"))}},{key:"ruleActions",value:function(){var t,e=o(this.outstream_config.rules);try{for(e.s();!(t=e.n()).done;)for(var i=t.value,n=i.type,r=i.key,s=i.values,a=i.deals,u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var l=u[c].innerHTML;if(/(setTargeting\()/.test(l))for(var d=l.match(/(setTargeting\()(.+|\n*|\t*)(\))/g),h=0;h<d.length;h++){var f=JSON.parse(d[h].replace(/'/g,'"').replace("setTargeting(","[").replace(")","]"));if(f[0]===r)for(var g=0;g<s.length;g++)if(f[1].indexOf(s[g])>=0)for(var p=Math.round((new Date).getTime()/1e3),m=0;m<a.length;m++)this.utils.loadImage("https://t.window.teads.Tv/"+n+"?i="+a[m]+"&rnd="+p,"body")}}}catch(t){e.e(t)}finally{e.f()}}},{key:"runDemoInread",value:function(t){t.loadStyle(".teads-inread {max-width: 650px!important; margin: 10px auto;} ");var e=t.getParameterByName("vast_url")||"https://s8t.window.teads.Tv/vast/6753877076819280",i=112951,n=1,r=!1,s=!1;1==t.getParameterByName("view_to_start")&&(n=122779),1==t.getParameterByName("smart")&&(n=122781,r=!0,this.utils.window.DO_BYPASS_DO_FORCE_SMART=!0),1==t.getParameterByName("slider")&&(n=122782,s=!0,r=!0);var o="inread";this.utils.window._ttp={},this.utils.window._ttp[i]=[{slider:{allow_corner_position:!0,allow_top_position:!0},pid:n,format:o,parentWindow:!1,slot:{selector:this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]][Object.keys(this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]])[0]][0].rawSettings.slot.selector,minimum:this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]][Object.keys(this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]])[0]][0].rawSettings.slot.minimum,btf:!1,css:"margin: 0px auto 25px; max-width: 650px !important;"}}],this.utils.window._tta={},this.utils.window._tta[i]=[{type:"VastUrl",content:e,portfolio_item_id:1,settings:{values:{pageId:i,placementId:n,placementFormat:o,threshold:50,adType:"video"},components:{credits:{display:!1,text:"",link:"#"},closeButton:{display:!0}},behaviors:{onlyNative:!1,smartPosition:{corner:r,top:r},slider:{enable:s},videoPause:"no"}}}];var a=document.createElement("script");a.src="//a.teads.tv/media/format/v3/teads-format.js",document.head.appendChild(a)}}]),t}()},function(t,e,i){var n=i(0),r=i(1),s=i(2);t.exports=function(){"use strict";function t(e,i){n(this,t),s(this,"utils",void 0),s(this,"config",void 0),s(this,"vi_config",void 0),this.utils=e,this.config=i,this.vi_config=this.utils.is_mobile?this.config.services.vi.mobile:this.config.services.vi.desktop}return r(t,[{key:"run",value:function(){(this.config.debug||this.config.services.vi.debug)&&console.log("[OCM][VI] Running..."),this.utils.loadStyle("#vi-stories-sponsor-container {display: none!important;}"),this.createElement()}},{key:"createElement",value:function(){var t=document.createElement("div");t.id="vi-div",t.style=this.config.services.vi.style;var e=this.utils.determineInjectionTarget(this.vi_config.conditions.selector,this.vi_config.conditions.position,this.vi_config.conditions.count_gt,this.vi_config.conditions.word_count,this.vi_config.conditions.words_gt);e?this.utils.injectTag(e,t,this.vi_config.conditions.place)&&this.viScript():(this.config.debug||this.config.services.vi.debug)&&console.warn("[OCM][VI] Could not find selector "+this.vi_config.conditions.selector)}},{key:"viScript",value:function(){var t=document,e=this.utils.window,i=t.createElement("script"),n={ChannelID:"5d8390ef28a0611e523a52aa",AdUnitType:"2",PublisherID:"133044126840134",PlacementID:"pltz9FljnNNm8YU6PEn",DivID:"vi-div",IAB_Category:this.config.services.vi.iab,Keywords:"",Language:"en-us",BG_Color:"",Text_Color:"",Font:"",FontSize:""};i.src="https://s.vi-serve.com/tagLoader.js",i.type="text/javascript",i.onload=function(){e[btoa("video intelligence start")].init(n)},(t.getElementsByTagName("head")[0]||t.documentElement.appendChild(t.createElement("head"))).appendChild(i)}}]),t}()},function(t,e,i){var n=i(0),r=i(1),s=i(2),o="[OCM][Primis] ";t.exports=function(){"use strict";function t(e,i){n(this,t),s(this,"utils",void 0),s(this,"config",void 0),s(this,"primis_config",void 0),s(this,"conditions",void 0),this.utils=e,this.config=i,this.primis_config=this.utils.is_mobile?this.config.services.primis.mobile:this.config.services.primis.desktop}return r(t,[{key:"run",value:function(){(this.config.debug||this.primis_config.debug)&&console.log(o+"Running...");var t=this.utils.determineInjectionTarget(this.primis_config.conditions.selector,this.primis_config.conditions.position,this.primis_config.conditions.count_gt,this.primis_config.conditions.word_count,this.primis_config.conditions.words_gt);t?this.create(t):(this.config.debug||this.primis_config.debug)&&console.log(o+"Could not find selector "+this.primis_config.conditions.selector)}},{key:"create",value:function(t){var e=this;this.primis_config.conditions.geo_filtering&&this.utils.geolocation().then((function(t){e.primis_config.conditions.geo_filtering_countries.includes(t)||(e.config.debug||e.primis_config.debug)&&console.log(o+"Terminating due to geo filter",e.primis_config.conditions.geo_filtering_countries,t)}));var i=void 0!==this.config.schain?this.config.schain.config.nodes[0].sid:"",n=document.createElement("div");if(n.setAttribute("style",this.config.services.primis.style),this.utils.injectTag(t,n,this.primis_config.conditions.place)){var r=document.createElement("script");r.async=!0,r.src=this.config.services.primis.src+"&schain=1.0,1!orangeclickmedia.com,"+i+",1",n.appendChild(r)}}}]),t}()},function(t,e,i){var n=i(3),r=i(4),s=i(5),o=i(0),a=i(1),u=i(2);function c(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}i(20);var d="[OCM][inImage] ";t.exports=function(){"use strict";function t(e,i){o(this,t),u(this,"utils",void 0),u(this,"config",void 0),u(this,"in_image_config",void 0),u(this,"window",void 0),u(this,"include_observer",void 0),this.utils=e,this.config=i,this.in_image_config=i.services.in_image}var e;return a(t,[{key:"run",value:function(){this.config.debug&&console.log(d+"Running..."),(this.config.debug||this.in_image_config.debug)&&console.info(d+"Is mobile =>",this.utils.is_mobile);var t,e=c(this.in_image_config.tags);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.active&&this.showAdInImage(i)}}catch(t){e.e(t)}finally{e.f()}}},{key:"showAdInImage",value:function(t){for(var e=this,i=this.utils.window.document.querySelectorAll("".concat(t.selector)),o=function(o){var a=i[o],u=0,l=a.parentElement,h=0;l&&(h=l.getBoundingClientRect().width);var f=a.getBoundingClientRect().height.toString(),g=a.getBoundingClientRect().width.toString();a.hasAttribute("data-lazy-type")&&(g=a.clientWidth?a.clientWidth.toString():g,f=a.clientHeight?a.clientHeight.toString():f),h>parseInt(g)&&(u=(h-parseInt(g))/2),(e.config.debug||e.in_image_config.debug)&&(console.log(d+"imageParent_width = ",h,s(h)),console.log(d+"imageParent_width > parseInt(image_width) = ",h>parseInt(g)),console.log(d+"image_width = ",g,s(g)),console.log(d+"new_left = ",u,s(u)),console.log(d+"new_left in css = ",String(u)+"px"));var p=e.in_image_config.available_sizes,m=null,v=!1;p=p.filter((function(t){return t.isMobile===e.utils.is_mobile})).reverse();var y,b=c(p);try{for(b.s();!(y=b.n()).done;){var w=y.value;if(g>=w.widthImg&&f>=w.heightImg&&!0===w.isActive){(e.config.debug||e.in_image_config.debug)&&console.info(d+"in_image_".concat(o," has the conditions to render ad"),w);try{m=JSON.parse(w.adSizes)[0]}catch(t){break}v=!0;break}}}catch(t){b.e(t)}finally{b.f()}if(v){(e.config.debug||e.in_image_config.debug)&&console.log(d+"For div in_image_".concat(o,", width:")+m[0]+" height:"+m[1]),e.topStyleForButton(m[1],o);var x=m[1]+6,S=document.createElement("div");S.setAttribute("id","in_image_container_".concat(o)),S.classList.add("ocm-inImage-container"),S.style="height:".concat(f,"px; width:").concat(g,"px"),a.parentElement.insertBefore(S,a),S.appendChild(a),a.style="position:absolute; left:".concat(String(u),"px; top:0");var E='<div id="in_image_'.concat(o,'" style="height:0;"></div>'),_=document.createElement("div");_.classList.add("ocm-inImage","reveal-top"),S.appendChild(_),_.insertAdjacentHTML("beforeend",E),e.utils.window.googletag=e.utils.window.googletag||{cmd:[]},e.utils.window.googletag.cmd.push((function(){var i=e.utils.window.googletag.defineSlot("".concat(t.ad_tag_url),[m],"in_image_".concat(o)).addService(googletag.pubads());e.utils.window.googletag.display("in_image_".concat(o)),e.utils.config.services.lazyload.active||e.utils.window.googletag.pubads().refresh([i]),e.utils.window.googletag.pubads().addEventListener("slotRenderEnded",function(){var t=r(n.mark((function t(i){var r,s,a;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.isEmpty||i.slot.getSlotElementId()!=="in_image_".concat(o)){t.next=12;break}if(r=_.parentElement,s=r.getAttribute("id"),!e.utils.browser.isSafari){t.next=8;break}return t.next=6,e.isInViewportInImage(o,_,u,x);case 6:t.next=12;break;case 8:return a=document.querySelectorAll("#in_image_container_".concat(o))[0],t.next=11,e.includeObserverInImage(s,_,u,x);case 11:e.include_observer.observe(a);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}},a=0;a<i.length;a++)o(a)}},{key:"includeObserverInImage",value:(e=r(n.mark((function t(e,i,s,o){var a,u=this;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:IntersectionObserver.prototype.POLL_INTERVAL=100,a={root:null,rootMargin:"20px 0px",threshold:.5},this.include_observer=new IntersectionObserver((function(t,a){t.forEach(function(){var t=r(n.mark((function t(r){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==r.target.id){t.next=6;break}if(void 0===r.isVisible&&(r.isVisible=!0),!r.isIntersecting){t.next=6;break}return t.next=5,u.addEffectAndCloseButton(i,s,o);case 5:a.unobserve(r.target);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),a);case 3:case"end":return t.stop()}}),t,this)}))),function(t,i,n,r){return e.apply(this,arguments)})},{key:"isPhotoInViewport",value:function(t){var e,i,n=0,r=document.getElementById(t);if(!r||void 0===r)return!1;if(i=(e=r.getBoundingClientRect()).height>=600,e.top>=0&&e.left>=0&&e.bottom<=(this.utils.window.innerHeight||this.utils.window.document.documentElement.clientHeight)&&e.right<=(this.utils.window.innerWidth||this.utils.window.document.documentElement.clientWidth))return!0;if(e.top<0&&e.left>=0)if(n=(e.height-Math.abs(e.top))/e.height*100,i){if(n>=67)return!0}else if(n>=51)return!0;return!1}},{key:"isInViewportInImage",value:function(t,e,i,s){var o=this;window.addEventListener("scroll",r(n.mark((function r(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o.isPhotoInViewport("in_image_container_".concat(t))){n.next=3;break}return n.next=3,o.addEffectAndCloseButton(e,i,s);case 3:case"end":return n.stop()}}),r)}))))}},{key:"addEffectAndCloseButton",value:function(t,e,i){t.classList.add("menu--animatable"),t.classList.contains("menu--visible")?t.classList.remove("menu--visible"):t.classList.add("menu--visible");var n=this.in_image_config.bg_color;t.style="left:".concat(String(e),"px; height:").concat(i,"px !important;background-color:").concat(n);var r=document.createElement("div");r.classList.add("close-icon-container");var s=document.createElement("button");s.classList.add("ocm-button-close"),this.utils.is_mobile||(r.addEventListener("mouseenter",(function(){s.classList.add("ocm-button-close-hover")})),r.addEventListener("mouseleave",(function(){s.classList.remove("ocm-button-close-hover")}))),r.append(s),t.append(r),s.addEventListener("click",(function(){t.classList.add("ocm-inImage-remove")}))}},{key:"topStyleForButton",value:function(t,e){this.utils.loadStyle("          .ocm-button-close{\n               padding: 0 !important;\n               border-radius: 4px !important;\n               display: block !important;\n               position: relative !important;\n               width: 30px !important;\n               height: 30px !important;\n               background: #fff !important;\n               color: #4a968e !important;\n               border: 1px solid #106e89 !important;\n               outline: none !important;\n               cursor: pointer !important;\n           }\n\n           .ocm-button-close-hover:before{\n                   width: 100% !important;\n                   box-sizing: border-box !important;\n                   margin:0 !important;\n                   padding:0 !important;\n            }\n\n            .ocm-button-close-hover:after{\n                   width: 100% !important;\n                   box-sizing: border-box !important;\n                   margin:0 !important;\n                   padding:0 !important;\n            }\n\n            .ocm-button-close:before{\n               box-sizing: border-box !important;\n               content: '' !important;\n               border-radius: 13px !important;\n               position: absolute !important;\n               left: 50% !important;\n               top: 50% !important;\n               width: 0;\n               margin:0 !important;\n               padding:0 !important;\n               height: 1px !important;\n               border-left: 8px solid currentColor !important;\n               border-right: 8px solid currentColor !important;\n               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;\n               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;\n           }\n\n           .ocm-button-close:after{\n               box-sizing: border-box !important;\n               content: '' !important;\n               border-radius: 13px !important;\n               position: absolute !important;\n               left: 50% !important;\n               top: 50% !important;\n               width: 0;\n               margin:0 !important;\n               padding:0 !important;\n               height: 1px !important;\n               border-left: 8px solid currentColor !important;\n               border-right: 8px solid currentColor !important;\n               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;\n               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;\n           }\n\n          .ocm-inImage-container {\n             position:relative; \n             overflow: hidden;\n          }\n\n          .ocm-inImage.menu--visible  {\n              -webkit-transform: none;\n              transform: none;\n}\n\n          .ocm-inImage.menu--animatable {\n             transition: all 1s ease-out;\n}\n         .ocm-inImage.menu--animatable > #in_image_"+e+" {\n           height: "+t+"px !important; \n           transition: height 1s ease-out;\n}\n          .ocm-inImage {\n             overflow: visible;             position:absolute; \n             padding-top:3px; \n             padding-bottom:3px; \n             bottom:0 !important; \n             height: 0px;\n             width:100%; \n             display: flex; \n             align-items: center;\n             justify-content: center;\n          }\n\n          .ocm-inImage .close-icon-container {\n            position: absolute;\n            top: -37px;\n            height: 20px;\n            width: 30px;\n            right: 9px;\n            z-index: 10;\n          }\n\n          .ocm-inImage .close-icon {\n            display: inline-block;\n            height: 26px;\n            width: 26px;\n            cursor: pointer;\n            stroke: #fff;\n            margin: 3px;\n          }\n\n          .ocm-inImage.reveal-top {\n            opacity: 1;\n          }\n\n          .ocm-inImage.reveal-top.ocm-inImage-remove {\n            transition: opacity 0.5s linear;\n            opacity: 0;\n          }\n\n          .ocm-inImage .progress {\n            opacity: 0;\n            stroke-dasharray: 0, 120;\n          }")}}]),t}()},function(t,e){t.exports=function(t){var e=t.hasOwnProperty("use_window_top")?t.use_window_top?window.top:window:window.top;e.teads_analytics=e.teads_analytics||{},e.teads_analytics.analytics_tag_id="PUB_".concat(t.services.teads_analytics.publisher_id),e.teads_analytics.share=e.teads_analytics.share||function(){(e.teads_analytics.shared_data=e.teads_analytics.shared_data||[]).push(arguments)};var i=document.createElement("script");i.src="https://a.teads.tv/analytics/tag.js",document.head.appendChild(i),(t.debug||t.services.teads_analytics.debug)&&console.info("[OCM][Teads Analytics]Loaded")}},function(t,e,i){var n=i(0),r=i(1),s="[OCM][AniView] ";t.exports=function(){"use strict";function t(e,i){n(this,t),this.utils=e,this.config=i,this.aniview_config=this.utils.is_mobile?i.services.aniview.mobile:i.services.aniview.desktop}return r(t,[{key:"run",value:function(){(this.config.debug||this.aniview_config.debug)&&console.log(s+"Running..."),this.utils.allowPageType(this.aniview_config.rules.page_types)?this.createPlayerElement():(this.config.debug||this.aniview_config.debug)&&console.log(s+"Page type doesn't match the selected ones: ",this.aniview_config.rules.page_types)}},{key:"createPlayerElement",value:function(){var t=this;this.utils.contentLoaded().then((function(){t.inject()}))}},{key:"inject",value:function(){(this.config.debug||this.aniview_config.debug)&&console.log(s+"Trying to inject player element");var t=this.utils.determineInjectionTarget(this.aniview_config.rules.selector,this.aniview_config.rules.position,this.aniview_config.rules.count_gt,this.aniview_config.rules.word_count,this.aniview_config.rules.words_gt);if(t){var e=document.createElement("script");e.id="AV".concat(this.aniview_config.playerTagId),e.type="text/javascript",e.src="https://tg1.aniview.com/api/adserver/spt?AV_PUBLISHERID=".concat(this.aniview_config.publisher,"&AV_TAGID=").concat(this.aniview_config.playerTagId),e.async="true",e.setAttribute("data-player-api","avPassback");var i=this.utils.window.document.createElement("div");i.classList.add("ocm-player"),this.aniview_config.classes&&i.classList.add(this.aniview_config.classes),this.aniview_config.styles&&(i.style=this.aniview_config.styles),this.utils.injectTag(t,i,this.aniview_config.rules.place),i.append(e),(this.config.debug||this.aniview_config.debug)&&console.log(s+"Selector found and script added"),this.createPassback()}else(this.config.debug||this.aniview_config.debug)&&console.log(s+"No selector found")}},{key:"createPassback",value:function(){this.utils.window.avPassback=function(t,e){e.on("AdError",(function(t,e){"function"==typeof window.OCM.oipb&&window.OCM.oipb(t,e)}))}}}]),t}()},function(t,e,i){var n=i(3),r=i(4),s=function(){var t=r(n.mark((function t(e){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){var n="ROS";n=window.location.hostname.includes("1xbet")?"1xbet":"Home",e.loadStyle(".ocm-sticky.bottom {padding:0px !important}"),t(n)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();t.exports=s},function(t,e,i){function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(u)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var s=function(t){var e,i,r,s=t.use_window_top?window.top:window,o=s.document.querySelectorAll("script[data-cmp-src]");if(o.length){var a,u=n(o);try{for(u.s();!(a=u.n()).done;){var c=a.value;for(e=document.createElement("script"),i=Array.prototype.slice.call(c.attributes);r=i.pop();)"data-cmp-src"===r.nodeName?e.setAttribute("src",r.nodeValue):e.setAttribute(r.nodeName,r.nodeValue);c.parentNode.insertBefore(e,c),c.remove()}}catch(t){u.e(t)}finally{u.f()}}var l=s.document.querySelectorAll("script[data-cmp-script]");if(l.length){var d,h=n(l);try{for(h.s();!(d=h.n()).done;){var f=d.value;for(e=document.createElement("script"),i=Array.prototype.slice.call(f.attributes);r=i.pop();)"data-cmp-script"===r.nodeName?e.setAttribute("type","text/javascript"):"type"!==r.nodeName&&e.setAttribute(r.nodeName,r.nodeValue);e.text=f.text,f.parentNode.insertBefore(e,f),f.remove()}}catch(t){h.e(t)}finally{h.f()}}};t.exports=function(t){var e=window.top;return e.googletag=e.googletag||{cmd:[]},new Promise((function(n,r){var o=1,a=function(e){e?(s(t),n(e)):r(e)};!function n(){(t.debug||t.services.iab_compliance.debug)&&console.log("[OCM][IAB] Waiting for tcfapi"),void 0===e.__tcfapi&&void 0===e.__cmp?((t.debug||t.services.iab_compliance.debug)&&console.log("[OCM][IAB] tcfapi not found, retrying"),++o>=20?(e.googletag.cmd.push((function(){e.googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0})})),a(!0)):setTimeout(n,100)):void 0!==e.__tcfapi?e.__tcfapi("addEventListener",2,(function(n,r){if(r&&("tcloaded"===n.eventStatus||"useractioncomplete"===n.eventStatus))if((t.debug||t.services.iab_compliance.debug)&&console.log("[OCM][IAB] tcfapi found, calculating values"),t.use_window_top&&(e.OCM.consentData=n),n.gdprApplies){t.use_window_top&&(e.OCM.gdprApplies=!0);var s=!0===n.purpose.consents[1],o=!0===n.purpose.consents[2],u=!0===n.purpose.consents[3],c=!0===n.purpose.consents[4],l=!0===n.purpose.consents[7],d=!0===n.purpose.consents[9],h=!0===n.purpose.consents[10],f=n.vendor.consents[755]&&n.vendor.legitimateInterests[755],g=!1,p=!0,m=!0;if(f&&s&&o&&l&&d&&h&&(g=!0),s&&o&&u&&c&&l&&d&&h&&g?(p=!1,m=!1):s&&o&&!u&&!c&&l&&d&&h&&g&&(p=!0,m=!1),d||(m=!0),t.use_window_top&&(e.OCM.hasPurposeOneConsent=s,e.OCM.hasPurposeTwoConsent=o,e.OCM.hasPurposeThreeConsent=u,e.OCM.hasPurposeFourConsent=c,e.OCM.hasPurposeSevenConsent=l,e.OCM.hasPurposeNineConsent=d,e.OCM.hasPurposeTenConsent=h,e.OCM.hasGoogleConsent=g,e.OCM.serveNonPersonalized=p,e.OCM.restrictDataProcessing=m),(t.debug||t.services.iab_compliance.debug)&&console.log("[OCM][IAB] GDPR applies",e.OCM),t.services.gpt.active)i(22)(t);e.googletag.cmd.push((function(){e.googletag.pubads().setPrivacySettings({nonPersonalizedAds:p,restrictDataProcessing:m})})),a(!0)}else(t.debug||t.services.iab_compliance.debug)&&console.log("[OCM][IAB] GDPR does not apply, run ads normally"),a(!0)})):void 0!==e.__cmp?((t.debug||t.services.iab_compliance.debug)&&console.log("[OCM][IAB] cmp api found, run ads normally"),a(!0)):((t.debug||t.services.iab_compliance.debug)&&console.log("[OCM][IAB] no iab api found,nonPersonalizedAds true"),e.googletag.cmd.push((function(){e.OCM.hasPurposeOneConsent=!1,e.OCM.hasPurposeTwoConsent=!1,e.OCM.hasPurposeThreeConsent=!1,e.OCM.hasPurposeFourConsent=!1,e.OCM.hasPurposeSevenConsent=!1,e.OCM.hasPurposeNineConsent=!1,e.OCM.hasPurposeTenConsent=!1,e.OCM.hasGoogleConsent=!1,e.OCM.serveNonPersonalized=!0,e.OCM.restrictDataProcessing=!0,e.googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0,restrictDataProcessing:!0})})),a(!0))}()}))}},function(t,e,i){var n=i(3),r=i(4),s=i(2);function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}!function(){var t,e,s,o,u,c,l,d,h=i(46),f=new(i(47))(h);if("1"==f.getParameterByName("ocm_dev")&&"prod"===h.env){var g=document.createElement("script");return g.src="//cdn.orangeclickmedia.com/tech/dev/".concat(h.script_tag,"/ocm.js"),void f.doc_head.append(g)}var p=h.hasOwnProperty("use_window_top")?h.use_window_top?window.top:window:window.top;Array.prototype.containsArray||Object.defineProperty(Array.prototype,"containsArray",{enumerable:!1,value:function(t){for(var e={},i=0;i<this.length;i++)e[this[i]]=i;return e.hasOwnProperty(t)}}),String.prototype.ocmStartsWith||Object.defineProperty(String.prototype,"ocmStartsWith",{value:function(t,e){var i=e>0?0|e:0;return this.substring(i,i+t.length)===t}}),p.googletag=(null==p?void 0:p.googletag)||{cmd:[]};var m={pageType:(null===(t=window)||void 0===t||null===(e=t.OCM)||void 0===e?void 0:e.pageType)||"ROS",adBlocked:!0,_log:null!==(s=f.config)&&void 0!==s&&s.log?f.log:null,geo:(null===(o=window)||void 0===o||null===(u=o.ADSQ)||void 0===u||null===(c=u.response)||void 0===c?void 0:c.geo)||null,hb_mode:"",uam_done:!1,pb_done:!1,initial_ad_units:[],ad_units:(null===(l=window)||void 0===l||null===(d=l.OCM)||void 0===d?void 0:d.ad_units)||[],infi_article_count:1,init_ad_server_set:!1,first_gpt_slots_length:0,site_categories:(null==h?void 0:h.site_categories)||[]};p.OCM=p.OCM?a(a({},p.OCM),m):m,f.getParameterByName("ocm_debug")&&(h.debug=!0);var v=i(77),y=f.isMobile();p.OCM.isMobile=y;var b=i(89);h.services.cmp.active&&h.services.cmp.network_id&&i(92)(h);(p.googletag=(null==p?void 0:p.googletag)||{cmd:[]},h.services.iab_compliance.active)?i(90)(h).then(r(n.mark((function t(){var e;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(b,f,h);case 2:return e=i(45),t.next=5,e(f);case 5:case"end":return t.stop()}}),t)})))).catch((function(t){console.error("[IAB COMPLIANCE] Error:",t)})):r(n.mark((function t(){var e;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(b,f,h);case 2:return e=i(45),t.next=5,e(f);case 5:case"end":return t.stop()}}),t)})))()}()},function(t,e,i){var n=i(2),r=i(5);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}t.exports=function(t){(t.debug||t.services.gpt.debug)&&console.info("[OCM] Loading CMP library..."),t.use_window_top?function(){var e,i=window.location.hostname,n=document.createElement("script"),s=document.getElementsByTagName("script")[0],a="https://cmp.quantcast.com".concat("/choice/",t.services.cmp.network_id,"/",i,"/choice.js?tag_version=V2"),u=0;n.async=!0,n.type="text/javascript",n.src=a,s.parentNode.insertBefore(n,s),function(){for(var t,e="__tcfapiLocator",i=[],n=window;n;){try{if(n.frames.__tcfapiLocator){t=n;break}}catch(t){}if(n===window.top)break;n=n.parent}t||(!function t(){var i=n.document,r=!!n.frames.__tcfapiLocator;if(!r)if(i.body){var s=i.createElement("iframe");s.style.cssText="display:none",s.name=e,i.body.appendChild(s)}else setTimeout(t,5);return!r}(),n.__tcfapi=function(){var t,e=arguments;if(!e.length)return i;if("setGdprApplies"===e[0])e.length>3&&2===e[2]&&"boolean"==typeof e[3]&&(t=e[3],"function"==typeof e[2]&&e[2]("set",!0));else if("ping"===e[0]){var n={gdprApplies:t,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof e[2]&&e[2](n)}else"init"===e[0]&&"object"===r(e[3])&&(e[3]=o(o({},e[3]),{},{tag_version:"V2"})),i.push(e)},n.addEventListener("message",(function(t){var e="string"==typeof t.data,i={};try{i=e?JSON.parse(t.data):t.data}catch(t){}var n=i.__tcfapiCall;n&&window.__tcfapi(n.command,n.version,(function(i,r){var s={__tcfapiReturn:{returnValue:i,success:r,callId:n.callId}};e&&(s=JSON.stringify(s)),t&&t.source&&t.source.postMessage&&t.source.postMessage(s,"*")}),n.parameter)}),!1))}();var c=function t(){var e=arguments;r(window.__uspapi)!==t&&setTimeout((function(){void 0!==window.__uspapi&&window.__uspapi.apply(window.__uspapi,e)}),500)};void 0===window.__uspapi&&(window.__uspapi=c,e=setInterval((function(){u++,window.__uspapi===c&&u<3?console.warn("USP is not accessible"):clearInterval(e)}),6e3))}():console.error("[OCM][CMP] Use window top to run CMP service")}}]);
//# sourceMappingURL=ocm.js.map